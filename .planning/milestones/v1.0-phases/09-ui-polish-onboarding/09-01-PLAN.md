---
phase: 09-ui-polish-onboarding
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/design-tokens.ts
  - src/styles/globals.css
  - tailwind.config.js
  - src/components/ui/Button.tsx
  - src/components/ui/Card.tsx
autonomous: true

must_haves:
  truths:
    - "Buttons across the app have a 3D raised appearance with bottom shadow that depresses on click"
    - "Cards have increased border-radius (20px) and intense gradient shadows"
    - "Purple accent color is available for achievement-related UI elements"
    - "Destructive token uses warm red (hue ~10) instead of warm orange (hue 25)"
    - "Design tokens for 3D button shadow, updated radius, and accent colors are defined and usable"
    - "Dark mode has equally vibrant gradients and shadows as light mode"
  artifacts:
    - path: "src/lib/design-tokens.ts"
      provides: "Updated tokens: accent purple, 3D shadow values, updated radius"
      contains: "accent"
    - path: "src/styles/globals.css"
      provides: "Updated CSS variables: destructive hue shift, purple accent, 3D button classes"
      contains: "--accent-purple"
    - path: "src/components/ui/Button.tsx"
      provides: "3D chunky button with box-shadow depth and active press-down"
      contains: "box-shadow"
    - path: "tailwind.config.js"
      provides: "New Tailwind utility mappings for accent colors and shadow tokens"
      contains: "accent-purple"
  key_links:
    - from: "src/lib/design-tokens.ts"
      to: "src/styles/globals.css"
      via: "Shared HSL values for accent colors"
      pattern: "accent"
    - from: "src/styles/globals.css"
      to: "tailwind.config.js"
      via: "CSS variables mapped to Tailwind utilities"
      pattern: "var\\(--"
    - from: "src/components/ui/Button.tsx"
      to: "src/styles/globals.css"
      via: "3D shadow CSS classes or inline Tailwind"
      pattern: "shadow|translate-y"
---

<objective>
Update the design system foundation to support the Duolingo-inspired visual overhaul. This plan changes design tokens (colors, radius, shadows), updates CSS variables, extends Tailwind config, and converts the Button and Card components to use the new 3D chunky aesthetic.

Purpose: Every subsequent plan depends on these foundational tokens being correct. The destructive hue shift, accent purple, 3D button pattern, and updated border-radius must be established first.
Output: Updated design-tokens.ts, globals.css, tailwind.config.js, Button.tsx, Card.tsx with Duolingo-inspired visual system.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-ui-polish-onboarding/09-RESEARCH.md

@src/lib/design-tokens.ts
@src/styles/globals.css
@tailwind.config.js
@src/components/ui/Button.tsx
@src/components/ui/Card.tsx
</context>

<instructions>
Use the /frontend-design skill for all UI design and implementation work in this phase. This is a locked user decision.
</instructions>

<tasks>

<task type="auto">
  <name>Task 1: Update Design Tokens, CSS Variables, and Tailwind Config</name>
  <files>src/lib/design-tokens.ts, src/styles/globals.css, tailwind.config.js</files>
  <action>
Update all three files IN SYNC to establish the new Duolingo-inspired design system:

**design-tokens.ts:**
- Add `accent` object with purple shades for achievements (hue ~270, e.g., 270 70% 60%)
- Add `accent.green` shades for success celebrations (reuse existing success or add brighter variants)
- Add `shadows` object with `chunky: '0 4px 0'` and `chunkyActive: '0 1px 0'` values for 3D buttons
- Update `radius` to make `lg: '1.25rem'` (20px for cards) and `md: '0.75rem'` (12px for buttons)
- Add `typography` weights: `bold: 700`, `extrabold: 800`

**globals.css:**
- Change `--destructive` in `:root` from `25 30% 40%` to `10 50% 45%` (warm coral-red)
- Change `--destructive` in `.dark` from `25 25% 45%` to `10 45% 50%` (warm coral-red for dark)
- Update the `.dark .bg-destructive`, `.dark .text-destructive`, `.dark .border-destructive` overrides to match hue 10
- Update the comments from "warm gray/orange" to "warm red (rose/coral)" to reflect the new decision
- Add `--accent-purple: 270 70% 60%` and `--accent-purple-foreground: 0 0% 100%` to both `:root` and `.dark`
- Add `--success-green: 142 71% 45%` (reuse existing success) for explicit success accent
- Add 3D button utility classes in `@layer components`:
  ```
  .chunky-shadow-primary { box-shadow: 0 4px 0 hsl(var(--primary-700)); }
  .chunky-shadow-primary:active { box-shadow: 0 1px 0 hsl(var(--primary-700)); transform: translateY(3px); }
  ```
  And similar for destructive, success, accent-purple variants
- Enhance `.page-shell::before` feTurbulence/gradient to be more visible per user decision (increase opacity from 0.85 to 0.95, adjust blur from 60px to 45px for more texture visibility)
- Ensure dark mode `.page-shell::before` is equally vibrant (increase opacity from 0.95 to 1.0, richer gradients)

**tailwind.config.js:**
- Add `accent-purple` color mapping: `'accent-purple': 'hsl(var(--accent-purple) / <alpha-value>)'`
- Add `accent-purple-foreground` mapping
- Ensure `success` and `warning` mappings exist (verify or add)
- Add `shadow-chunky` utility if feasible via theme extend

Do NOT change any existing color values that aren't specifically mentioned. The primary blue palette stays exactly the same.
  </action>
  <verify>Run `npx tsc --noEmit` to verify TypeScript compiles. Visually inspect globals.css for correct HSL values. Run `npx tailwindcss --help` to verify config is valid (no syntax errors).</verify>
  <done>Design tokens file has accent purple, shadow tokens, updated radius. CSS variables have destructive hue 10, accent-purple, 3D shadow utilities. Tailwind config maps new CSS variables. All three files are in sync.</done>
</task>

<task type="auto">
  <name>Task 2: Convert Button and Card to 3D Duolingo Aesthetic</name>
  <files>src/components/ui/Button.tsx, src/components/ui/Card.tsx</files>
  <action>
**Button.tsx:**
- Add a `chunky` variant alongside existing variants that uses the 3D raised pattern:
  ```
  chunky: clsx(
    'bg-primary text-primary-foreground',
    'shadow-[0_4px_0_hsl(var(--primary-700))]',
    'hover:shadow-[0_4px_0_hsl(var(--primary-800))]',
    'active:shadow-[0_1px_0_hsl(var(--primary-800))] active:translate-y-[3px]',
    'transition-[box-shadow,transform] duration-100'
  )
  ```
- Update the existing `primary` variant to ALSO have 3D depth (the default button style should be chunky per user decision). Add `shadow-[0_4px_0_hsl(var(--primary-700))]` to the primary variant and `active:shadow-[0_1px_0_hsl(var(--primary-800))] active:translate-y-[3px]` for the press-down effect.
- Add `chunky-destructive` variant using destructive shadow color
- Add `chunky-success` variant using success/emerald shadow color
- IMPORTANT: Do NOT animate `box-shadow` with motion/react spring physics. Use CSS `transition-[box-shadow,transform] duration-100` for the shadow change. The existing motion `whileTap` scale animation can COEXIST with the CSS active:translate-y by adjusting the whileTap to `{ scale: 0.97 }` only (remove any y transform from motion to avoid conflict).
- Increase font weight for button text to `font-bold` (700)
- Update border-radius to `rounded-xl` (12px) instead of `rounded-full` for a more Duolingo chunky look. Keep `rounded-full` only for the `pill` size/shape variant if needed.

**Card.tsx:**
- Increase default border-radius to `rounded-2xl` (20px per user decision, which maps to 1.25rem)
- Add `overflow-hidden` to prevent child content from clipping against larger radius
- Add more intense gradient shadow: `shadow-xl shadow-primary/15 dark:shadow-primary/10`
- Add subtle gradient border or background-gradient for the vibrant feel
- Ensure hover states use `hover:shadow-2xl hover:-translate-y-1` for lift effect
- Bolder card header typography: `font-bold` or `font-extrabold`
  </action>
  <verify>Run `npx tsc --noEmit` to verify no type errors. Visually scan Button.tsx for 3D shadow classes. Verify Card.tsx has rounded-2xl and overflow-hidden.</verify>
  <done>Button has 3D chunky depth with press-down effect on primary variant. Card has 20px radius, intense shadows, overflow-hidden. Both support dark mode with equal vibrancy.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with zero errors
- `npm run lint` passes (no new lint warnings)
- globals.css `--destructive` uses hue ~10 (not 25) in both light and dark
- globals.css has `--accent-purple` variable
- design-tokens.ts exports accent colors and shadow values
- Button.tsx primary variant has `shadow-[0_4px_0_...]` and `active:translate-y-[3px]`
- Card.tsx uses `rounded-2xl` and `overflow-hidden`
</verification>

<success_criteria>
The design system foundation is updated with all new tokens, the Button component has 3D chunky depth, and the Card component has increased roundedness and intense shadows. All subsequent plans can reference these tokens and components.
</success_criteria>

<output>
After completion, create `.planning/phases/09-ui-polish-onboarding/09-01-SUMMARY.md`
</output>
