---
phase: 09-ui-polish-onboarding
plan: 06
type: execute
wave: 3
depends_on: ["09-01"]
files_modified:
  - src/components/navigation/BottomTabBar.tsx
  - src/components/AppNavigation.tsx
  - src/AppShell.tsx
  - src/styles/globals.css
autonomous: true

must_haves:
  truths:
    - "Mobile users see a bottom tab bar with 5 tabs: Dashboard, Study, Test, Interview, Progress"
    - "Active tab shows colored icon + label (Duolingo pattern)"
    - "Bottom tab bar is hidden at md: breakpoint and above"
    - "Desktop navigation has refreshed Duolingo-inspired aesthetic with icons and rounded items"
    - "Tab bar has z-40 (below sync indicator z-50, below tour z-1000)"
    - "Tab bar has safe-area-inset-bottom padding for iOS"
    - "Page content has bottom padding to prevent overlap with tab bar"
  artifacts:
    - path: "src/components/navigation/BottomTabBar.tsx"
      provides: "Mobile bottom tab bar with 5 tabs"
      min_lines: 40
    - path: "src/components/AppNavigation.tsx"
      provides: "Desktop sidebar/top nav with Duolingo-inspired styling"
      contains: "lucide"
  key_links:
    - from: "src/components/navigation/BottomTabBar.tsx"
      to: "react-router-dom"
      via: "useLocation() for active tab detection"
      pattern: "useLocation"
    - from: "src/AppShell.tsx"
      to: "src/components/navigation/BottomTabBar.tsx"
      via: "Mounted inside Router, after Routes"
      pattern: "BottomTabBar"
---

<objective>
Create a mobile bottom tab bar with 5 tabs and refresh the desktop AppNavigation with Duolingo-inspired styling (icons, rounded items, active highlights).

Purpose: Mobile users get thumb-friendly navigation at the bottom of screen (Duolingo pattern). Desktop gets a polished, icon-enriched navigation.
Output: BottomTabBar.tsx, refreshed AppNavigation.tsx, mounted in AppShell.tsx.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-ui-polish-onboarding/09-RESEARCH.md
@.planning/phases/09-ui-polish-onboarding/09-01-SUMMARY.md

@src/components/AppNavigation.tsx
@src/AppShell.tsx
@src/styles/globals.css
</context>

<instructions>
Use the /frontend-design skill for all UI design and implementation work in this phase. This is a locked user decision.
</instructions>

<tasks>

<task type="auto">
  <name>Task 1: Create Mobile Bottom Tab Bar</name>
  <files>src/components/navigation/BottomTabBar.tsx, src/styles/globals.css</files>
  <action>
Create `src/components/navigation/BottomTabBar.tsx`:

**Layout:**
- Fixed at bottom: `fixed bottom-0 left-0 right-0 z-40`
- Hidden on desktop: `md:hidden` (only mobile/tablet)
- Background: `bg-card/95 backdrop-blur-xl border-t border-border/60`
- Safe area: `pb-[env(safe-area-inset-bottom)]` for iOS notch
- Height: ~64px plus safe area

**5 Tabs (locked decision):**
1. Dashboard - icon: Home (lucide-react), path: "/dashboard"
2. Study - icon: BookOpen (lucide-react), path: "/study"
3. Test - icon: FileText or ClipboardCheck (lucide-react), path: "/test"
4. Interview - icon: Mic (lucide-react), path: "/interview"
5. Progress - icon: TrendingUp or BarChart3 (lucide-react), path: "/progress"

**Active State (Duolingo pattern):**
- Use `useLocation()` from react-router-dom to detect current path
- Active tab: icon uses `text-primary-500`, label visible with `text-primary-500 font-semibold text-xs`
- Inactive tab: icon uses `text-muted-foreground`, label shows in `text-muted-foreground text-xs`
- Active tab icon has a subtle `bg-primary-100 dark:bg-primary-900/30 rounded-xl p-1.5` background pill

**Touch Targets:**
- Each tab: `min-h-[44px]` for accessibility (locked decision)
- Flex layout: `flex items-center justify-around`
- Each tab is a Link from react-router-dom

**Interactions:**
- Use `motion.div` for subtle scale tap feedback: `whileTap={{ scale: 0.9 }}`
- No navigation lock handling needed (TestPage handles its own lock via AppNavigation)

**Auth Awareness:**
- Only render when user is on an authenticated route (check if current path is a protected route)
- Don't show on `/`, `/auth`, `/auth/forgot`, `/auth/update-password`, `/op-ed`
- Use `useAuth()` from SupabaseAuthContext OR check location.pathname

**globals.css:**
- Add `.page-shell` padding-bottom adjustment: increase bottom padding when bottom tab bar is present
- Add a CSS variable `--bottom-tab-height: 64px` and update `.page-shell` padding:
  `padding-bottom: calc(var(--safe-area-bottom) + var(--bottom-tab-height, 0px) + 1rem);`
- Apply `--bottom-tab-height: 64px` only at mobile breakpoint via `@media (max-width: 767px)`
  </action>
  <verify>Run `npx tsc --noEmit`. Verify BottomTabBar uses useLocation() not manual path tracking. Verify 5 tabs defined. Verify md:hidden class present.</verify>
  <done>Mobile bottom tab bar with 5 tabs, active tab Duolingo styling, hidden on desktop, safe-area padding, proper z-index ordering.</done>
</task>

<task type="auto">
  <name>Task 2: Refresh Desktop AppNavigation with Duolingo Aesthetic</name>
  <files>src/components/AppNavigation.tsx, src/AppShell.tsx</files>
  <action>
**AppNavigation.tsx - Desktop Refresh + Toast Reclassification:**
- **First:** Reclassify the locked navigation toast from `variant: 'destructive'` to `variant: 'warning'` (~line 55). This is a non-data-loss error that should use warning orange, not destructive red. (Deferred from Plan 09-05 to avoid file ownership conflict with Plan 09-03 in Wave 2.)
- Add icons to each nav link (matching BottomTabBar icons for consistency):
  - Dashboard: Home
  - Study Guide: BookOpen
  - Mock Test: ClipboardCheck
  - Interview: Mic
  - History: Clock
  - Social Hub: Users
- Each nav link gets icon + text (icon on left, text on right)
- Active state styling update: more rounded (`rounded-xl`), bolder active indicator with `bg-primary-500/15 text-primary-600 dark:text-primary-400 font-semibold` and a left border accent: `border-l-3 border-primary-500` or subtle background
- Hover state: `hover:bg-muted/60 rounded-xl` transition
- Overall nav: increase spacing between items, add section dividers if appropriate
- Logo area: bolder typography, font-extrabold for the app title
- Keep existing functionality: locked navigation guard, sync indicator removal (done in plan 03), online status, theme toggle, language toggle
- Mobile hamburger menu: keep for tablet-ish sizes but hide at `md:hidden` since bottom tab bar handles mobile

**AppShell.tsx:**
- Import BottomTabBar from `@/components/navigation/BottomTabBar`
- Mount inside Router, after SyncStatusIndicator:
  ```tsx
  <SyncStatusIndicator />
  <BottomTabBar />
  <OnboardingTour />
  ```
- BottomTabBar handles its own auth/route visibility checks internally
  </action>
  <verify>Run `npx tsc --noEmit`. Verify AppNavigation has icon imports from lucide-react next to each nav link. Verify AppShell mounts BottomTabBar. Verify no SyncStatusIndicator remains in AppNavigation.</verify>
  <done>Desktop nav has Duolingo-inspired icons, rounded items, active highlights. Mobile bottom tab bar is mounted in AppShell. Both navigate correctly via react-router-dom.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes
- `npm run lint` passes
- BottomTabBar has exactly 5 tabs (Dashboard, Study, Test, Interview, Progress)
- BottomTabBar uses `md:hidden`
- AppNavigation has icons next to every nav link
- AppShell mounts BottomTabBar inside Router
- Z-index: tab bar (40) < sync indicator (50) < tour overlay (1000)
</verification>

<success_criteria>
Mobile users see bottom tab bar with 5 tabs, active tab highlighted Duolingo-style. Desktop users see refreshed icon-enriched top navigation. Both work with existing routing.
</success_criteria>

<output>
After completion, create `.planning/phases/09-ui-polish-onboarding/09-06-SUMMARY.md`
</output>
