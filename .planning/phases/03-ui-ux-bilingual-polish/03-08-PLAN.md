---
phase: 03-ui-ux-bilingual-polish
plan: 08
type: execute
wave: 4
depends_on: ["03-01", "03-02", "03-03", "03-05"]
files_modified:
  - src/pages/LandingPage.tsx
  - src/pages/Dashboard.tsx
  - src/pages/TestPage.tsx
  - src/pages/StudyGuidePage.tsx
  - src/pages/HistoryPage.tsx
  - src/pages/AuthPage.tsx
autonomous: true

must_haves:
  truths:
    - "All pages use mobile-first responsive layouts"
    - "Touch targets are 44px minimum"
    - "Cards stack on mobile, grid on desktop"
    - "Navigation collapses properly on mobile"
    - "Page headers use bilingual headings"
  artifacts:
    - path: "src/pages/Dashboard.tsx"
      provides: "Mobile-responsive dashboard with staggered cards"
      contains: "BilingualHeading"
    - path: "src/pages/StudyGuidePage.tsx"
      provides: "Mobile-optimized study guide with flashcard stack"
      contains: "FlashcardStack"
    - path: "src/pages/TestPage.tsx"
      provides: "Mobile-friendly test UI with circular timer"
      contains: "CircularTimer"
  key_links:
    - from: "src/pages/Dashboard.tsx"
      to: "src/components/bilingual/BilingualHeading.tsx"
      via: "Page heading"
      pattern: "BilingualHeading"
    - from: "src/pages/TestPage.tsx"
      to: "src/components/test/CircularTimer.tsx"
      via: "Timer display"
      pattern: "CircularTimer"
---

<objective>
Apply Phase 3 UI components to all main pages: mobile-first responsive layouts, bilingual headings, staggered animations, and the new test components.

Purpose: This is the integration plan that brings all the new components together into the actual pages. Users will experience the full polished UI across the entire app.

Output: All main pages updated with new UI components, responsive layouts, and bilingual patterns.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03-ui-ux-bilingual-polish/03-CONTEXT.md
@.planning/phases/03-ui-ux-bilingual-polish/03-05-SUMMARY.md
@.planning/phases/03-ui-ux-bilingual-polish/03-06-SUMMARY.md
@.planning/phases/03-ui-ux-bilingual-polish/03-07-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Dashboard with new components</name>
  <files>
    src/pages/Dashboard.tsx
  </files>
  <action>
Update `src/pages/Dashboard.tsx` to use Phase 3 components:

Key changes:

1. Import the new components:
```typescript
import { BilingualHeading, SectionHeading } from '@/components/bilingual/BilingualHeading';
import { BilingualButton } from '@/components/bilingual/BilingualButton';
import { Card, CardHeader, CardContent } from '@/components/ui/Card';
import { Progress } from '@/components/ui/Progress';
import { StaggeredGrid, StaggeredItem, FadeIn } from '@/components/animations/StaggeredList';
import { strings } from '@/lib/i18n/strings';
```

2. Update header to use BilingualHeading:
```tsx
<header className="mb-8">
  <FadeIn>
    <BilingualHeading
      text={{
        en: `Welcome back, ${user?.name?.split(' ')[0] ?? 'Learner'}!`,
        my: `ပြန်လာတာကို ကြိုဆိုပါတယ်၊ ${user?.name?.split(' ')[0] ?? 'သင်ယူသူ'}!`,
      }}
      level={1}
      size="2xl"
    />
  </FadeIn>
</header>
```

3. Use StaggeredGrid for the detail tiles:
```tsx
<StaggeredGrid columns={3} className="mb-8">
  {detailTiles.map((tile, index) => (
    <Card key={index} interactive elevated>
      <Link to={tile.to}>
        <CardHeader>
          <BilingualHeading
            text={{ en: tile.title, my: tile.titleMy }}
            level={3}
            size="md"
          />
        </CardHeader>
        <CardContent>
          <p className="text-2xl font-bold text-foreground">{tile.stat}</p>
          <p className="text-muted-foreground text-sm">{tile.description}</p>
        </CardContent>
      </Link>
    </Card>
  ))}
</StaggeredGrid>
```

4. Add `data-tour="dashboard"` attribute to main content for onboarding.

5. Use BilingualButton for the "Start Test" CTA:
```tsx
<BilingualButton
  label={strings.actions.startTest}
  variant="primary"
  size="lg"
  onClick={() => navigate('/test')}
/>
```

6. Use Progress component for accuracy display with bilingual label:
```tsx
<ProgressWithLabel
  value={accuracy}
  labelEn="Overall Accuracy"
  labelMy="စုစုပေါင်းမှန်ကန်မှု"
  variant="success"
/>
```

7. Ensure mobile-responsive layout:
- Cards stack vertically on mobile (grid-cols-1)
- Cards use 2 columns on sm (sm:grid-cols-2)
- Cards use 3 columns on lg (lg:grid-cols-3)
- Touch targets are at least 44px
  </action>
  <verify>
View Dashboard on mobile viewport (375px).
Verify cards stack vertically.
View on desktop - cards should be in 3-column grid.
Verify BilingualHeading shows EN on top, MY below.
  </verify>
  <done>
Dashboard uses Phase 3 components with mobile-first layout.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update StudyGuidePage with flashcard components</name>
  <files>
    src/pages/StudyGuidePage.tsx
  </files>
  <action>
Update `src/pages/StudyGuidePage.tsx` to use Phase 3 components:

Key changes:

1. Import new components:
```typescript
import { BilingualHeading, PageTitle } from '@/components/bilingual/BilingualHeading';
import { Card } from '@/components/ui/Card';
import { StaggeredList, StaggeredItem } from '@/components/animations/StaggeredList';
import { Flashcard3D } from '@/components/study/Flashcard3D';
import { FlashcardStack } from '@/components/study/FlashcardStack';
import { strings } from '@/lib/i18n/strings';
```

2. Update page header:
```tsx
<PageTitle text={strings.study.studyGuide} />
```

Where `strings.study.studyGuide` would be added as:
```typescript
studyGuide: { en: 'Study Guide', my: 'လေ့လာမှုအညွှန်း' },
```

3. Add `data-tour="study-guide"` for onboarding.

4. Replace the existing flashcard rendering with FlashcardStack when on "cards" view:
```tsx
{location.hash === '#cards' ? (
  <FlashcardStack
    questions={filteredQuestions}
    onIndexChange={(index) => console.log('Card index:', index)}
  />
) : (
  // Category list view
  <StaggeredList className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
    {categories.map((cat) => (
      <StaggeredItem key={cat}>
        <Card interactive onClick={() => handleCategoryChange(cat)}>
          {/* Category card content */}
        </Card>
      </StaggeredItem>
    ))}
  </StaggeredList>
)}
```

5. Use StaggeredList for category cards with staggered entrance.

6. Mobile-first grid layout:
- 1 column on mobile
- 2 columns on sm
- 3 columns on lg

7. Add bilingual category intros per CONTEXT.md:
```tsx
<p className="text-muted-foreground mb-4">
  Tap a category to start studying. Every card you review builds your confidence!
  <span className="block font-myanmar mt-1">
    လေ့လာရန် အမျိုးအစားတစ်ခုကို ရွေးပါ။ သင်ကြည့်တဲ့ကတ်တိုင်းက သင့်ကိုယုံကြည်မှုပိုပေးပါတယ်!
  </span>
</p>
```
  </action>
  <verify>
Navigate to Study Guide page.
Verify category cards animate in with stagger.
Click on #cards hash - FlashcardStack should appear.
Swipe through flashcards on mobile.
  </verify>
  <done>
StudyGuidePage uses FlashcardStack and staggered animations.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update TestPage with new test components</name>
  <files>
    src/pages/TestPage.tsx
  </files>
  <action>
Update `src/pages/TestPage.tsx` to use Phase 3 components:

Key changes:

1. Import new components:
```typescript
import { BilingualHeading } from '@/components/bilingual/BilingualHeading';
import { BilingualButton } from '@/components/bilingual/BilingualButton';
import { Card } from '@/components/ui/Card';
import { Progress } from '@/components/ui/Progress';
import { CircularTimer } from '@/components/test/CircularTimer';
import { PreTestScreen } from '@/components/test/PreTestScreen';
import { AnswerFeedback, getAnswerOptionClasses } from '@/components/test/AnswerFeedback';
import { Confetti } from '@/components/celebrations/Confetti';
import { CountUpScore } from '@/components/celebrations/CountUpScore';
import { strings } from '@/lib/i18n/strings';
```

2. Add `data-tour="mock-test"` for onboarding.

3. Add state for pre-test screen:
```typescript
const [showPreTest, setShowPreTest] = useState(true);
const [showConfetti, setShowConfetti] = useState(false);
const [selectedAnswer, setSelectedAnswer] = useState<Answer | null>(null);
const [showFeedback, setShowFeedback] = useState(false);
```

4. Show PreTestScreen before test starts:
```tsx
if (showPreTest) {
  return (
    <div className="page-shell">
      <AppNavigation />
      <PreTestScreen
        questionCount={20}
        durationMinutes={20}
        onReady={() => setShowPreTest(false)}
      />
    </div>
  );
}
```

5. Replace the text-based timer with CircularTimer:
```tsx
<CircularTimer
  duration={TEST_DURATION_SECONDS}
  remainingTime={timeLeft}
  onComplete={() => {
    setIsFinished(true);
    setEndReason('time');
  }}
  allowHide
/>
```

6. Update answer options to use getAnswerOptionClasses:
```tsx
{currentQuestion.answers.map((answer) => (
  <button
    key={answer.text_en}
    onClick={() => handleAnswerSelect(answer)}
    disabled={showFeedback}
    className={getAnswerOptionClasses(
      selectedAnswer === answer,
      showFeedback ? answer.correct : null,
      showFeedback
    )}
  >
    <span className="font-semibold">{answer.text_en}</span>
    <span className="font-myanmar text-muted-foreground">{answer.text_my}</span>
  </button>
))}
```

7. Show AnswerFeedback after selection:
```tsx
<AnswerFeedback
  isCorrect={selectedAnswer?.correct ?? false}
  show={showFeedback}
  correctAnswer={currentQuestion.answers.find(a => a.correct)?.text_en}
  correctAnswerMy={currentQuestion.answers.find(a => a.correct)?.text_my}
/>
```

8. Update test completion screen with CountUpScore and Confetti:
```tsx
{isFinished && (
  <div className="text-center">
    <Confetti
      fire={showConfetti}
      intensity={correctCount >= PASS_THRESHOLD ? 'celebration' : 'burst'}
    />
    <BilingualHeading
      text={strings.test.testComplete}
      level={1}
      size="2xl"
      centered
    />
    <CountUpScore
      score={correctCount}
      total={results.length}
      onComplete={() => setShowConfetti(true)}
    />
    {/* ... rest of results */}
  </div>
)}
```

9. Ensure mobile-responsive answer cards:
- Full width on mobile
- Touch targets at least 44px (py-3 or py-4)
- Adequate spacing between options
  </action>
  <verify>
Navigate to Test page.
Verify PreTestScreen appears first with breathing animation.
Click "I'm Ready" - test starts.
Timer shows circular arc with hide/show toggle.
Answer wrong - verify orange feedback (not red).
Complete test - verify confetti and count-up score.
  </verify>
  <done>
TestPage uses CircularTimer, PreTestScreen, AnswerFeedback, and celebration components.
  </done>
</task>

</tasks>

<verification>
1. `pnpm run build` completes without errors
2. Dashboard cards stack on mobile, grid on desktop
3. Study Guide flashcards use 3D flip animation
4. Test page has pre-test calming screen
5. Test timer is circular with color thresholds
6. Wrong answers show orange (not red)
7. Test completion shows confetti and count-up
8. All pages have bilingual headings
9. Touch targets are 44px minimum
</verification>

<success_criteria>
- Dashboard uses Card, BilingualHeading, StaggeredGrid
- Study Guide uses FlashcardStack for cards view
- Test page uses CircularTimer, PreTestScreen, AnswerFeedback
- Test completion has Confetti and CountUpScore
- Mobile layouts work on 375px viewport
- Touch targets are at least 44px
- data-tour attributes added for onboarding
- All pages compile without TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-ui-ux-bilingual-polish/03-08-SUMMARY.md`
</output>
