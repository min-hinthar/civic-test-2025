---
phase: 45-content-enrichment
plan: 02
type: execute
wave: 2
depends_on: [01]
files_modified:
  - src/components/explanations/ExplanationCard.tsx
  - src/components/quiz/FeedbackPanel.tsx
  - src/components/quiz/TrickyBadge.tsx
  - src/components/drill/StudyTipCard.tsx
  - src/constants/studyTips.ts
  - src/lib/i18n/strings.ts
autonomous: true
requirements: [CONT-05, CONT-06, CONT-07]

must_haves:
  truths:
    - "Mnemonic section in ExplanationCard uses Lightbulb icon with amber left border"
    - "Mnemonic section in FeedbackPanel's ExplanationSection uses Lightbulb icon with amber left border"
    - "TrickyBadge component renders amber pill with AlertTriangle icon and bilingual text"
    - "StudyTipCard component renders dismissible card with bilingual tip and permanent localStorage dismissal"
    - "7 category study tips exist with actionable bilingual content"
  artifacts:
    - path: "src/components/quiz/TrickyBadge.tsx"
      provides: "Tricky question badge component"
      exports: ["TrickyBadge"]
    - path: "src/components/drill/StudyTipCard.tsx"
      provides: "Dismissible study tip card component"
      exports: ["StudyTipCard"]
    - path: "src/constants/studyTips.ts"
      provides: "7 category study tip definitions"
      exports: ["STUDY_TIPS"]
  key_links:
    - from: "src/components/explanations/ExplanationCard.tsx"
      to: "lucide-react"
      via: "Lightbulb import (replaces Brain for mnemonic)"
      pattern: "Lightbulb"
    - from: "src/components/drill/StudyTipCard.tsx"
      to: "localStorage"
      via: "dismissed-study-tips key"
      pattern: "dismissed-study-tips"
---

<objective>
Create UI components for content enrichment: update mnemonic visual treatment, create TrickyBadge, create StudyTipCard with dismissal logic, and define study tip content.

Purpose: Build the UI pieces (CONT-05, CONT-06, CONT-07) needed before wiring in Plan 03.
Output: Updated ExplanationCard/FeedbackPanel mnemonic section, new TrickyBadge, new StudyTipCard, study tip constants
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/phases/45-content-enrichment/45-CONTEXT.md
@.planning/phases/45-content-enrichment/45-RESEARCH.md
@.planning/phases/45-content-enrichment/45-01-SUMMARY.md

@src/components/explanations/ExplanationCard.tsx
@src/components/quiz/FeedbackPanel.tsx
@src/components/drill/DrillBadge.tsx
@src/lib/i18n/strings.ts

<interfaces>
<!-- Existing patterns the executor must follow -->
From src/components/drill/DrillBadge.tsx (pill badge pattern):
```typescript
export function DrillBadge({ showBurmese = false }: DrillBadgeProps) {
  return (
    <span className="inline-flex items-center gap-1.5 rounded-full bg-orange-500/15 px-3 py-1 text-xs font-semibold text-orange-600 dark:text-orange-400">
      <Target className="h-3.5 w-3.5" />
      Drill Mode
      {showBurmese && <span className="font-myanmar">...</span>}
    </span>
  );
}
```

From src/components/explanations/ExplanationCard.tsx (mnemonic section, lines 169-193):
```typescript
{hasMnemonic && (
  <div className="rounded-xl border border-primary-500/30 bg-primary-subtle p-3">
    <div className="flex items-start gap-2">
      <Brain className="mt-0.5 h-4 w-4 shrink-0 text-primary" />
      // ... bilingual content ...
    </div>
  </div>
)}
```

From src/components/quiz/FeedbackPanel.tsx (ExplanationSection, lines 149-163):
```typescript
{explanation.mnemonic_en && (
  <div>
    <p className="text-xs font-semibold uppercase tracking-wide text-muted-foreground">
      {explStrings.memoryTip.en}
    </p>
    <p className="mt-1 text-sm text-foreground">{explanation.mnemonic_en}</p>
  </div>
)}
```

From src/lib/i18n/strings.ts (bilingual string pattern):
```typescript
explanations: {
  memoryTip: { en: 'Memory Tip', my: 'မှတ်ဉာဏ်အကူ' },
  commonMistake: { en: 'Common Mistake', my: 'အဖြစ်များတဲ့အမှား' },
  // ...
}
```

Categories for study tips (7 sub-categories):
- Principles of American Democracy (12 questions in GOV-P)
- System of Government (35 questions in GOV-S)
- Rights and Responsibilities (10 questions in RR)
- American History: Colonial Period and Independence (13 questions in HIST-C)
- American History: 1800s (7 questions in HIST-1)
- Recent American History (10 questions in HIST-R)
- Civics: Symbols and Holidays (13 questions in SYM)
Note: uscis-2025-additions (28 questions) span across these categories.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update mnemonic visual treatment and create TrickyBadge component</name>
  <files>src/components/explanations/ExplanationCard.tsx, src/components/quiz/FeedbackPanel.tsx, src/components/quiz/TrickyBadge.tsx, src/lib/i18n/strings.ts</files>
  <action>
**1. Update ExplanationCard mnemonic section (lines 169-193):**

Replace the current Brain icon + primary border mnemonic block with Lightbulb icon + amber accent left border:

```typescript
// Change import: remove Brain, ensure Lightbulb is imported
import { Lightbulb, ChevronDown, AlertTriangle, BookOpen, Sparkles } from 'lucide-react';
// Remove Brain from imports
```

Replace the mnemonic div (the block starting with `{hasMnemonic && (`) with:
```typescript
{hasMnemonic && (
  <div className="rounded-xl border-l-4 border-amber-500 bg-amber-500/10 dark:bg-amber-500/15 p-3">
    <div className="flex items-start gap-2">
      <Lightbulb className="mt-0.5 h-4 w-4 shrink-0 text-amber-600 dark:text-amber-400" />
      <div className="flex-1">
        <p className="text-xs font-semibold text-foreground">
          {strings.explanations.memoryTip.en}
        </p>
        {showBurmese && (
          <p className="font-myanmar text-xs text-muted-foreground">
            {strings.explanations.memoryTip.my}
          </p>
        )}
        <p className="mt-1.5 text-xs text-foreground leading-relaxed">
          {explanation.mnemonic_en}
        </p>
        {showBurmese && explanation.mnemonic_my && (
          <p className="mt-0.5 font-myanmar text-xs text-muted-foreground leading-relaxed">
            {explanation.mnemonic_my}
          </p>
        )}
      </div>
    </div>
  </div>
)}
```

**2. Update FeedbackPanel ExplanationSection mnemonic (lines 149-163):**

In the ExplanationSection function inside FeedbackPanel.tsx, update the mnemonic block to match:

```typescript
{explanation.mnemonic_en && (
  <div className="rounded-xl border-l-4 border-amber-500 bg-amber-500/10 dark:bg-amber-500/15 p-3">
    <div className="flex items-start gap-2">
      <Lightbulb className="mt-0.5 h-4 w-4 shrink-0 text-amber-600 dark:text-amber-400" />
      <div className="flex-1">
        <p className="text-xs font-semibold text-foreground">
          {explStrings.memoryTip.en}
          {showBurmese && <span className="ml-1 font-myanmar">{explStrings.memoryTip.my}</span>}
        </p>
        <p className="mt-1 text-sm text-foreground">{explanation.mnemonic_en}</p>
        {showBurmese && explanation.mnemonic_my && (
          <p className="mt-0.5 font-myanmar text-sm text-muted-foreground">
            {explanation.mnemonic_my}
          </p>
        )}
      </div>
    </div>
  </div>
)}
```

Add `Lightbulb` to the FeedbackPanel imports from lucide-react.

**3. Create TrickyBadge component:**

Create `src/components/quiz/TrickyBadge.tsx`:
```typescript
'use client';

import { AlertTriangle } from 'lucide-react';
import { strings } from '@/lib/i18n/strings';

interface TrickyBadgeProps {
  showBurmese?: boolean;
}

/**
 * Small pill badge indicating a tricky/commonly confused question.
 * Amber/warning color with AlertTriangle icon.
 * Follows DrillBadge/ModeBadge pattern.
 */
export function TrickyBadge({ showBurmese = false }: TrickyBadgeProps) {
  return (
    <span className="inline-flex items-center gap-1 rounded-full bg-amber-500/15 px-2.5 py-0.5 text-xs font-semibold text-amber-600 dark:text-amber-400">
      <AlertTriangle className="h-3 w-3" />
      {strings.quiz.trickyQuestion.en}
      {showBurmese && (
        <span className="font-myanmar ml-0.5">{strings.quiz.trickyQuestion.my}</span>
      )}
    </span>
  );
}
```

**4. Add i18n strings:**

In `src/lib/i18n/strings.ts`, add to the `strings` object:

Under the existing `explanations` section or in a `quiz` section (whichever is more appropriate for organization), add:
```typescript
quiz: {
  trickyQuestion: { en: 'Tricky Question', my: 'ခက်ခဲသောမေးခွန်း' },
},
drill: {
  studyTip: { en: 'Study Tip', my: 'လေ့လာရေးအကြံပြု' },
},
```

If a `quiz` section already exists in strings, merge into it. If not, add it as a new top-level key.
  </action>
  <verify>
    <automated>pnpm typecheck</automated>
    No type errors. Lightbulb imported (Brain removed from ExplanationCard). TrickyBadge file exists and exports correctly.
  </verify>
  <done>ExplanationCard mnemonic section uses Lightbulb + amber left border. FeedbackPanel ExplanationSection matches. TrickyBadge component created. i18n strings added for tricky badge and study tip labels.</done>
</task>

<task type="auto">
  <name>Task 2: Create StudyTipCard component and study tip content data</name>
  <files>src/components/drill/StudyTipCard.tsx, src/constants/studyTips.ts</files>
  <action>
**1. Create study tip content data:**

Create `src/constants/studyTips.ts`:
```typescript
import type { Category } from '@/types';

export interface StudyTip {
  category: Category;
  tipEn: string;
  tipMy: string;
}

/**
 * One actionable study tip per category.
 * Shown as a dismissible card at the top of category drill.
 * Tips are strategic ("focus on X") not motivational ("you can do it!").
 */
export const STUDY_TIPS: StudyTip[] = [
  {
    category: 'Principles of American Democracy',
    tipEn: 'Focus on the Constitution — what it does, what the first 3 words mean, and how amendments work. These 12 questions test core concepts.',
    tipMy: 'ဖွဲ့စည်းပုံအခြေခံဥပဒေအပေါ် အာရုံစိုက်ပါ — ၎င်းက ဘာလုပ်သလဲ၊ ပထမစကားလုံး ၃ လုံးက ဘာကိုဆိုလိုသလဲ၊ ပြင်ဆင်ချက်များ ဘယ်လိုအလုပ်လုပ်သလဲ။ ဒီမေးခွန်း ၁၂ ခုက အဓိကအယူအဆများကို စမ်းသပ်ပါတယ်။',
  },
  {
    category: 'System of Government',
    tipEn: 'This is the biggest category (35 questions). Master the 3 branches first — who leads each, how many members, and what each branch does. Then tackle checks and balances.',
    tipMy: 'ဒါက အကြီးဆုံးအမျိုးအစား (မေးခွန်း ၃၅ ခု) ဖြစ်ပါတယ်။ အစိုးရအဖွဲ့ ၃ ခုကို အရင်သိပါ — တစ်ခုစီကို ဘယ်သူဦးဆောင်သလဲ၊ အဖွဲ့ဝင်ဘယ်နှစ်ယောက်ရှိသလဲ၊ တစ်ခုစီက ဘာလုပ်သလဲ။',
  },
  {
    category: 'Rights and Responsibilities',
    tipEn: 'Know the difference between rights for everyone vs. citizens only. The First Amendment freedoms (speech, religion, press, assembly, petition) come up often.',
    tipMy: 'လူတိုင်းအတွက် အခွင့်အရေးနှင့် နိုင်ငံသားများသာရသော အခွင့်အရေး ခြားနားချက်ကို သိပါ။ ပထမပြင်ဆင်ချက် လွတ်လပ်ခွင့်များ (စကားပြော၊ ဘာသာ၊ သတင်းစာ၊ စုဝေး၊ တောင်းဆို) မကြာခဏမေးလေ့ရှိတယ်။',
  },
  {
    category: 'American History: Colonial Period and Independence',
    tipEn: 'Remember the sequence: colonists came for freedom → problems with Britain → Declaration of Independence (1776) → Constitution. Key names: Benjamin Franklin, Thomas Jefferson, George Washington.',
    tipMy: 'အစဉ်အတိုင်း မှတ်ပါ: ကိုလိုနီသားများ လွတ်လပ်ခွင့်အတွက် လာခဲ့ → ဗြိတိန်နှင့် ပြဿနာများ → လွတ်လပ်ရေးကြေညာစာ (၁၇၇၆) → ဖွဲ့စည်းပုံ။ အဓိကလူများ: Benjamin Franklin, Thomas Jefferson, George Washington.',
  },
  {
    category: 'American History: 1800s',
    tipEn: 'The 1800s questions center on the Civil War. Know: why it happened (slavery), who was President (Lincoln), what the Emancipation Proclamation did, and the 13th/14th/15th Amendments.',
    tipMy: '၁၈၀၀ ခုနှစ်များ မေးခွန်းများက ပြည်တွင်းစစ်ကို အဓိကထားပါတယ်။ ဘာကြောင့်ဖြစ်သလဲ (ကျွန်စနစ်)၊ သမ္မတဘယ်သူ (Lincoln)၊ ကျွန်စနစ်ဖျက်သိမ်းကြေညာစာက ဘာလုပ်ခဲ့သလဲ၊ ပြင်ဆင်ချက် ၁၃/၁၄/၁၅ ကို သိပါ။',
  },
  {
    category: 'Recent American History and Other Important Historical Information',
    tipEn: 'Focus on the World Wars (who were enemies, who were allies), the Cold War (communism concern), the Civil Rights Movement (MLK Jr.), and September 11, 2001.',
    tipMy: 'ကမ္ဘာစစ်များ (ရန်သူ၊ မဟာမိတ်)၊ စစ်အေး (ကွန်မြူနစ်စိုးရိမ်မှု)၊ နိုင်ငံသားအခွင့်အရေးလှုပ်ရှားမှု (MLK Jr.)၊ စက်တင်ဘာ ၁၁ ၂၀၀၁ အပေါ် အာရုံစိုက်ပါ။',
  },
  {
    category: 'Civics: Symbols and Holidays',
    tipEn: 'Know the flag (13 stripes = colonies, 50 stars = states), the national anthem, and the major holidays. Independence Day (July 4th) and Presidents\' Day are frequently tested.',
    tipMy: 'အလံ (အစင်း ၁၃ = ကိုလိုနီများ၊ ကြယ် ၅၀ = ပြည်နယ်များ)၊ နိုင်ငံတော်သီချင်း၊ အဓိကပိတ်ရက်များကို သိပါ။ လွတ်လပ်ရေးနေ့ (ဇူလိုင် ၄) နှင့် သမ္မတများနေ့ မကြာခဏမေးလေ့ရှိတယ်။',
  },
];

/**
 * Look up study tip by category name.
 */
export function getStudyTip(category: Category): StudyTip | undefined {
  return STUDY_TIPS.find(tip => tip.category === category);
}
```

**2. Create StudyTipCard component:**

Create `src/components/drill/StudyTipCard.tsx`:
```typescript
'use client';

import { useState } from 'react';
import { GraduationCap, X } from 'lucide-react';
import { clsx } from 'clsx';
import { useLanguage } from '@/contexts/LanguageContext';
import { strings } from '@/lib/i18n/strings';

const STORAGE_KEY = 'dismissed-study-tips';

function isDismissed(category: string): boolean {
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (!raw) return false;
    const dismissed: string[] = JSON.parse(raw);
    return dismissed.includes(category);
  } catch {
    return false;
  }
}

function dismissTip(category: string): void {
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    const dismissed: string[] = raw ? JSON.parse(raw) : [];
    if (!dismissed.includes(category)) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify([...dismissed, category]));
    }
  } catch {
    // localStorage not available — fail silently
  }
}

interface StudyTipCardProps {
  /** Category name (used as key for dismissal) */
  category: string;
  /** English tip text */
  tipEn: string;
  /** Burmese tip text */
  tipMy: string;
  /** Additional class names */
  className?: string;
}

/**
 * Dismissible study tip card shown at the top of category drill.
 *
 * Features:
 * - GraduationCap icon with bilingual tip content
 * - Permanent dismiss: once dismissed, never shows again for this category
 * - Stored in localStorage under 'dismissed-study-tips'
 * - Respects bilingual language toggle
 */
export function StudyTipCard({ category, tipEn, tipMy, className }: StudyTipCardProps) {
  const [visible, setVisible] = useState(() => !isDismissed(category));
  const { showBurmese } = useLanguage();

  if (!visible) return null;

  return (
    <div
      className={clsx(
        'rounded-xl border border-primary/20 bg-primary-subtle p-3',
        className
      )}
      role="note"
      aria-label={strings.drill.studyTip.en}
    >
      <div className="flex items-start gap-2.5">
        <GraduationCap className="mt-0.5 h-4 w-4 shrink-0 text-primary" />
        <div className="flex-1 min-w-0">
          <p className="text-xs font-semibold text-foreground mb-1">
            {strings.drill.studyTip.en}
            {showBurmese && (
              <span className="font-myanmar ml-1 font-normal text-muted-foreground">
                {strings.drill.studyTip.my}
              </span>
            )}
          </p>
          <p className="text-sm text-foreground leading-relaxed">{tipEn}</p>
          {showBurmese && (
            <p className="mt-1 font-myanmar text-sm text-muted-foreground leading-relaxed">
              {tipMy}
            </p>
          )}
        </div>
        <button
          type="button"
          onClick={() => {
            dismissTip(category);
            setVisible(false);
          }}
          className={clsx(
            'shrink-0 p-1.5 rounded-lg',
            'hover:bg-muted/50 transition-colors',
            'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary'
          )}
          aria-label="Dismiss study tip"
        >
          <X className="h-4 w-4 text-muted-foreground" />
        </button>
      </div>
    </div>
  );
}
```
  </action>
  <verify>
    <automated>pnpm typecheck</automated>
    No type errors. StudyTipCard.tsx and studyTips.ts exist and export correctly.
  </verify>
  <done>StudyTipCard component renders dismissible bilingual study tip with permanent localStorage dismissal. 7 category study tips defined in constants. TrickyBadge and mnemonic treatment ready for wiring.</done>
</task>

</tasks>

<verification>
- `pnpm typecheck` — no type errors
- `pnpm lint` — no lint errors
- ExplanationCard mnemonic uses Lightbulb + amber border-l-4 (not Brain + primary border)
- FeedbackPanel ExplanationSection mnemonic matches new amber treatment
- TrickyBadge is a pill badge with AlertTriangle + amber colors
- StudyTipCard dismisses permanently via localStorage
- 7 study tips defined with bilingual content
</verification>

<success_criteria>
- Mnemonic visual: Lightbulb icon, amber left border, amber background
- TrickyBadge: amber pill, AlertTriangle icon, bilingual text
- StudyTipCard: dismissible, localStorage persistent, bilingual
- 7 study tips: one per category, actionable strategy content
- All type checks pass
</success_criteria>

<output>
After completion, create `.planning/phases/45-content-enrichment/45-02-SUMMARY.md`
</output>
