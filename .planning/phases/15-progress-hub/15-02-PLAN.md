---
phase: 15-progress-hub
plan: 02
type: execute
wave: 2
depends_on: ["15-01"]
files_modified:
  - src/components/hub/OverviewTab.tsx
  - src/components/hub/ReadinessRing.tsx
  - src/components/hub/StatCard.tsx
  - src/components/hub/CategoryDonut.tsx
  - src/components/hub/SubcategoryBar.tsx
  - src/components/hub/WelcomeState.tsx
  - src/components/hub/HubSkeleton.tsx
  - src/pages/HubPage.tsx
autonomous: true
frontend_design: true

must_haves:
  truths:
    - "Overview tab shows a readiness ring with gradient fill (red through amber to green) and percentage inside"
    - "4 stat cards display Mastery %, Streak, SRS Due, and Questions Practiced with tappable actions"
    - "3 category sections show donut charts and subcategory progress bars with collapsible detail"
    - "Brand new user sees a welcome state with guided first steps instead of stats"
    - "Loading state shows skeleton loaders matching widget shapes"
    - "Charts animate fill from 0 on first render"
    - "Page entry uses stagger children animation"
  artifacts:
    - path: "src/components/hub/OverviewTab.tsx"
      provides: "Overview tab content with hero ring, stats, and categories"
    - path: "src/components/hub/ReadinessRing.tsx"
      provides: "Gradient SVG ring with inner glow and motivational text"
    - path: "src/components/hub/StatCard.tsx"
      provides: "Tappable stat card with icon and value"
    - path: "src/components/hub/CategoryDonut.tsx"
      provides: "Gradient donut chart per USCIS category"
    - path: "src/components/hub/SubcategoryBar.tsx"
      provides: "Animated striped progress bar"
    - path: "src/components/hub/WelcomeState.tsx"
      provides: "Welcome state for brand new users"
    - path: "src/components/hub/HubSkeleton.tsx"
      provides: "Skeleton loaders for Hub tabs"
  key_links:
    - from: "src/components/hub/OverviewTab.tsx"
      to: "src/hooks/useCategoryMastery"
      via: "Props passed from HubPage (lifted data fetching)"
    - from: "src/components/hub/StatCard.tsx"
      to: "useNavigate"
      via: "onClick navigation to respective destinations"
    - from: "src/components/hub/OverviewTab.tsx"
      to: "src/components/hub/GlassCard.tsx"
      via: "Import for all card containers"
---

<objective>
Build the Overview tab with readiness ring, stat cards, category mastery donut charts, subcategory progress bars, welcome state, and skeleton loaders.

Purpose: The Overview tab is the Hub's hero view — users land here by default and see their overall progress at a glance. It includes the most visually complex new widgets (readiness ring, donut charts) and must handle the full spectrum from brand-new user to power user.

Output: Fully functional Overview tab with all widgets, animations, empty/loading/error states.

**NOTE**: This plan contains visually rich UI components. The executor should use the `/frontend-design` skill for the ReadinessRing, StatCard, CategoryDonut, and WelcomeState components to ensure premium visual quality.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/15-progress-hub/15-RESEARCH.md
@.planning/phases/15-progress-hub/15-01-SUMMARY.md
@src/pages/ProgressPage.tsx
@src/hooks/useCategoryMastery.ts
@src/hooks/useStreak.ts
@src/hooks/useSRSWidget.ts
@src/components/progress/CategoryRing.tsx
@src/components/hub/GlassCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ReadinessRing, StatCard, CategoryDonut, SubcategoryBar, WelcomeState, and HubSkeleton components</name>
  <files>
    src/components/hub/ReadinessRing.tsx
    src/components/hub/StatCard.tsx
    src/components/hub/CategoryDonut.tsx
    src/components/hub/SubcategoryBar.tsx
    src/components/hub/WelcomeState.tsx
    src/components/hub/HubSkeleton.tsx
  </files>
  <action>
**ReadinessRing (`src/components/hub/ReadinessRing.tsx`):**
- Custom SVG ring (extend the existing `CategoryRing` pattern from `src/components/progress/CategoryRing.tsx`)
- Props: `percentage` (number 0-100), `size` (default 180), `strokeWidth` (default 14)
- Gradient fill for stroke using SVG `linearGradient` (red → amber → green stops)
- Inner glow: use a blurred radial gradient `div` behind the ring. Color matches gradient position:
  - percentage < 40: red glow `hsl(0, 80%, 55%)`
  - percentage 40-70: amber glow `hsl(45, 90%, 55%)`
  - percentage > 70: green glow `hsl(145, 70%, 45%)`
- Inside the ring: percentage number (large, bold, tabular-nums) + bilingual motivational text
- 5 motivational tiers:
  - 0-20%: "Just Starting" / "စတင်နေပါသည်"
  - 20-40%: "Building" / "တည်ဆောက်နေပါသည်"
  - 40-60%: "Making Progress" / "တိုးတက်နေပါသည်"
  - 60-80%: "Almost There" / "အဆင်သင့်ဖြစ်လုနီးပါပြီ"
  - 80-100%: "Test Ready!" / "စာမေးပွဲ အဆင်သင့်!"
- Animate fill from 0 on first render using `motion.circle` with `pathLength` animation
- Use `useReducedMotion` from motion/react to skip animation when reduced motion is preferred
- Use `useLanguage` hook for showing Burmese text

**StatCard (`src/components/hub/StatCard.tsx`):**
- Props: `icon` (LucideIcon), `label` (bilingual {en, my}), `value` (string|number), `onClick` (optional), `badge` (optional string for "Review Now" button style)
- Uses GlassCard as wrapper
- Tappable when onClick is provided (cursor-pointer, hover effect)
- Layout: icon at top, value large and bold, label below in muted
- Bilingual label rendering using `useLanguage`
- Mobile: designed for 2x2 grid layout (min-w-0, flex-1)

**CategoryDonut (`src/components/hub/CategoryDonut.tsx`):**
- Props: `percentage` (number), `size` (default 80), `strokeWidth` (default 7), `label` (bilingual), `color` (string — not used for fill, gradient is used instead)
- Gradient-filled ring matching readiness ring spectrum (red → green based on percentage value)
- NOT using categorical colors (blue/amber/emerald) for the ring fill — use mastery-level gradient
- Use a simpler gradient approach: `stroke` color interpolated from red→amber→green based on percentage
- Percentage number inside the ring
- Animate fill from 0 on first render using motion/react

**SubcategoryBar (`src/components/hub/SubcategoryBar.tsx`):**
- Props: `percentage` (number), `label` (bilingual {en, my}), `color` (string for bar color), `onClick` (optional — tapping weak subcategory navigates to study guide)
- Animated striped/candy-bar pattern using the `stripe-move` keyframes from globals.css
- Bar fill color uses mastery gradient (red → amber → green based on percentage)
- Animate width from 0 on first render
- Show percentage value on the right
- Bilingual label with `useLanguage`

**WelcomeState (`src/components/hub/WelcomeState.tsx`):**
- Shown when user has 0% mastery (practicedQuestionIds.size === 0)
- Replaces the stats area (readiness ring + stat cards + categories) with guided first steps
- Encouraging welcome message: "Welcome to Your Progress Hub!" / Burmese equivalent
- 3-4 guided steps as mini cards:
  1. "Start studying" → link to /study
  2. "Take a practice quiz" → link to /practice
  3. "Try a mock test" → link to /test
- Each step has an icon, bilingual label, and is tappable
- Uses GlassCard for each step card
- Warm, encouraging tone

**HubSkeleton (`src/components/hub/HubSkeleton.tsx`):**
- Provides skeleton loaders for each tab type: `OverviewSkeleton`, `HistorySkeleton`, `AchievementsSkeleton`
- Use existing `Skeleton` component from `@/components/ui/Skeleton` if it exists, otherwise create shimmer rectangles
- Match widget shapes: ring placeholder (circle), stat card placeholders (rectangles), list item placeholders
- Export named: `OverviewSkeleton`, `HistorySkeleton`, `AchievementsSkeleton`
  </action>
  <verify>
Run `npx tsc --noEmit` to verify no type errors across all 6 new files.
  </verify>
  <done>All 6 widget components render correctly with proper types, animations, and bilingual support. Each component handles its edge cases (0%, 100%, reduced motion).</done>
</task>

<task type="auto">
  <name>Task 2: Assemble OverviewTab and wire into HubPage</name>
  <files>
    src/components/hub/OverviewTab.tsx
    src/pages/HubPage.tsx
  </files>
  <action>
**OverviewTab (`src/components/hub/OverviewTab.tsx`):**
- Props: receive all data from HubPage (lifted data fetching pattern per research Pitfall 2):
  - `overallMastery` (number)
  - `categoryMasteries` (Record)
  - `subCategoryMasteries` (Record)
  - `currentStreak` (number)
  - `srsDueCount` (number)
  - `practicedCount` (number)
  - `totalQuestions` (number)
  - `isLoading` (boolean)
  - `error` (optional)
- If `isLoading`, render `OverviewSkeleton`
- If brand new user (practicedCount === 0), render `WelcomeState` instead of stats
- Otherwise render:

**Hero section:**
- ReadinessRing (medium size, centered) with `overallMastery` percentage
- Page entry: stagger children animation using `StaggeredList` / `StaggeredItem` from existing animation components

**Stat cards section (below hero):**
- 4 cards in a responsive grid: 2x2 on mobile (`grid grid-cols-2 gap-3`), 4-across on desktop (`sm:grid-cols-4`)
- Cards:
  1. **Mastery %** — value: `{overallMastery}%`, icon: TrendingUp, onClick: scroll to categories section below
  2. **Streak** — value: `{currentStreak}` with flame icon (Flame from lucide), onClick: navigate to `/hub/achievements` (streak shown there)
  3. **SRS Due** — value: `{srsDueCount}`, icon: BookOpen, badge: "Review Now" button when dueCount > 0, onClick: navigate to `/study#review`
  4. **Questions Practiced** — value: `{practicedCount}/{totalQuestions}`, icon: CheckCircle, onClick: navigate to `/study` (per discretion recommendation)
- Each card uses `StatCard` component with GlassCard wrapper

**Category mastery section:**
- Section header: "Category Mastery" / Burmese bilingual
- 3 category cards for American Government, American History, Integrated Civics (fixed USCIS order)
- Each card uses GlassCard and contains:
  - CategoryDonut (gradient ring showing mastery percentage)
  - Category name (bilingual from USCIS_CATEGORIES)
  - Subcategory progress bars (SubcategoryBar) — visible by default, collapsible
  - Category cards default to expanded (subcategories visible)
  - Collapse toggle with ChevronDown icon
- Tapping a weak subcategory (< 50%?) navigates to `/study?category=${encodeURIComponent(subCategory)}#cards`
- Donut charts and subcategory bars animate fill from 0 on first render

**Error handling:**
- If individual data sources error, show inline error + retry button per widget (not full-page error)

**Wire OverviewTab into HubPage:**
- In `src/pages/HubPage.tsx`, import OverviewTab
- Call data hooks at HubPage level: `useCategoryMastery`, `useStreak`, `useSRSWidget`
- Also load answer history for practiced question count (same pattern as ProgressPage: `useEffect` → `getAnswerHistory()` → count unique questionIds)
- Pass all data as props to OverviewTab
- Replace the overview placeholder `<div>` with `<OverviewTab ... />`
- Keep history and achievements as placeholders for now
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm type safety. Run `npm run build` to confirm build succeeds. Navigate to `/#/hub/overview` and verify the readiness ring, stat cards, and category sections render. Test with no data (brand new user) to see welcome state.
  </verify>
  <done>Overview tab renders the full readiness ring, 4 stat cards, 3 category sections with donut charts and subcategory bars. Brand new user sees welcome state. Loading shows skeletons. All animations work including stagger and chart fills.</done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. Overview tab shows readiness ring with gradient fill and correct motivational tier text
3. Inner glow color matches gradient position (red glow at low %, green at high %)
4. 4 stat cards display correct values and are tappable (navigate to correct destinations)
5. 3 category sections show donut charts with gradient fill
6. Subcategory bars show striped animation pattern
7. Brand new user (0 practiced) sees welcome state with guided steps
8. Loading state shows shimmer skeleton placeholders
9. Stagger animation plays on page entry
10. Charts animate from 0 on first render
</verification>

<success_criteria>
Overview tab is feature-complete with all widgets, animations, edge cases, and data integration.
</success_criteria>

<output>
After completion, create `.planning/phases/15-progress-hub/15-02-SUMMARY.md`
</output>
