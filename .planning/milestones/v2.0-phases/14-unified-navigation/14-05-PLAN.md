---
phase: 14-unified-navigation
plan: 05
type: execute
wave: 4
depends_on: ["14-04"]
files_modified:
  - src/pages/Dashboard.tsx
  - src/pages/TestPage.tsx
  - src/pages/StudyGuidePage.tsx
  - src/pages/InterviewPage.tsx
  - src/pages/PracticePage.tsx
  - src/pages/ProgressPage.tsx
  - src/pages/HistoryPage.tsx
  - src/pages/SocialHubPage.tsx
  - src/pages/SettingsPage.tsx
  - src/pages/LandingPage.tsx
  - src/pages/OpEdPage.tsx
  - src/pages/AuthPage.tsx
  - src/pages/PasswordResetPage.tsx
  - src/pages/PasswordUpdatePage.tsx
autonomous: true

must_haves:
  truths:
    - "No page file imports or renders AppNavigation"
    - "Pages that had locked AppNavigation now use NavigationProvider setLock"
    - "LandingPage and OpEdPage use GlassHeader instead of AppNavigation"
    - "AuthPage, PasswordResetPage, PasswordUpdatePage have no nav component"
    - "All pages compile and lint cleanly"
  artifacts:
    - path: "src/pages/Dashboard.tsx"
      provides: "Dashboard without per-page nav"
    - path: "src/pages/TestPage.tsx"
      provides: "Test page using context-based lock"
    - path: "src/pages/InterviewPage.tsx"
      provides: "Interview page using context-based lock"
    - path: "src/pages/LandingPage.tsx"
      provides: "Landing page with GlassHeader"
    - path: "src/pages/OpEdPage.tsx"
      provides: "OpEd page with GlassHeader"
  key_links:
    - from: "src/pages/TestPage.tsx"
      to: "src/components/navigation/NavigationProvider.tsx"
      via: "useNavigation().setLock() for test lock"
      pattern: "setLock\\("
    - from: "src/pages/InterviewPage.tsx"
      to: "src/components/navigation/NavigationProvider.tsx"
      via: "useNavigation().setLock() for interview lock"
      pattern: "setLock\\("
    - from: "src/pages/LandingPage.tsx"
      to: "src/components/navigation/GlassHeader.tsx"
      via: "GlassHeader component render"
      pattern: "<GlassHeader"
---

<objective>
Remove AppNavigation from all 14 page files and migrate lock behavior to NavigationProvider context. This is the bulk mechanical refactor that eliminates the per-page nav import pattern.

Purpose: Complete the architectural migration from per-page nav to shell-level nav. After this plan, AppNavigation.tsx has zero imports and can be deleted.
Output: 14 page files updated, zero references to AppNavigation remaining
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-unified-navigation/14-CONTEXT.md
@.planning/phases/14-unified-navigation/14-04-SUMMARY.md
@src/components/AppNavigation.tsx
@src/components/navigation/NavigationProvider.tsx
@src/components/navigation/GlassHeader.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove AppNavigation from app pages (Dashboard through Settings)</name>
  <files>
    src/pages/Dashboard.tsx
    src/pages/StudyGuidePage.tsx
    src/pages/ProgressPage.tsx
    src/pages/HistoryPage.tsx
    src/pages/SocialHubPage.tsx
    src/pages/SettingsPage.tsx
  </files>
  <action>
For each page listed, apply the same pattern:

1. **Remove the import:** Delete `import AppNavigation from '@/components/AppNavigation';`
2. **Remove the JSX:** Delete all `<AppNavigation />` or `<AppNavigation translucent />` occurrences from the component's return JSX.
3. **Verify layout:** The page layout should still work because the sidebar overlays content (no push layout) and the bottom bar is fixed positioned. Pages that relied on AppNavigation's sticky top bar for spacing should NOT need extra padding -- the sidebar floats over content per user decision.

**Page-specific notes:**

**Dashboard.tsx:**
- Remove `import AppNavigation from '@/components/AppNavigation';`
- Remove `<AppNavigation />` from the JSX (appears once near the top of the return)
- Keep all data-tour attributes on dashboard widgets (they'll be updated in Plan 07 but must remain for now)
- Keep all other imports and functionality unchanged

**StudyGuidePage.tsx:**
- Has 5 instances of `<AppNavigation />` (one per view mode). Remove ALL of them.
- Remove the import line.

**ProgressPage.tsx:**
- Remove import and single `<AppNavigation />` instance.

**HistoryPage.tsx:**
- Remove import and `<AppNavigation />`.
- Note: This page is being redirected to `/hub#history` in AppShell, but the component still exists and may be used directly from ProgressPage/HubPage. Keep the component functional.

**SocialHubPage.tsx:**
- Remove import and `<AppNavigation />`.
- Similar to HistoryPage -- being redirected but component may be reused.

**SettingsPage.tsx:**
- Currently has NO AppNavigation import (uses its own header). No changes needed for AppNavigation removal.
- But verify the header layout is correct -- SettingsPage has its own sticky header with back button. This should continue working fine since the sidebar overlays and doesn't affect the content flow.
  </action>
  <verify>
Run `npx tsc --noEmit` to verify all pages compile. Grep for `AppNavigation` in the modified files to confirm zero references remain: `grep -r "AppNavigation" src/pages/Dashboard.tsx src/pages/StudyGuidePage.tsx src/pages/ProgressPage.tsx src/pages/HistoryPage.tsx src/pages/SocialHubPage.tsx src/pages/SettingsPage.tsx`.
  </verify>
  <done>
Dashboard, StudyGuidePage, ProgressPage, HistoryPage, SocialHubPage, and SettingsPage no longer import or render AppNavigation. All compile cleanly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove AppNavigation from test/interview/practice pages + migrate lock + update public pages</name>
  <files>
    src/pages/TestPage.tsx
    src/pages/InterviewPage.tsx
    src/pages/PracticePage.tsx
    src/pages/LandingPage.tsx
    src/pages/OpEdPage.tsx
    src/pages/AuthPage.tsx
    src/pages/PasswordResetPage.tsx
    src/pages/PasswordUpdatePage.tsx
  </files>
  <action>
**TestPage.tsx -- Lock migration:**
- Remove `import AppNavigation from '@/components/AppNavigation';`
- Remove all `<AppNavigation locked={...} lockMessage={...} />` instances
- Add `import { useNavigation } from '@/components/navigation/NavigationProvider';`
- Call `const { setLock } = useNavigation();`
- When test starts (entering active test state): call `setLock(true, 'Complete or exit the test first')`
- When test ends (results shown, user navigates away, or test is quit): call `setLock(false)`
- Use `useEffect` cleanup to ensure lock is released when component unmounts: `useEffect(() => () => setLock(false), [setLock]);`
- Find where the existing `locked` prop is computed (likely a boolean based on test state) and replace the AppNavigation prop passing with `setLock()` calls at the appropriate state transitions.
- The lock message should be bilingual: pass `'Complete or exit the test first'` -- the NavigationProvider/NavItem handles showing the toast with the bilingual message.

**InterviewPage.tsx -- Lock migration:**
- Same pattern as TestPage: remove AppNavigation, add useNavigation, call setLock(true) when interview session starts, setLock(false) when it ends.
- The existing code passes `locked={phase === 'session'}` to AppNavigation. Replace with:
  - When `phase` changes to `'session'`: `setLock(true, 'Complete or exit the interview first')`
  - When `phase` changes away from `'session'`: `setLock(false)`
  - This can be done with a `useEffect` watching `phase`: `useEffect(() => { setLock(phase === 'session', 'Complete or exit the interview first'); }, [phase, setLock]);`
  - Cleanup on unmount: `useEffect(() => () => setLock(false), [setLock]);`

**PracticePage.tsx -- Lock migration:**
- Same pattern: remove AppNavigation, add useNavigation, migrate lock.
- Check what the existing lock behavior is (it may lock during active practice). Apply the same pattern.

**LandingPage.tsx -- Replace with GlassHeader:**
- Remove `import AppNavigation from '@/components/AppNavigation';`
- Remove `<AppNavigation translucent />` (or similar)
- Add `import { GlassHeader } from '@/components/navigation/GlassHeader';`
- Add `<GlassHeader showSignIn />` at the top of the page layout
- The GlassHeader provides the branded glass header with Sign In button per user decision

**OpEdPage.tsx -- Replace with GlassHeader:**
- Remove `import AppNavigation from '@/components/AppNavigation';`
- Remove `<AppNavigation />`
- Add `import { GlassHeader } from '@/components/navigation/GlassHeader';`
- Add `<GlassHeader showBack backHref="/" />` at the top of the page layout

**AuthPage.tsx -- Remove nav entirely:**
- Remove `import AppNavigation from '@/components/AppNavigation';`
- Remove `<AppNavigation translucent />` (or similar)
- Auth pages have no nav per user decision ("keep current no-nav layout")

**PasswordResetPage.tsx and PasswordUpdatePage.tsx -- Remove nav:**
- Remove `import AppNavigation from '@/components/AppNavigation';`
- Remove any `<AppNavigation />` instances
- These are auth-flow pages, no nav needed
  </action>
  <verify>
Run `npx tsc --noEmit`. Grep across ALL src/pages/ files: `grep -r "AppNavigation" src/pages/` should return ZERO results. Verify TestPage and InterviewPage import `useNavigation` and call `setLock`.
  </verify>
  <done>
All 14 page files are free of AppNavigation imports/renders. TestPage, InterviewPage, and PracticePage use context-based setLock for navigation locking. LandingPage and OpEdPage use GlassHeader. Auth pages have no nav. Zero AppNavigation references remain in src/pages/.
  </done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes
- `grep -r "AppNavigation" src/pages/` returns zero results
- `grep -r "import AppNavigation" src/` returns zero results from page files (only the AppNavigation.tsx file itself)
- TestPage and InterviewPage call `setLock()` appropriately
- LandingPage renders `<GlassHeader showSignIn />`
- OpEdPage renders `<GlassHeader showBack />`
</verification>

<success_criteria>
Zero pages import or render AppNavigation. Lock behavior is fully migrated to NavigationProvider context. Public pages use GlassHeader. Auth pages have no nav. AppNavigation.tsx has zero importers and is ready for deletion.
</success_criteria>

<output>
After completion, create `.planning/phases/14-unified-navigation/14-05-SUMMARY.md`
</output>
