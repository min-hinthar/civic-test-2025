---
phase: 11-design-token-foundation
plan: 05
type: execute
wave: 3
depends_on: [01]
files_modified:
  - src/components/*.tsx
  - src/pages/*.tsx
autonomous: true

must_haves:
  truths:
    - "All ~80 low-complexity component files use semantic Tailwind classes instead of palette classes"
    - "dark: prefix usage across the entire codebase is reduced to near-zero (only structurally necessary ones remain)"
    - "No hardcoded hex, rgb, or rgba color values remain in component className strings"
  artifacts: []
  key_links: []
---

<objective>
Bulk migrate the remaining ~80 low-complexity component and page files from non-semantic palette classes (text-gray-500, bg-blue-500, etc.) to semantic token classes (text-muted-foreground, bg-primary, etc.), and remove dark: overrides that the token system now handles.

Purpose: Complete the big-bang migration sweep. After this plan, all components reference the design token system.
Output: ~80 files updated with semantic classes, dark: prefixes eliminated.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-design-token-foundation/11-01-SUMMARY.md
@.planning/phases/11-design-token-foundation/11-RESEARCH.md (codebase audit, migration fidelity: snap-to-token)
@tailwind.config.js (available semantic class names)
@src/styles/tokens.css (token definitions for reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate page files to semantic tokens</name>
  <files>src/pages/*.tsx</files>
  <action>
Migrate ALL page files not already handled by Plan 04 (which covered ProgressPage.tsx and HistoryPage.tsx). Remaining pages include but are not limited to: DashboardPage, StudyGuidePage, FlashcardPage, MockTestPage, InterviewPage, SettingsPage (may overlap with Plan 04), SocialPage, and any other page files.

**NOTE:** SettingsPage was listed in Plan 04. If already migrated there, skip it here.

For each page file, apply this systematic replacement:

**Text colors (snap-to-token):**
- `text-gray-400` / `text-gray-500` / `text-slate-400` / `text-slate-500` -> `text-muted-foreground`
- `text-gray-600` / `text-gray-700` / `text-slate-600` / `text-slate-700` -> `text-foreground`
- `text-gray-800` / `text-gray-900` / `text-slate-800` / `text-slate-900` -> `text-foreground`
- `text-white` on primary backgrounds -> `text-primary-foreground`
- `text-blue-500` / `text-blue-600` / `text-blue-700` -> `text-primary`
- `text-green-500` / `text-green-600` / `text-emerald-*` -> `text-success`
- `text-amber-500` / `text-orange-*` -> `text-warning`
- `text-red-500` / `text-rose-*` -> `text-destructive`
- `text-purple-*` -> `text-accent-purple`

**Background colors:**
- `bg-white` -> `bg-surface` or `bg-card` (use card for card-like containers)
- `bg-gray-50` / `bg-gray-100` / `bg-slate-50` / `bg-slate-100` -> `bg-muted` or `bg-surface-muted`
- `bg-blue-50` / `bg-blue-100` -> `bg-primary-subtle`
- `bg-blue-500` / `bg-blue-600` -> `bg-primary`
- `bg-green-50` -> `bg-success-50` (keep numeric variant if available in Tailwind config, else `bg-success/10`)
- `bg-amber-50` -> `bg-warning-50` (same)

**Border colors:**
- `border-gray-200` / `border-gray-300` / `border-slate-200` -> `border-border`
- `border-gray-100` / `border-slate-100` -> `border-border` (snap-to-token)
- `border-blue-*` -> `border-primary`

**Shadows:**
- `shadow-blue-500/25` or similar -> `shadow-primary/25` or use token shadow

**Ring/focus:**
- `ring-blue-*` -> `ring-primary` or `ring-ring`
- `focus:ring-blue-*` -> `focus:ring-ring`

**Remove dark: overrides:**
- `dark:bg-gray-800` / `dark:bg-slate-800` / `dark:bg-gray-900` -> REMOVE (handled by tokens)
- `dark:text-gray-200` / `dark:text-white` / `dark:text-gray-300` -> REMOVE
- `dark:border-gray-700` / `dark:border-slate-700` -> REMOVE

**IMPORTANT:** Be careful with:
- Sub-category colors (rose, emerald, fuchsia, sky, etc.) used for data visualization -- these should map to `--color-category-*` tokens or stay as palette classes (both are available per Tailwind config)
- Gradient classes (`from-*`, `via-*`, `to-*`) -- replace the palette colors with semantic equivalents where applicable
- `bg-primary/10` opacity variants -- these work with the new token system because HSL channels support opacity modifiers
  </action>
  <verify>
- `npx next build` passes
- grep for common palette classes in page files shows near-zero results:
  `grep -c "text-gray-\|text-slate-\|bg-gray-\|bg-slate-\|border-gray-\|border-slate-" src/pages/*.tsx`
- grep for `dark:bg-gray\|dark:bg-slate\|dark:text-gray\|dark:text-slate` in page files shows near-zero
  </verify>
  <done>All page files migrated to semantic token classes. Palette classes eliminated. dark: overrides removed where token system handles them.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate remaining component files to semantic tokens</name>
  <files>src/components/**/*.tsx</files>
  <action>
Migrate ALL component files not already handled by Plan 04. This is the bulk of the work (~70-80 files).

Use the EXACT SAME replacement mapping as Task 1 above. Apply systematically to every .tsx file in src/components/ and subdirectories.

**Efficient approach:** For each replacement pattern, do a project-wide search and replace:

1. Open each component file
2. Apply the text/background/border/shadow/ring replacements from the mapping above
3. Remove dark: overrides that tokens handle
4. Keep dark: only for genuinely conditional visual differences (very rare)

**Files explicitly EXCLUDED (already migrated in Plan 04):**
- CircularTimer.tsx
- AudioWaveform.tsx
- SkillTreePath.tsx
- Card.tsx
- StreakHeatmap.tsx
- WelcomeModal.tsx
- NotificationSettings.tsx
- InstallPrompt.tsx
- IOSTip.tsx
- NotificationPrePrompt.tsx

**Files explicitly EXCLUDED (handled in Plan 02):**
- ThemeToggle.tsx

**Special attention files:**
- `Flashcard3D.tsx` - Uses sub-category colors for card backgrounds. Map to `--color-category-*` tokens.
- `CategoryGrid.tsx` - Uses sub-category color mapping. Same treatment.
- `ShareCardRenderer.ts` - LEAVE AS-IS per research recommendation. This generates a branded share image with fixed colors that don't theme.
- `Confetti.tsx` or confetti-related - LEAVE AS-IS per research. Decorative celebratory effect.
- `Badge.tsx` / achievement components - Map purple to `text-accent-purple` / `bg-accent-purple`
- Any Radix UI primitive components (Dialog, Toast, Accordion, etc.) - These likely already use semantic classes. Verify and adjust if needed.

**Snap-to-token fidelity:** When multiple slightly different shades are used for the same semantic purpose, consolidate to the nearest semantic token. For example, both `text-gray-400` and `text-gray-500` as muted text become `text-muted-foreground`.
  </action>
  <verify>
- `npx next build` passes
- Codebase-wide palette class count dramatically reduced:
  `grep -rn "text-gray-\|text-slate-\|bg-gray-\|bg-slate-\|border-gray-\|border-slate-" src/components/ --include="*.tsx" | wc -l` should be near-zero (excluding shareCardRenderer)
- Codebase-wide dark: override count dramatically reduced:
  `grep -rn "dark:" src/components/ --include="*.tsx" | wc -l` should be <20 (down from ~220)
  </verify>
  <done>All remaining ~70-80 component files migrated. Non-semantic palette classes eliminated across the entire component tree. dark: overrides reduced from ~220 to near-zero.</done>
</task>

</tasks>

<verification>
- `npx next build` passes
- grep for non-semantic palette classes across src/ shows near-zero (excluding shareCardRenderer, confetti)
- grep for dark: overrides across src/ shows dramatic reduction (<20 total remaining)
- All components reference semantic token classes
</verification>

<success_criteria>
The entire component and page codebase uses semantic token classes. Non-semantic palette classes (text-gray-*, bg-blue-*, etc.) are eliminated. dark: prefix usage drops from ~220 to near-zero. The app renders correctly in both light and dark mode.
</success_criteria>

<output>
After completion, create `.planning/phases/11-design-token-foundation/11-05-SUMMARY.md`
</output>
