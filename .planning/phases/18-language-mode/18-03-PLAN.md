---
phase: 18-language-mode
plan: 03
type: execute
wave: 2
depends_on: ["18-01"]
files_modified:
  - src/pages/SettingsPage.tsx
  - src/components/ui/LanguageToggle.tsx
autonomous: true

must_haves:
  truths:
    - "Settings page language section shows FlagToggle instead of old LanguageToggle"
    - "Settings page has extended language mode descriptions explaining what each mode does"
    - "English-only mode description says it simulates the real USCIS interview"
    - "Myanmar mode description says it shows bilingual content"
    - "Descriptions themselves follow the current language mode"
  artifacts:
    - path: "src/pages/SettingsPage.tsx"
      provides: "Enhanced settings with FlagToggle and mode descriptions"
    - path: "src/components/ui/LanguageToggle.tsx"
      provides: "Deprecated old toggle (kept temporarily for any remaining consumers)"
  key_links:
    - from: "src/pages/SettingsPage.tsx"
      to: "src/components/ui/FlagToggle.tsx"
      via: "import"
      pattern: "FlagToggle"
---

<objective>
Enhance the Settings page language section with the new FlagToggle component and add extended mode descriptions explaining what each mode does. Remove the old LanguageToggle from SettingsPage.

Purpose: Users need a clear settings interface that explains the language modes and lets them switch with the new flag-based toggle.

Output: Updated SettingsPage.tsx with enhanced language section, updated LanguageToggle.tsx (deprecated).
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/18-language-mode/18-01-SUMMARY.md
@src/pages/SettingsPage.tsx
@src/components/ui/LanguageToggle.tsx
@src/components/ui/FlagToggle.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance Settings page language section with FlagToggle and descriptions</name>
  <files>src/pages/SettingsPage.tsx</files>
  <action>
1. **Replace import**: Change `import { LanguageToggle } from '@/components/ui/LanguageToggle'` to `import { FlagToggle } from '@/components/ui/FlagToggle'`.

2. **Replace the language toggle SettingsRow** (the "Display Language" row around line 247-253). Replace the entire Appearance section's language row and description box with an enhanced version:

```tsx
{/* Language mode with FlagToggle */}
<div className="py-3 border-b border-border/40">
  <div className="flex items-center justify-between min-h-[48px]">
    <div className="flex-1 mr-3">
      <p className="text-sm font-semibold text-foreground">Display Language</p>
      {showBurmese && (
        <p className="font-myanmar text-xs text-muted-foreground">ပြသည့်ဘာသာ</p>
      )}
    </div>
    <FlagToggle />
  </div>
</div>
```

3. **Replace the existing description box** (the `<div className="mt-2 rounded-xl bg-muted/30 p-3">` block around lines 270-281) with enhanced mode descriptions:

```tsx
{/* Mode descriptions */}
<div className="mt-3 space-y-2">
  {/* English mode description */}
  <div className={clsx(
    'rounded-xl px-3 py-2.5 border transition-colors',
    !showBurmese
      ? 'border-primary/30 bg-primary-subtle/20'
      : 'border-border/40 bg-muted/20'
  )}>
    <div className="flex items-center gap-2 mb-1">
      {!showBurmese && <span className="h-2 w-2 rounded-full bg-primary" />}
      <p className="text-xs font-semibold text-foreground">English Only</p>
    </div>
    <p className="text-xs text-muted-foreground">
      Shows English text only on all screens. Simulates the real USCIS civics test where everything is in English.
    </p>
    {showBurmese && (
      <p className="text-xs text-muted-foreground font-myanmar mt-1">
        ဖန်သားပြင်အားလုံးတွင် အင်္ဂလိပ်စာသာ ပြသည်။ အရာအားလုံး အင်္ဂလိပ်ဘာသာဖြင့်ဖြစ်သော တကယ့် USCIS နိုင်ငံသားစာမေးပွဲကို တူညီစေပါသည်။
      </p>
    )}
  </div>

  {/* Myanmar mode description */}
  <div className={clsx(
    'rounded-xl px-3 py-2.5 border transition-colors',
    showBurmese
      ? 'border-primary/30 bg-primary-subtle/20'
      : 'border-border/40 bg-muted/20'
  )}>
    <div className="flex items-center gap-2 mb-1">
      {showBurmese && <span className="h-2 w-2 rounded-full bg-primary" />}
      <p className="text-xs font-semibold text-foreground">Bilingual (English + Myanmar)</p>
    </div>
    <p className="text-xs text-muted-foreground">
      Shows both English and Burmese text. English appears first with Burmese translations below.
    </p>
    {showBurmese && (
      <p className="text-xs text-muted-foreground font-myanmar mt-1">
        အင်္ဂလိပ်နှင့် မြန်မာ နှစ်ဘာသာလုံးကို ပြသည်။ အင်္ဂလိပ်စာ အရင်ပြပြီး မြန်မာဘာသာပြန်ကို အောက်တွင်ပြသည်။
      </p>
    )}
  </div>
</div>
```

4. **Keep the Theme row** unchanged (it follows after).

5. **Ensure SettingsPage still imports `clsx`** (it already does from the existing code).
  </action>
  <verify>
- `npx tsc --noEmit` passes
- Settings page renders FlagToggle in language row
- Both mode descriptions render with appropriate highlighting for active mode
- No reference to old LanguageToggle import
  </verify>
  <done>Settings page language section enhanced with FlagToggle and extended bilingual mode descriptions. Active mode visually highlighted.</done>
</task>

<task type="auto">
  <name>Task 2: Deprecate old LanguageToggle component</name>
  <files>src/components/ui/LanguageToggle.tsx</files>
  <action>
1. **Add deprecation comment** at the top of the file:
```typescript
/**
 * @deprecated Use FlagToggle from '@/components/ui/FlagToggle' instead.
 * This component will be removed after all consumers are migrated.
 * Kept temporarily for backward compatibility.
 */
```

2. **Check for remaining consumers**: Search the codebase for imports of `LanguageToggle` or `LanguageToggleCompact`. After Plans 02 and 03, the only consumers should be gone. If any remain, note them in the summary for future cleanup.

3. **Do NOT delete the file yet** -- it may still be imported by components not yet migrated. The deprecation comment signals intent.
  </action>
  <verify>
- File has deprecation JSDoc comment
- `npx tsc --noEmit` passes
- Grep for `LanguageToggle` import to identify any remaining consumers
  </verify>
  <done>Old LanguageToggle marked as deprecated. Remaining consumers identified (if any) for future cleanup.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with zero errors
- `npm run lint` passes
- Settings page shows FlagToggle with mode descriptions
- Old LanguageToggle has deprecation notice
</verification>

<success_criteria>
- Settings page uses FlagToggle instead of old LanguageToggle
- Two mode description cards show with active mode highlighted
- Descriptions explain what each mode does in both languages
- Old LanguageToggle marked deprecated
- No TypeScript or ESLint errors
</success_criteria>

<output>
After completion, create `.planning/phases/18-language-mode/18-03-SUMMARY.md`
</output>
