---
phase: 10-tech-debt-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/TestPage.tsx
  - src/pages/AuthPage.tsx
  - src/pages/PasswordUpdatePage.tsx
  - src/pages/PasswordResetPage.tsx
  - src/components/GoogleOneTapSignIn.tsx
  - src/components/AppNavigation.tsx
  - src/contexts/OfflineContext.tsx
  - src/hooks/useSyncQueue.ts
autonomous: true

must_haves:
  truths:
    - "Every toast notification in the app is visible to the user (no silent console.warn shim calls)"
    - "Every toast notification displays both English and Burmese text"
    - "No file imports toast from @/components/ui/use-toast"
  artifacts:
    - path: "src/pages/TestPage.tsx"
      provides: "Bilingual toast calls via useToast from BilingualToast"
      contains: "useToast.*BilingualToast"
    - path: "src/pages/AuthPage.tsx"
      provides: "Bilingual toast calls via useToast from BilingualToast"
      contains: "useToast.*BilingualToast"
    - path: "src/pages/PasswordUpdatePage.tsx"
      provides: "Bilingual toast calls via useToast from BilingualToast"
      contains: "useToast.*BilingualToast"
    - path: "src/pages/PasswordResetPage.tsx"
      provides: "Bilingual toast calls via useToast from BilingualToast"
      contains: "useToast.*BilingualToast"
    - path: "src/components/GoogleOneTapSignIn.tsx"
      provides: "Bilingual toast calls via useToast from BilingualToast"
      contains: "useToast.*BilingualToast"
    - path: "src/components/AppNavigation.tsx"
      provides: "Bilingual toast calls via useToast from BilingualToast"
      contains: "useToast.*BilingualToast"
    - path: "src/contexts/OfflineContext.tsx"
      provides: "Bilingual toast calls via useToast from BilingualToast"
      contains: "useToast.*BilingualToast"
    - path: "src/hooks/useSyncQueue.ts"
      provides: "Bilingual toast calls via useToast from BilingualToast"
      contains: "useToast.*BilingualToast"
  key_links:
    - from: "all 8 toast files"
      to: "src/components/BilingualToast.tsx"
      via: "import { useToast } from '@/components/BilingualToast'"
      pattern: "useToast.*BilingualToast"
---

<objective>
Convert all 19 broken toast() calls (using the console.warn shim from use-toast.ts) to working useToast() calls from BilingualToast across 8 files.

Purpose: The app has a dual toast architecture. The Radix-based `toast()` function from `@/components/ui/use-toast` is a console.warn shim -- it produces NO visible notification. All 19 callsites using it are silently failing. Converting them to `useToast()` from BilingualToast both fixes the broken notifications AND ensures full bilingual coverage (BILN-03, BILN-04).

Output: 8 modified source files with all toast calls converted to BilingualToast pattern.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-tech-debt-cleanup/10-RESEARCH.md

Key reference files:
@src/components/BilingualToast.tsx (the working toast system -- study its API: showSuccess, showWarning, showError, showInfo, each takes {en: string, my: string})
@src/hooks/useStreak.ts (example of existing BilingualToast usage pattern)
@src/components/srs/AddToDeckButton.tsx (example of existing BilingualToast usage pattern)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert toast calls in pages (TestPage, AuthPage, PasswordUpdatePage, PasswordResetPage)</name>
  <files>
    src/pages/TestPage.tsx
    src/pages/AuthPage.tsx
    src/pages/PasswordUpdatePage.tsx
    src/pages/PasswordResetPage.tsx
  </files>
  <action>
    In each of these 4 page files:

    1. Remove the import: `import { toast } from '@/components/ui/use-toast'`
    2. Add the import: `import { useToast } from '@/components/BilingualToast'`
    3. Inside the component function body (before any handlers), add: `const { showSuccess, showWarning, showError } = useToast();`
    4. Convert each `toast({...})` call using this mapping:
       - `variant: 'destructive'` -> `showError({en: '...', my: '...'})`
       - `variant: 'warning'` -> `showWarning({en: '...', my: '...'})`
       - no variant / `variant: 'default'` -> `showSuccess({en: '...', my: '...'})`

    **Per-file conversion details from research:**

    **TestPage.tsx** (3 calls at lines ~262, ~298, ~305):
    - "Please finish the mock test first!" (warning) -- has Burmese in lockMessage variable, split into en/my
    - "Mock test saved" + description (default -> showSuccess) -- add Burmese my field
    - "Unable to save test" (warning) -- add Burmese my field

    **AuthPage.tsx** (3 calls at lines ~24, ~30, ~36):
    - "Welcome back!" (default -> showSuccess) -- has inline Burmese, split into en/my
    - "Account created!" (default -> showSuccess) -- has inline Burmese, split into en/my
    - "Check your inbox" (default -> showInfo) -- has inline Burmese, split into en/my

    **PasswordUpdatePage.tsx** (4 calls at lines ~20, ~33, ~41, ~51):
    - "Open from the secure email link" (destructive -> showError) -- has Burmese
    - "Passwords must match" (warning -> showWarning) -- has Burmese
    - "Password too short" (warning -> showWarning) -- has Burmese
    - "Password updated!" (default -> showSuccess) -- has Burmese

    **PasswordResetPage.tsx** (1 call at line ~21):
    - "Reset email sent" (default -> showSuccess) -- has Burmese

    IMPORTANT: BilingualToast `en` field should contain ONLY English text, `my` field should contain ONLY Burmese text. Do NOT concatenate both languages into one field. If the existing toast has Burmese text mixed into the English description, separate them cleanly.

    IMPORTANT: The `useToast()` hook must be called at the top level of the component function (not inside callbacks, not conditionally). The destructured methods (showSuccess, etc.) can be called anywhere.

    NOTE for TestPage.tsx: This file also has `import { civicsQuestions } from '@/constants/civicsQuestions'` -- leave that import alone, it will be handled in plan 10-02.
  </action>
  <verify>
    Run `npx tsc --noEmit` -- zero errors.
    Run `npm run lint` -- no new errors in these 4 files.
    Grep: `grep -r "from '@/components/ui/use-toast'" src/pages/` should return empty (no remaining legacy toast imports in pages).
  </verify>
  <done>
    All 11 toast calls in 4 page files converted to BilingualToast pattern. Zero legacy toast imports remain in src/pages/.
  </done>
</task>

<task type="auto">
  <name>Task 2: Convert toast calls in components and hooks (GoogleOneTapSignIn, AppNavigation, OfflineContext, useSyncQueue)</name>
  <files>
    src/components/GoogleOneTapSignIn.tsx
    src/components/AppNavigation.tsx
    src/contexts/OfflineContext.tsx
    src/hooks/useSyncQueue.ts
  </files>
  <action>
    In each of these 4 files, apply the same conversion pattern as Task 1:

    1. Remove: `import { toast } from '@/components/ui/use-toast'`
    2. Add: `import { useToast } from '@/components/BilingualToast'`
    3. Add `const { showSuccess, showWarning, showError } = useToast();` at top of component/hook function body
    4. Convert each toast() call

    **Per-file conversion details:**

    **GoogleOneTapSignIn.tsx** (3 calls at lines ~24, ~30, ~90):
    - "Signed in with Google" (default -> showSuccess) -- English-only, ADD Burmese translation: `my: 'Google ဖြင့် ဝင်ရောက်ပြီးပါပြီ'`
    - "Google sign-in blocked" (destructive -> showError) -- English-only, ADD Burmese: `my: 'Google ဝင်ရောက်မှု ပိတ်ဆို့ခံရပါသည်'`
    - "Google sign-in unavailable" (destructive -> showError) -- English-only, ADD Burmese: `my: 'Google ဝင်ရောက်မှု မရရှိနိုင်ပါ'`

    **AppNavigation.tsx** (1 call at line ~58):
    - "Please finish your mock test first!" (warning -> showWarning) -- has Burmese in lockMessage variable, split into en/my

    **OfflineContext.tsx** (2 calls at lines ~145, ~151):
    - Sync success (default -> showSuccess) -- has Burmese in description field, split en/my
    - Sync failure (warning -> showWarning) -- has Burmese in description field, split en/my

    **useSyncQueue.ts** (2 calls at lines ~79, ~84):
    - Sync success (default -> showSuccess) -- has Burmese, split en/my
    - Sync failure (warning -> showWarning) -- has Burmese, split en/my

    IMPORTANT: All of these are either React components or custom hooks, so `useToast()` is valid.

    IMPORTANT: For GoogleOneTapSignIn, the existing toast calls are English-only. You MUST add proper Burmese translations.
  </action>
  <verify>
    Run `npx tsc --noEmit` -- zero errors.
    Run `npm run lint` -- no new errors in these 4 files.
    Grep: `grep -r "from '@/components/ui/use-toast'" src/` should return ZERO results (no legacy toast imports anywhere).
  </verify>
  <done>
    All 8 toast calls in 4 component/hook files converted to BilingualToast. Zero legacy toast imports remain anywhere in src/.
  </done>
</task>

</tasks>

<verification>
Run these checks to verify plan completion:

1. `grep -r "from '@/components/ui/use-toast'" src/` -- should return ZERO results
2. `grep -r "useToast.*BilingualToast" src/` -- should show all 8 converted files plus the 3 already using it
3. `npx tsc --noEmit` -- zero TypeScript errors
4. `npm run lint` -- no new ESLint errors
5. `npx vitest run` -- all existing tests still pass
</verification>

<success_criteria>
- Zero files import toast from @/components/ui/use-toast
- All 19 toast callsites converted to useToast() from BilingualToast
- Every toast call provides both `en` and `my` fields (no English-only toasts)
- TypeScript compiles with zero errors
- ESLint passes with no new errors
- All existing tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/10-tech-debt-cleanup/10-01-SUMMARY.md`
</output>
