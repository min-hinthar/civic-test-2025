---
phase: 15-progress-hub
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/HubPage.tsx
  - src/components/hub/HubTabBar.tsx
  - src/components/hub/GlassCard.tsx
  - src/AppShell.tsx
  - src/styles/globals.css
autonomous: true

must_haves:
  truths:
    - "User can navigate to /#/hub and sees a tabbed page with 3 tabs (Overview, History, Achievements)"
    - "Clicking a tab navigates to /hub/overview, /hub/history, or /hub/achievements and updates browser history"
    - "Visiting /hub bare redirects to /hub/overview"
    - "Visiting /progress, /history, /social redirects to correct Hub tab"
    - "Invalid tab path like /hub/nonexistent redirects to /hub/overview"
    - "Tab bar has spring-animated pill indicator using motion/react layoutId"
  artifacts:
    - path: "src/pages/HubPage.tsx"
      provides: "Hub shell with tab bar and conditional tab rendering"
    - path: "src/components/hub/HubTabBar.tsx"
      provides: "Premium tab bar with bilingual labels and spring indicator"
    - path: "src/components/hub/GlassCard.tsx"
      provides: "Reusable glass-morphism card wrapper"
  key_links:
    - from: "src/AppShell.tsx"
      to: "src/pages/HubPage.tsx"
      via: "React Router nested routes"
      pattern: "Route.*path.*hub"
    - from: "src/pages/HubPage.tsx"
      to: "src/components/hub/HubTabBar.tsx"
      via: "Tab navigation with useNavigate"
---

<objective>
Create the Hub page shell with tab bar, glassmorphism card component, and all route wiring.

Purpose: This is the foundation for all 3 tab content plans. It establishes the HubPage component with direction-aware tab rendering, the premium tab bar with spring-animated pill indicator, the reusable GlassCard component, and all route changes (nested routes, redirects from old pages, catch-all).

Output: HubPage shell rendering placeholder tab content, working tab navigation with browser history, all redirects functional, GlassCard reusable component.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-progress-hub/15-RESEARCH.md
@src/AppShell.tsx
@src/components/navigation/navConfig.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GlassCard component and Hub CSS utilities</name>
  <files>
    src/components/hub/GlassCard.tsx
    src/styles/globals.css
  </files>
  <action>
Create `src/components/hub/GlassCard.tsx`:
- A reusable card wrapper with frosted glass effect
- Props: `children`, `className` (optional), `interactive` (optional boolean for hover effect)
- Styles: `backdrop-filter: blur(16px)`, translucent background using CSS variables
- Dark mode variant: darker translucent background with subtle border glow (use `inset 0 0 0 1px hsl(0 0% 100% / 0.08)`)
- Use Tailwind classes where possible, inline styles only for backdrop-filter
- Must support `@supports` fallback for browsers without backdrop-filter (opaque background)
- Use clsx for class composition

Add to `src/styles/globals.css` in the `@layer components` section:
- `.glass-card` utility class with the frosted glass styles (light + dark variants)
- `.glass-card-interactive` variant with hover:scale-[1.01] and transition
- Striped progress bar animation keyframes (`stripe-move`) for later use by subcategory bars

The GlassCard component should apply the `.glass-card` class and merge any additional className.
  </action>
  <verify>
Verify the file exists and exports a GlassCard component. Check that globals.css has the new utility classes. Run `npx tsc --noEmit` to confirm no type errors.
  </verify>
  <done>GlassCard component renders a frosted glass card with dark mode variant. CSS utilities for glass-card and stripe animation are in globals.css.</done>
</task>

<task type="auto">
  <name>Task 2: Create HubPage shell, HubTabBar, and route wiring</name>
  <files>
    src/pages/HubPage.tsx
    src/components/hub/HubTabBar.tsx
    src/AppShell.tsx
  </files>
  <action>
**HubTabBar (`src/components/hub/HubTabBar.tsx`):**
- 3 tabs: Overview, History, Achievements
- Each tab has bilingual labels (English + Burmese), consistent with navConfig pattern
- Tab labels: "Overview" / "အခြေအနေ", "History" / "မှတ်တမ်း", "Achievements" / "အောင်မြင်မှုများ"
- Active tab indicator: `motion.div` with `layoutId="hub-tab-indicator"` for spring-animated pill
- Spring transition: `{ type: 'spring', stiffness: 500, damping: 30 }`
- Premium hybrid style: pill-shaped active state with underline, distinct button feel
- Tab bar should be sticky (`sticky top-0 z-20`) per discretion recommendation
- Props: `activeTab` (string), `onTabChange` (callback) — the parent HubPage handles navigation
- Use `useLanguage` hook for showBurmese
- 44px minimum touch target height

**HubPage (`src/pages/HubPage.tsx`):**
- Page title: "My Progress" with Burmese translation
- Use `useLocation` to derive current tab from `location.pathname` (split by '/' and get last segment)
- Derive direction for tab slide animation using previous tab index tracking:
  - Use the "adjust state when props change" pattern (NOT useRef) per React Compiler rules
  - TAB_ORDER: overview=0, history=1, achievements=2
  - Direction: positive if new tab index > previous, negative otherwise
- Use `AnimatePresence mode="wait" custom={direction}` with `motion.div` keyed by tab name
- Tab slide variants: enter from left/right based on direction, center at x:0, exit opposite
- Spring transition: `{ type: 'spring', stiffness: 300, damping: 30 }`
- DO NOT use `<Outlet>` — conditionally render tab content based on pathname-derived tab key (per research Pitfall 1)
- For now, render placeholder divs for each tab: `<div>Overview Tab Coming Soon</div>`, etc.
- Render `HubTabBar` above the tab content area
- Wrap in `page-shell` div and max-w-6xl container
- Use `useNavigate` for tab changes (push to `/hub/{tab}`)

**AppShell route changes (`src/AppShell.tsx`):**
- Remove `import ProgressPage from '@/pages/ProgressPage'` — it will still exist but won't be imported here
- Add `import HubPage from '@/pages/HubPage'`
- Replace the single `/hub` route with nested routes:
  ```
  <Route path="/hub/*" element={<ProtectedRoute><HubPage /></ProtectedRoute>} />
  ```
  (HubPage internally handles sub-path rendering via useLocation)
- Update redirects:
  - `/progress` → redirect to `/hub/overview`
  - `/history` → redirect to `/hub/history` (change from current `/hub#history`)
  - `/social` → redirect to `/hub/achievements` (change from current `/hub#social`)
- Keep the `RedirectWithLoading` component for these redirects
- Bare `/hub` is handled inside HubPage (if tab segment is empty/missing, navigate to `/hub/overview`)
- Invalid tab paths (e.g., `/hub/nonexistent`) handled inside HubPage with redirect to `/hub/overview`
  </action>
  <verify>
Run `npx tsc --noEmit` to verify no type errors. Run `npm run build` to confirm the build succeeds. Navigate to `/#/hub` and verify it redirects to `/#/hub/overview`. Navigate to `/#/history` and verify redirect to `/#/hub/history`. Navigate to `/#/social` and verify redirect to `/#/hub/achievements`. Click tabs and verify URL changes and browser back button works.
  </verify>
  <done>HubPage renders with 3-tab navigation, spring-animated pill indicator, direction-aware tab slide placeholders, and all route redirects work correctly. Browser history updates on tab switch.</done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds with no errors
2. Navigating to `/#/hub` redirects to `/#/hub/overview`
3. All 3 tabs clickable and URL updates to `/hub/overview`, `/hub/history`, `/hub/achievements`
4. Browser back button navigates between previously visited tabs
5. `/progress` redirects to `/hub/overview`
6. `/history` redirects to `/hub/history`
7. `/social` redirects to `/hub/achievements`
8. `/hub/nonexistent` redirects to `/hub/overview`
9. Tab bar indicator animates smoothly with spring physics between tabs
10. Glass card component renders with frosted glass effect in both light and dark mode
</verification>

<success_criteria>
Hub page shell is functional with working tab navigation, all route redirects are correct, and the GlassCard component is ready for use by tab content plans.
</success_criteria>

<output>
After completion, create `.planning/phases/15-progress-hub/15-01-SUMMARY.md`
</output>
