---
phase: 04-learning-explanations-category-progress
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/index.ts
  - src/lib/mastery/categoryMapping.ts
  - src/constants/questions/american-government.ts
  - src/constants/questions/rights-responsibilities.ts
  - src/constants/questions/american-history-colonial.ts
  - src/constants/questions/american-history-1800s.ts
  - src/constants/questions/american-history-recent.ts
  - src/constants/questions/symbols-holidays.ts
autonomous: true

must_haves:
  truths:
    - "Every question in allQuestions has a non-empty explanation field with brief_en and brief_my"
    - "USCIS category mapping correctly groups 7 sub-categories into 3 main categories"
    - "Explanation content is brief (2-3 sentences), friendly tone, with Burmese as natural rephrasing"
    - "Constitutional questions include citation field referencing specific articles/amendments"
  artifacts:
    - path: "src/types/index.ts"
      provides: "Explanation interface with brief_en, brief_my, mnemonic, citation, funFact, commonMistake, relatedQuestionIds"
      contains: "interface Explanation"
    - path: "src/lib/mastery/categoryMapping.ts"
      provides: "USCIS 3-category mapping with colors and sub-categories"
      exports: ["USCIS_CATEGORIES", "USCISCategory", "getUSCISCategory", "getCategoryQuestionIds"]
    - path: "src/constants/questions/american-government.ts"
      provides: "47 questions with explanation field populated"
  key_links:
    - from: "src/constants/questions/*.ts"
      to: "src/types/index.ts"
      via: "Explanation interface import"
      pattern: "explanation:"
---

<objective>
Create the explanation data structure, USCIS category mapping, and bilingual explanation content for all 100 civics questions.

Purpose: This is the foundational data layer for Phase 4. Every downstream plan (test explanations, study guide explanations, mastery tracking, progress visualization) depends on these types and content existing.

Output: Extended Question type with Explanation interface, USCIS category mapping utility, and all 100 questions populated with bilingual explanation content.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-learning-explanations-category-progress/04-CONTEXT.md
@.planning/phases/04-learning-explanations-category-progress/04-RESEARCH.md
@src/types/index.ts
@src/constants/questions/index.ts
@src/constants/questions/american-government.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Explanation type and USCIS category mapping</name>
  <files>src/types/index.ts, src/lib/mastery/categoryMapping.ts</files>
  <action>
    1. Extend `src/types/index.ts`:
       - Add `Explanation` interface with fields:
         - `brief_en: string` (2-3 sentence explanation)
         - `brief_my: string` (natural Burmese rephrasing, NOT word-for-word translation)
         - `mnemonic_en?: string` (optional memory aid in English)
         - `mnemonic_my?: string` (optional memory aid in Burmese - may differ from EN)
         - `citation?: string` (constitutional reference, only for constitutional questions)
         - `funFact_en?: string` (optional cultural connection / fun fact)
         - `funFact_my?: string` (fun fact in Burmese)
         - `relatedQuestionIds?: string[]` (IDs for "See also" section)
         - `commonMistake_en?: string` (why common wrong answers are wrong)
         - `commonMistake_my?: string` (common mistake in Burmese)
       - Add `explanation?: Explanation` field to the existing `Question` interface (optional for gradual rollout safety)

    2. Create `src/lib/mastery/categoryMapping.ts`:
       - Define `USCIS_CATEGORIES` constant mapping 3 main USCIS categories to sub-categories:
         - 'American Government' (color: 'blue') -> ['Principles of American Democracy', 'System of Government', 'Rights and Responsibilities']
         - 'American History' (color: 'amber') -> ['American History: Colonial Period and Independence', 'American History: 1800s', 'Recent American History and Other Important Historical Information']
         - 'Integrated Civics' (color: 'emerald') -> ['Civics: Symbols and Holidays']
       - Export `USCISCategory` type
       - Export `getUSCISCategory(subCategory: Category): USCISCategory` helper function
       - Export `getCategoryQuestionIds(category: USCISCategory | Category, questions: Question[]): string[]` helper
       - Export `CATEGORY_COLORS` mapping each USCISCategory to a CSS-friendly color name
       - Include bilingual category names: `USCIS_CATEGORY_NAMES` with `{ en: string, my: string }` for each
       - Use emerald instead of green for Integrated Civics to avoid clash with success-500 semantic color (per research pitfall #3)
  </action>
  <verify>
    Run `npx tsc --noEmit` - no type errors. Verify Explanation interface exists in types. Verify categoryMapping exports correctly.
  </verify>
  <done>
    Explanation interface defined with all specified fields. Question interface extended with optional explanation field. USCIS category mapping with 3 main categories, colors, bilingual names, and helper functions exported.
  </done>
</task>

<task type="auto">
  <name>Task 2a: Write bilingual explanation content for Government & Rights questions (57 questions)</name>
  <files>
    src/constants/questions/american-government.ts,
    src/constants/questions/rights-responsibilities.ts
  </files>
  <action>
    Add `explanation` field to every question in the Government and Rights files (57 questions total).

    **Content guidelines (LOCKED DECISIONS from CONTEXT.md):**
    - **Detail level:** Brief (2-3 sentences max)
    - **Tone:** Friendly and simple, like a helpful tutor explaining to a friend
    - **Bilingual layout:** English brief_en + Burmese brief_my (natural rephrasing, NOT word-for-word)
    - **Citations:** Only for constitutional questions - cite specific articles/amendments (e.g., "Article II, Section 1" or "1st Amendment")
    - **Mnemonics:** Include ONLY where genuinely natural and helpful. Skip when forced. EN and MY mnemonics may differ.
    - **Fun facts:** Include where relevant - brief cultural connection that makes content memorable
    - **Common mistakes:** Add commonMistake_en/my for questions where wrong answers are commonly confused
    - **Related questions:** Add relatedQuestionIds linking thematically connected questions (e.g., GOV-P01 and GOV-P02 both about the Constitution)

    **Content sourcing:** Cross-reference with USCIS official study materials. Explanations should help users understand WHY the answer is correct, not just restate it.

    **Example for GOV-P01 ("What is the supreme law of the land?"):**
    ```typescript
    explanation: {
      brief_en: "The Constitution is the highest legal authority in the United States. All other laws must follow it, and no person or government body is above it.",
      brief_my: "ဖွဲ့စည်းပုံအခြေခံဥပဒေသည် အမေရိကန်ပြည်ထောင်စု၏ အမြင့်ဆုံးဥပဒေဖြစ်ပါသည်။ အခြားဥပဒေအားလုံးသည် ၎င်းကိုလိုက်နာရပြီး မည်သူမျှ ၎င်းအထက်တွင် မရှိပါ။",
      citation: "Article VI, Clause 2 (Supremacy Clause)",
      commonMistake_en: "The Declaration of Independence declared freedom from Britain but doesn't set up how the government works — that's the Constitution's job.",
      commonMistake_my: "လွတ်လပ်ရေးကြေညာစာတမ်းသည် ဗြိတိန်မှ လွတ်လပ်ရေးကို ကြေညာခဲ့သော်လည်း အစိုးရလုပ်ပုံလုပ်နည်းကို မသတ်မှတ်ပါ — ၎င်းသည် ဖွဲ့စည်းပုံ၏ တာဝန်ဖြစ်ပါသည်။",
      relatedQuestionIds: ["GOV-P02", "GOV-P03"],
    }
    ```

    Process these files:
    1. `american-government.ts` - 47 questions (GOV-P01-12, GOV-S01-35). Many constitutional questions needing citations.
    2. `rights-responsibilities.ts` - 10 questions (RR-01-10). Rights-focused, cite amendments.

    Import `Explanation` type from `@/types` in each file if not already imported.
  </action>
  <verify>
    Run `npx tsc --noEmit` - no type errors. Verify coverage:
    ```bash
    grep -c "explanation:" src/constants/questions/american-government.ts src/constants/questions/rights-responsibilities.ts
    ```
    All 57 questions should have explanation field.
  </verify>
  <done>
    57 Government and Rights questions have bilingual explanation content. Constitutional questions include citations. Memory aids and fun facts included where natural. Common mistakes documented for frequently confused answers.
  </done>
</task>

<task type="auto">
  <name>Task 2b: Write bilingual explanation content for History & Symbols questions (43 questions)</name>
  <files>
    src/constants/questions/american-history-colonial.ts,
    src/constants/questions/american-history-1800s.ts,
    src/constants/questions/american-history-recent.ts,
    src/constants/questions/symbols-holidays.ts
  </files>
  <action>
    Add `explanation` field to every question in the History and Symbols files (43 questions total).

    **Content guidelines:** Same as Task 2a (see above). Key differences for these categories:
    - **History questions:** Focus on historical context and significance. Citations only for questions referencing constitutional amendments.
    - **Symbols & Holidays:** Fun facts are especially relevant here - cultural connections and memorable details.
    - **Related questions:** Link thematically connected questions across history sub-categories (e.g., colonial independence questions link to each other).

    Process these files:
    1. `american-history-colonial.ts` - 13 questions (HIST-C01-13). Historical context explanations.
    2. `american-history-1800s.ts` - 7 questions (HIST-101-107). Civil War era context.
    3. `american-history-recent.ts` - 10 questions (HIST-R01-10). Modern history context.
    4. `symbols-holidays.ts` - 13 questions (SYM-01-13). Fun facts are especially relevant here.

    Import `Explanation` type from `@/types` in each file if not already imported.
  </action>
  <verify>
    Run `npx tsc --noEmit` - no type errors. Verify full coverage across ALL 6 files:
    ```bash
    grep -c "explanation:" src/constants/questions/*.ts
    ```
    All 100 questions (57 from Task 2a + 43 from Task 2b) should now have explanation field.
  </verify>
  <done>
    43 History and Symbols questions have bilingual explanation content. Fun facts included for symbols/holidays. All 100 questions across all 6 files now have complete bilingual explanations. Related question links connect thematically similar questions across sub-categories.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. All 100 questions have explanation.brief_en and explanation.brief_my populated
3. Constitutional questions (GOV-P*, RR-*) have citation field where applicable
4. USCIS_CATEGORIES maps all 7 sub-categories to 3 main categories correctly
5. No existing functionality broken (questions still render in test/study pages)
</verification>

<success_criteria>
- Explanation type is defined and exported from src/types/index.ts
- USCIS category mapping with 3 main categories, colors, and bilingual names exists
- 100% of questions have explanation.brief_en and explanation.brief_my
- TypeScript compiles without errors
- Existing test and study guide pages still function (no breaking changes)
</success_criteria>

<output>
After completion, create `.planning/phases/04-learning-explanations-category-progress/04-01-SUMMARY.md`
</output>
