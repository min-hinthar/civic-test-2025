---
phase: 03-ui-ux-bilingual-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/globals.css
  - src/styles/animations.css
  - src/lib/design-tokens.ts
  - tailwind.config.js
  - src/pages/_app.tsx
autonomous: true

must_haves:
  truths:
    - "Noto Sans Myanmar font loads offline (bundled, not CDN)"
    - "Multi-shade blue color system available via CSS variables"
    - "All spacing follows consistent scale (4px base)"
    - "Shimmer animation keyframes defined"
  artifacts:
    - path: "src/lib/design-tokens.ts"
      provides: "Color palette constants, spacing scale, animation timing"
      exports: ["colors", "spacing", "timing"]
    - path: "src/styles/animations.css"
      provides: "Shimmer, pulse, and fade keyframe animations"
      contains: "@keyframes shimmer"
    - path: "src/styles/globals.css"
      provides: "Updated CSS variables for blue color system"
      contains: "--primary-50"
  key_links:
    - from: "tailwind.config.js"
      to: "src/lib/design-tokens.ts"
      via: "Extended color palette"
      pattern: "primary-50|primary-100"
    - from: "src/pages/_app.tsx"
      to: "@fontsource/noto-sans-myanmar"
      via: "Import statement"
      pattern: "@fontsource/noto-sans-myanmar"
---

<objective>
Install design foundation: self-hosted Myanmar font, multi-shade blue color system, spacing scale, and animation keyframes.

Purpose: Establishes the visual foundation that all subsequent UI work builds upon. Self-hosted fonts ensure offline PWA support. Color system enables the patriotic blue palette per user decision.

Output: Design tokens file, updated globals.css with blue shades, animation keyframes, Tailwind config extended with new colors.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-ui-ux-bilingual-polish/03-CONTEXT.md
@.planning/phases/03-ui-ux-bilingual-polish/03-RESEARCH.md
@src/styles/globals.css
@tailwind.config.js
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and self-host Myanmar font</name>
  <files>
    package.json
    src/pages/_app.tsx
  </files>
  <action>
Install the Phase 3 core dependencies:

```bash
pnpm add motion @radix-ui/react-dialog @radix-ui/react-toast @radix-ui/react-progress @fontsource/noto-sans-myanmar react-canvas-confetti react-countup react-countdown-circle-timer react-joyride react-swipeable
```

In `src/pages/_app.tsx`, add font imports at the top of the file (after React imports, before component imports):

```typescript
// Self-hosted Myanmar font (PWA offline support)
import '@fontsource/noto-sans-myanmar/400.css';
import '@fontsource/noto-sans-myanmar/500.css';
import '@fontsource/noto-sans-myanmar/700.css';
```

This replaces the Google Fonts CDN import in globals.css (remove the @import url line for Noto Sans Myanmar from globals.css).

Keep the Inter font from Google Fonts for now (it's not critical for offline as most systems have similar sans-serif).
  </action>
  <verify>
Run `pnpm install` completes without errors.
Check `node_modules/@fontsource/noto-sans-myanmar` exists.
Verify _app.tsx imports the font.
  </verify>
  <done>
Myanmar font bundled via Fontsource (not CDN), all Phase 3 libraries installed.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create design tokens and extend Tailwind color palette</name>
  <files>
    src/lib/design-tokens.ts
    tailwind.config.js
  </files>
  <action>
Create `src/lib/design-tokens.ts` with the patriotic blue color system and timing constants:

```typescript
/**
 * Design tokens for Phase 3: UI/UX Polish
 * Multi-shade blue system inspired by Duolingo energy with patriotic feel
 */

// Blue palette - primary accent (HSL values for Tailwind)
export const colors = {
  // Primary blue shades (patriotic, confident)
  primary: {
    50: '214 100% 97%',   // Lightest - surfaces, backgrounds
    100: '214 95% 93%',   // Light hover states
    200: '213 97% 87%',   // Light accents
    300: '212 96% 78%',   // Medium accents
    400: '213 94% 68%',   // Interactive elements
    500: '217 91% 60%',   // Primary buttons, links (main blue)
    600: '221 83% 53%',   // Hover on primary
    700: '224 76% 48%',   // Active/pressed states
    800: '226 71% 40%',   // Dark text on light
    900: '224 64% 33%',   // Darkest blue
  },
  // Success green (correct answers, progress)
  success: {
    50: '142 76% 95%',
    100: '141 84% 86%',
    500: '142 71% 45%',
    600: '142 76% 36%',
  },
  // Warning orange (wrong answers - soft, not alarming)
  warning: {
    50: '38 92% 95%',
    100: '39 96% 89%',
    500: '32 95% 52%',   // Soft orange for wrong answers
    600: '26 90% 45%',
  },
  // Patriotic red (decorative only - stars, stripes, never errors)
  patriotic: {
    500: '0 72% 51%',    // American red
    600: '0 74% 42%',
  },
};

// Spacing scale (4px base)
export const spacing = {
  px: '1px',
  0: '0',
  0.5: '0.125rem',  // 2px
  1: '0.25rem',     // 4px
  1.5: '0.375rem',  // 6px
  2: '0.5rem',      // 8px
  2.5: '0.625rem',  // 10px
  3: '0.75rem',     // 12px
  4: '1rem',        // 16px
  5: '1.25rem',     // 20px
  6: '1.5rem',      // 24px
  8: '2rem',        // 32px
  10: '2.5rem',     // 40px
  12: '3rem',       // 48px
  16: '4rem',       // 64px
  20: '5rem',       // 80px
  24: '6rem',       // 96px
};

// Animation timing (snappy per user decision: 150-250ms)
export const timing = {
  instant: '0ms',
  fast: '150ms',
  normal: '200ms',
  slow: '250ms',
  page: '300ms',     // Page transitions only
};

// Border radius (bubbly, friendly per user decision: 16px+)
export const radius = {
  sm: '0.5rem',      // 8px
  md: '0.75rem',     // 12px
  lg: '1rem',        // 16px - minimum for phase 3
  xl: '1.25rem',     // 20px
  '2xl': '1.5rem',   // 24px
  '3xl': '2rem',     // 32px
  full: '9999px',    // Pill buttons
};

// Spring physics for Motion animations (Duolingo-style tactile feedback)
export const springs = {
  button: { type: 'spring', stiffness: 400, damping: 17 },
  gentle: { type: 'spring', stiffness: 300, damping: 20 },
  bouncy: { type: 'spring', stiffness: 500, damping: 15 },
};
```

Update `tailwind.config.js` to extend colors with the new blue shades. Add to the `extend.colors` section:

```javascript
// Add these inside extend.colors:
'primary-50': 'hsl(214 100% 97%)',
'primary-100': 'hsl(214 95% 93%)',
'primary-200': 'hsl(213 97% 87%)',
'primary-300': 'hsl(212 96% 78%)',
'primary-400': 'hsl(213 94% 68%)',
'primary-500': 'hsl(217 91% 60%)',
'primary-600': 'hsl(221 83% 53%)',
'primary-700': 'hsl(224 76% 48%)',
'primary-800': 'hsl(226 71% 40%)',
'primary-900': 'hsl(224 64% 33%)',
success: {
  50: 'hsl(142 76% 95%)',
  100: 'hsl(141 84% 86%)',
  500: 'hsl(142 71% 45%)',
  600: 'hsl(142 76% 36%)',
},
warning: {
  50: 'hsl(38 92% 95%)',
  100: 'hsl(39 96% 89%)',
  500: 'hsl(32 95% 52%)',
  600: 'hsl(26 90% 45%)',
},
patriotic: {
  500: 'hsl(0 72% 51%)',
  600: 'hsl(0 74% 42%)',
},
```

Also add the border radius extensions:

```javascript
// Add to extend.borderRadius:
'3xl': '2rem',
'4xl': '2.5rem',
```
  </action>
  <verify>
Run `pnpm run build` - no TypeScript errors.
Check tailwind.config.js has new color classes.
Import design-tokens.ts in a test file to verify exports.
  </verify>
  <done>
Design tokens exported, Tailwind extended with multi-shade blue palette and larger radii.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update globals.css with animation keyframes and CSS variables</name>
  <files>
    src/styles/globals.css
    src/styles/animations.css
  </files>
  <action>
Create `src/styles/animations.css` with reusable animation keyframes:

```css
/* Phase 3: Animation Keyframes */

/* Shimmer for skeleton loaders */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    hsl(var(--muted)) 0%,
    hsl(var(--muted-foreground) / 0.1) 50%,
    hsl(var(--muted)) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Reduced motion: disable shimmer */
@media (prefers-reduced-motion: reduce) {
  .skeleton-shimmer {
    animation: none;
    background: hsl(var(--muted));
  }
}

/* Pulse glow for focus states */
@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 0 0 hsl(var(--primary) / 0.4);
  }
  50% {
    box-shadow: 0 0 0 8px hsl(var(--primary) / 0);
  }
}

/* Fade in for staggered list items */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.3s ease-out forwards;
}

/* Breathing animation for pre-test calming */
@keyframes breathe {
  0%, 100% {
    transform: scale(1);
    opacity: 0.7;
  }
  50% {
    transform: scale(1.15);
    opacity: 1;
  }
}

.animate-breathe {
  animation: breathe 4s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .animate-breathe {
    animation: none;
    opacity: 1;
  }
}

/* Flame flicker for streak icon */
@keyframes flame-flicker {
  0%, 100% {
    transform: scaleY(1) scaleX(1);
    filter: brightness(1);
  }
  25% {
    transform: scaleY(1.05) scaleX(0.95);
    filter: brightness(1.1);
  }
  50% {
    transform: scaleY(0.95) scaleX(1.02);
    filter: brightness(0.95);
  }
  75% {
    transform: scaleY(1.02) scaleX(0.98);
    filter: brightness(1.05);
  }
}

.animate-flame {
  animation: flame-flicker 0.5s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .animate-flame {
    animation: none;
  }
}
```

Update `src/styles/globals.css`:

1. Remove the Google Fonts @import line for Noto Sans Myanmar (keep Inter if present)

2. Update the :root CSS variables to add the extended blue shades:

```css
/* Add after existing :root variables */
:root {
  /* ... existing variables ... */

  /* Extended primary blue shades */
  --primary-50: 214 100% 97%;
  --primary-100: 214 95% 93%;
  --primary-200: 213 97% 87%;
  --primary-300: 212 96% 78%;
  --primary-400: 213 94% 68%;
  --primary-500: 217 91% 60%;
  --primary-600: 221 83% 53%;
  --primary-700: 224 76% 48%;
  --primary-800: 226 71% 40%;
  --primary-900: 224 64% 33%;

  /* Feedback colors */
  --success: 142 71% 45%;
  --success-foreground: 0 0% 100%;
  --warning: 32 95% 52%;
  --warning-foreground: 0 0% 100%;

  /* Update primary to use the 500 shade for consistency */
  --primary: 217 91% 60%;
}

.dark {
  /* ... existing dark variables ... */

  /* Dark mode blue shades (adjusted for dark backgrounds) */
  --primary-50: 224 71% 15%;
  --primary-100: 224 68% 20%;
  --primary-200: 223 65% 28%;
  --primary-300: 220 62% 38%;
  --primary-400: 218 70% 50%;
  --primary-500: 217 85% 60%;
  --primary-600: 215 90% 68%;
  --primary-700: 213 95% 76%;
  --primary-800: 212 97% 84%;
  --primary-900: 211 100% 92%;

  /* Feedback colors for dark mode */
  --success: 142 71% 50%;
  --warning: 32 95% 58%;
}
```

3. Add import for animations.css at the top (after tailwind directives):

```css
@import './animations.css';
```

4. Update the font-family in body to prioritize self-hosted Myanmar font:

```css
body {
  font-family:
    'Inter',
    'Noto Sans Myanmar',
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    sans-serif;
}
```

5. Add custom focus ring style (thick blue per user decision):

```css
/* Custom focus rings */
.focus-ring {
  outline: none;
}

.focus-ring:focus-visible {
  outline: 3px solid hsl(var(--primary-500));
  outline-offset: 2px;
}
```
  </action>
  <verify>
Run `pnpm run dev` - app loads without CSS errors.
Open DevTools, check that shimmer animation is defined.
Verify --primary-500 variable exists in computed styles.
  </verify>
  <done>
Animation keyframes defined, blue shade CSS variables added to globals.css, animations.css created and imported.
  </done>
</task>

</tasks>

<verification>
1. `pnpm run build` completes without errors
2. Myanmar font files exist in node_modules/@fontsource/noto-sans-myanmar
3. DevTools shows --primary-500 CSS variable
4. Shimmer animation class works (test by adding to an element)
5. Import `colors, spacing, timing` from design-tokens.ts works
</verification>

<success_criteria>
- All Phase 3 npm dependencies installed
- Myanmar font self-hosted (no CDN dependency)
- Multi-shade blue CSS variables available (--primary-50 through --primary-900)
- Animation keyframes (shimmer, breathe, fade-in-up, flame-flicker) defined
- Design tokens TypeScript file exports colors, spacing, timing, springs
- App builds and runs without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-ui-ux-bilingual-polish/03-01-SUMMARY.md`
</output>
