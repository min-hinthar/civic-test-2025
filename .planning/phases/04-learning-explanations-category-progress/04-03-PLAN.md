---
phase: 04-learning-explanations-category-progress
plan: 03
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - src/components/explanations/ExplanationCard.tsx
  - src/components/explanations/WhyButton.tsx
  - src/components/explanations/RelatedQuestions.tsx
  - src/lib/i18n/strings.ts
autonomous: true

must_haves:
  truths:
    - "ExplanationCard shows bilingual explanation with English on top, Burmese below"
    - "WhyButton is a compact trigger that expands to show ExplanationCard"
    - "RelatedQuestions shows inline-expandable links to related questions"
    - "All explanation text uses the BilingualText stacked pattern"
    - "Components respect prefers-reduced-motion"
  artifacts:
    - path: "src/components/explanations/ExplanationCard.tsx"
      provides: "Expandable bilingual explanation display with mnemonic, citation, fun fact, common mistake sections"
      exports: ["ExplanationCard"]
    - path: "src/components/explanations/WhyButton.tsx"
      provides: "Compact 'Why?' trigger button that toggles ExplanationCard visibility"
      exports: ["WhyButton"]
    - path: "src/components/explanations/RelatedQuestions.tsx"
      provides: "See also section with inline-expandable related question links"
      exports: ["RelatedQuestions"]
  key_links:
    - from: "src/components/explanations/ExplanationCard.tsx"
      to: "src/types/index.ts"
      via: "Explanation type import"
      pattern: "import.*Explanation"
    - from: "src/components/explanations/WhyButton.tsx"
      to: "src/components/explanations/ExplanationCard.tsx"
      via: "renders ExplanationCard"
      pattern: "ExplanationCard"
---

<objective>
Build the reusable explanation UI components: ExplanationCard, WhyButton, and RelatedQuestions.

Purpose: These components are shared across test mode (brief hints), review screen, and study guide flashcards. Building them as standalone reusable components before integration ensures consistency.

Output: Three explanation display components with animations, bilingual support, and accessibility.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-learning-explanations-category-progress/04-CONTEXT.md
@.planning/phases/04-learning-explanations-category-progress/04-RESEARCH.md
@src/types/index.ts
@src/components/bilingual/BilingualHeading.tsx
@src/components/ui/Card.tsx
@src/lib/i18n/strings.ts
@src/lib/design-tokens.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ExplanationCard, WhyButton, and RelatedQuestions components</name>
  <files>
    src/components/explanations/ExplanationCard.tsx,
    src/components/explanations/WhyButton.tsx,
    src/components/explanations/RelatedQuestions.tsx
  </files>
  <action>
    1. **ExplanationCard.tsx** - Expandable bilingual explanation display:
       - Props: `explanation: Explanation`, `isCorrect?: boolean`, `defaultExpanded?: boolean`, `className?: string`
       - Collapsed state: shows "Why? / ဘာကြောင့်လဲ" with Lightbulb icon and chevron
       - Expanded state (AnimatePresence + motion.div with height animation):
         - Brief explanation: EN text on top, MY text below in text-muted-foreground with font-myanmar
         - Common mistake section (if isCorrect === false AND commonMistake_en exists): orange-tinted card with AlertTriangle icon, "Common mistake" / "အများဖြစ်တတ်သောအမှား" header
         - Mnemonic section (if exists): primary-tinted card with Brain/Lightbulb icon, "Memory tip / မှတ်မိစေဖို့" header
         - Citation (if exists): small text with BookOpen icon
         - Fun fact (if exists): card with Sparkles icon, fun fact EN + MY
         - RelatedQuestions component at bottom (if relatedQuestionIds exists)
       - 44px minimum touch target on trigger button
       - Respect prefers-reduced-motion (skip height animation, just toggle visibility)
       - Use motion/react for animations (matching codebase pattern)
       - Use design token classes (bg-card, text-foreground, etc.)

    2. **WhyButton.tsx** - Compact inline trigger:
       - Props: `explanation: Explanation`, `isCorrect?: boolean`, `compact?: boolean`
       - Renders a small rounded button with "Why?" / "ဘာကြောင့်" text
       - When clicked, renders ExplanationCard below (uses internal expanded state)
       - compact mode: just the icon + "Why?" text, no Burmese
       - Use primary text color for the trigger
       - Min height 44px for touch accessibility

    3. **RelatedQuestions.tsx** - "See also" section:
       - Props: `questionIds: string[]`, `allQuestions: Question[]`
       - Renders "See also / ဆက်စပ်မေးခွန်းများ" header
       - Lists related questions as expandable inline links
       - Each link shows question text (EN) when clicked, expanding to show the full question + answer + explanation
       - Uses AnimatePresence for expand/collapse
       - Stays in current view (no navigation, per CONTEXT.md decision)
  </action>
  <verify>
    `npx tsc --noEmit` passes. Components render without errors when imported.
  </verify>
  <done>
    ExplanationCard renders bilingual explanation with all optional sections (mnemonic, citation, fun fact, common mistake, related questions). WhyButton provides compact trigger. RelatedQuestions shows inline-expandable related question links. All components respect reduced motion and use design tokens.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add bilingual strings for explanation UI</name>
  <files>src/lib/i18n/strings.ts</files>
  <action>
    Add new `explanations` section to the strings object:

    ```typescript
    explanations: {
      why: { en: 'Why?', my: 'ဘာကြောင့်လဲ' },
      memoryTip: { en: 'Memory tip', my: 'မှတ်မိစေဖို့' },
      commonMistake: { en: 'Common mistake', my: 'အများဖြစ်တတ်သောအမှား' },
      funFact: { en: 'Fun fact', my: 'စိတ်ဝင်စားဖွယ်' },
      seeAlso: { en: 'See also', my: 'ဆက်စပ်မေးခွန်းများ' },
      source: { en: 'Source', my: 'အရင်းအမြစ်' },
      showExplanation: { en: 'Show explanation', my: 'ရှင်းလင်းချက်ပြပါ' },
      hideExplanation: { en: 'Hide explanation', my: 'ရှင်းလင်းချက်ဝှက်ပါ' },
    },
    ```

    Also add strings for the progress/mastery features that will be needed soon:
    ```typescript
    progress: {
      categoryProgress: { en: 'Category Progress', my: 'အမျိုးအစား တိုးတက်မှု' },
      mastery: { en: 'Mastery', my: 'ကျွမ်းကျင်မှု' },
      practiceNow: { en: 'Practice Now', my: 'ယခုလေ့ကျင့်ပါ' },
      reviewInGuide: { en: 'Review in Study Guide', my: 'လေ့လာမှုအညွှန်းတွင်ပြန်ကြည့်ပါ' },
      suggestedFocus: { en: 'Suggested Focus', my: 'အကြံပြုလေ့လာရန်' },
      notStarted: { en: 'Not started', my: 'မစတင်ရသေး' },
      bronze: { en: 'Bronze', my: 'ကြေး' },
      silver: { en: 'Silver', my: 'ငွေ' },
      gold: { en: 'Gold', my: 'ရွှေ' },
      questionsCorrect: { en: 'correct', my: 'မှန်' },
      overallReadiness: { en: 'Overall Readiness', my: 'အလုံးစုံ အဆင်သင့်ဖြစ်မှု' },
      masteryTrend: { en: 'Mastery Trend', my: 'ကျွမ်းကျင်မှုလမ်းကြောင်း' },
    },

    practice: {
      practiceMode: { en: 'Practice Mode', my: 'လေ့ကျင့်မှုမုဒ်' },
      selectCategory: { en: 'Select Category', my: 'အမျိုးအစားရွေးပါ' },
      questionCount: { en: 'Question Count', my: 'မေးခွန်းအရေအတွက်' },
      quick: { en: 'Quick (5)', my: 'အမြန် (၅)' },
      standard: { en: 'Standard (10)', my: 'ပုံမှန် (၁၀)' },
      full: { en: 'Full', my: 'အပြည့်' },
      startPractice: { en: 'Start Practice', my: 'လေ့ကျင့်မှုစတင်ပါ' },
      practiceComplete: { en: 'Practice Complete', my: 'လေ့ကျင့်မှုပြီးပါပြီ' },
      masteryUpdate: { en: 'Mastery Updated', my: 'ကျွမ်းကျင်မှု အပ်ဒိတ်ပြီးပါပြီ' },
      practiceAllWeak: { en: 'Practice All Weak Areas', my: 'အားနည်းသောအပိုင်းများအားလုံး လေ့ကျင့်ပါ' },
      alreadyMastered: { en: 'This is mastered! Want to practice', my: 'ဒါကို ကျွမ်းကျင်ပြီးပါပြီ! လေ့ကျင့်လိုပါသလား' },
      practiceAnyway: { en: 'Practice anyway', my: 'ဆက်လေ့ကျင့်ပါ' },
      practiceSessions: { en: 'Practice Sessions', my: 'လေ့ကျင့်မှုမှတ်တမ်း' },
      timer: { en: 'Timer', my: 'အချိန်တိုင်း' },
      timerOff: { en: 'Off', my: 'ပိတ်' },
      timerOn: { en: 'On', my: 'ဖွင့်' },
    },
    ```
  </action>
  <verify>
    `npx tsc --noEmit` passes. Strings are accessible via `strings.explanations.why`, `strings.progress.mastery`, etc.
  </verify>
  <done>
    All bilingual strings for explanation, progress, and practice features added to centralized strings file. Strings follow existing pattern with { en, my } structure.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. ExplanationCard renders with all sections (brief, mnemonic, citation, fun fact, common mistake)
3. WhyButton toggles ExplanationCard visibility
4. RelatedQuestions shows expandable inline links
5. All text uses bilingual strings from centralized strings file
6. Components use design tokens, not hardcoded colors
</verification>

<success_criteria>
- ExplanationCard, WhyButton, and RelatedQuestions are importable components
- All components use motion/react animations with reduced-motion support
- Bilingual strings added for explanations, progress, and practice sections
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-learning-explanations-category-progress/04-03-SUMMARY.md`
</output>
