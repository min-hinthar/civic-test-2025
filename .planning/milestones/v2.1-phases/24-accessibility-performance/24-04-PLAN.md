---
phase: 24-accessibility-performance
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/study/Flashcard3D.tsx
  - src/components/sort/SwipeableCard.tsx
  - src/components/sort/SwipeableStack.tsx
  - src/components/quiz/StreakReward.tsx
  - src/components/session/SessionCountdown.tsx
autonomous: true

must_haves:
  truths:
    - "Reduced motion preference shows alternative fade animations instead of disabling all animation"
    - "Flashcard flip under reduced motion uses a quick crossfade (not instant jump, not full 3D rotation)"
    - "Sort swipe under reduced motion uses a quick horizontal slide (not full spring physics)"
    - "Celebrations under reduced motion show static badge/score without animation"
  artifacts:
    - path: "src/components/study/Flashcard3D.tsx"
      provides: "Reduced motion alternative for 3D flip"
      contains: "shouldReduceMotion"
    - path: "src/components/sort/SwipeableCard.tsx"
      provides: "Reduced motion alternative for swipe gesture"
      contains: "shouldReduceMotion"
  key_links:
    - from: "src/components/study/Flashcard3D.tsx"
      to: "useReducedMotion"
      via: "hook import"
      pattern: "useReducedMotion"
---

<objective>
Audit and improve reduced motion alternatives across the app's key animation-heavy components. Replace instant-off motion with meaningful fade/subtle alternatives.

Purpose: Users who prefer reduced motion get smooth, non-nauseating alternatives instead of jarring instant transitions (A11Y-06).
Output: Updated animation components with alternative transitions for reduced motion preference.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@src/components/study/Flashcard3D.tsx
@src/components/sort/SwipeableCard.tsx
@src/components/sort/SwipeableStack.tsx
@src/components/quiz/StreakReward.tsx
@src/components/session/SessionCountdown.tsx
@src/hooks/useReducedMotion.ts
@.planning/phases/24-accessibility-performance/24-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Flashcard flip + sort swipe reduced motion alternatives</name>
  <files>src/components/study/Flashcard3D.tsx, src/components/sort/SwipeableCard.tsx, src/components/sort/SwipeableStack.tsx</files>
  <action>
    **Flashcard3D (Claude's discretion: subtle crossfade):**

    1. Currently uses `shouldReduceMotion ? { duration: 0 } : FLIP_SPRING` which causes an instant jump. This is jarring.

    2. Replace with a crossfade alternative when reduced motion is active:
       - Instead of `rotateY`, use opacity transition: front face fades out (opacity 1 -> 0 over 200ms), back face fades in (opacity 0 -> 1 over 200ms)
       - Keep the same `isFlipped` state logic
       - The motion.div animation changes:
         ```tsx
         shouldReduceMotion
           ? { opacity: 1 } // container stays visible, faces handle their own opacity
           : { rotateY: isFlipped ? 180 : 0 }
         ```
       - Front face: add `style={{ opacity: shouldReduceMotion ? (isFlipped ? 0 : 1) : undefined }}` with transition 200ms
       - Back face: add `style={{ opacity: shouldReduceMotion ? (isFlipped ? 1 : 0) : undefined }}` with transition 200ms
       - When reduced motion + flipped, remove `backfaceVisibility: hidden` since there's no 3D rotation
       - Use CSS transition for the opacity change, not motion/react animate (simpler, more reliable)

    **SwipeableCard (Claude's discretion: quick slide):**

    1. Currently uses drag + spring physics with rotation and overlays.
    2. Under reduced motion:
       - Disable drag entirely (`drag={shouldReduceMotion ? false : 'x'}`)
       - When committed via buttons (Know/Don't Know), use a quick linear slide off-screen (200ms, no spring bounce, no rotation)
       - Remove or reduce the rotation transform (no tilt during slide)
       - Keep the overlay fade (Know/Don't Know label) as-is since opacity changes are gentle
    3. Check that `useReducedMotion` is already imported. If not, add it.

    **SwipeableStack:**

    1. Under reduced motion, the stacked card depth transforms (scale, translateY) can remain -- they're static positioning, not animation.
    2. The card removal animation (spring up from below) should use a simple fade-in instead of scale+translate entrance.
  </action>
  <verify>
    - `pnpm run typecheck` passes
    - `pnpm run lint` passes
    - Grep for `shouldReduceMotion` in Flashcard3D.tsx, SwipeableCard.tsx
    - Code review: no `{ duration: 0 }` transitions remain (replaced with meaningful alternatives)
  </verify>
  <done>Flashcard flip uses crossfade under reduced motion. Swipe uses quick linear slide. No instant jumps.</done>
</task>

<task type="auto">
  <name>Task 2: Countdown + celebrations reduced motion alternatives</name>
  <files>src/components/session/SessionCountdown.tsx, src/components/quiz/StreakReward.tsx</files>
  <action>
    **SessionCountdown (Claude's discretion: numbers without bounce):**

    1. Check current reduced motion handling in SessionCountdown.
    2. Under reduced motion:
       - Numbers should still appear sequentially (5, 4, 3, 2, 1, Go!) with timing intact
       - Remove scale bounce/overshoot animation on each number
       - Use simple opacity fade (0 -> 1 -> 0) for each number transition
       - Keep the sound effects (countdown tick, go chime) -- audio is not affected by reduced motion
    3. If the component already handles reduced motion well, document it and move on.

    **StreakReward (locked decision: static for reduced motion):**

    1. Under reduced motion: show badge/score text WITHOUT scale animation or bounce
    2. Still show the milestone (text + icon), just without the entrance animation
    3. Pattern: `animate={shouldReduceMotion ? { opacity: 1 } : { opacity: 1, scale: [0.5, 1.2, 1] }}`
    4. The auto-hide timer should still work (milestone disappears after N seconds)
    5. Screen reader announcement (from Plan 03) works regardless of motion preference.

    **General audit:**

    1. Quickly grep for `{ duration: 0 }` across the codebase to find other instant-motion patterns.
    2. For any found in key user-facing components, replace with a 150-200ms fade or subtle transition.
    3. For animation utilities or test files, leave them as-is.
    4. Check PillTabBar -- the research mentions it has an existing useReducedMotion implementation. Verify it uses a meaningful alternative (not instant jump).
  </action>
  <verify>
    - `pnpm run typecheck` passes
    - `pnpm run lint` passes
    - Grep for `duration: 0` across components -- should be minimal (only in test utilities or non-visual code)
    - StreakReward shows static badge under reduced motion
  </verify>
  <done>Countdown uses opacity fade under reduced motion. Celebrations show static versions. No more instant-jump animations in user-facing components.</done>
</task>

</tasks>

<verification>
- `pnpm run typecheck` passes
- `pnpm run lint` passes
- `pnpm test:run` passes (no regressions)
- Key animation components (Flashcard3D, SwipeableCard, SessionCountdown, StreakReward) all have meaningful reduced motion alternatives
- No `{ duration: 0 }` in user-facing animation components
</verification>

<success_criteria>
- Reduced motion preference triggers fade/subtle alternatives, not disabling animation entirely
- Flashcard flip crossfades between faces (200ms)
- Sort swipe uses quick linear slide (no spring physics)
- Celebrations show static badge/score
- Countdown numbers fade without bounce
</success_criteria>

<output>
After completion, create `.planning/phases/24-accessibility-performance/24-04-SUMMARY.md`
</output>
