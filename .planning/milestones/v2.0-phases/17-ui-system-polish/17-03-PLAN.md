---
phase: 17-ui-system-polish
plan: 03
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - src/components/navigation/Sidebar.tsx
  - src/components/navigation/BottomTabBar.tsx
  - src/components/navigation/GlassHeader.tsx
  - src/components/navigation/NavItem.tsx
autonomous: true

must_haves:
  truths:
    - "Sidebar uses glass-heavy class with prismatic border visible on the right edge"
    - "BottomTabBar uses glass-heavy class with prismatic border visible on the top edge"
    - "GlassHeader uses glass-medium class with prismatic border"
    - "Navigation surfaces show frosted glass with animated rainbow border in both light and dark mode"
  artifacts:
    - path: "src/components/navigation/Sidebar.tsx"
      provides: "Sidebar with glass-heavy + prismatic border"
      contains: "glass-heavy"
    - path: "src/components/navigation/BottomTabBar.tsx"
      provides: "BottomTabBar with glass-heavy + prismatic border"
      contains: "glass-heavy"
    - path: "src/components/navigation/GlassHeader.tsx"
      provides: "GlassHeader with glass-medium + prismatic border"
      contains: "glass-medium"
  key_links:
    - from: "src/components/navigation/Sidebar.tsx"
      to: "src/styles/globals.css"
      via: "CSS class"
      pattern: "glass-heavy"
    - from: "src/components/navigation/BottomTabBar.tsx"
      to: "src/styles/globals.css"
      via: "CSS class"
      pattern: "glass-heavy"
---

<objective>
Apply glass-heavy and prismatic borders to all navigation surfaces: Sidebar, BottomTabBar, and GlassHeader.

Purpose: Satisfies UISYS-02 (navigation chrome uses glass-morphism). The navigation is the most visible chrome in the app.
Output: All three navigation components use tiered glass classes with animated prismatic borders.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/17-ui-system-polish/17-01-SUMMARY.md
@src/components/navigation/Sidebar.tsx
@src/components/navigation/BottomTabBar.tsx
@src/components/navigation/GlassHeader.tsx
@src/components/navigation/NavItem.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Upgrade Sidebar and GlassHeader with glass-heavy/medium + prismatic borders</name>
  <files>src/components/navigation/Sidebar.tsx, src/components/navigation/GlassHeader.tsx</files>
  <action>
  **Sidebar.tsx:**

  Replace the `glass-nav` class on the `<motion.aside>` with `glass-heavy prismatic-border glass-nav`:
  - Keep `glass-nav` for the gradient overlay (Plan 01 already simplified `.glass-nav` to gradient overlay + box-shadow only, with no backdrop-filter)
  - Add `glass-heavy` for the heavy blur/opacity tier
  - Add `prismatic-border` for the animated rainbow border
  - The prismatic-border `::before` pseudo-element will show the rainbow effect on all edges (the right edge is most visible since sidebar is against the left wall)
  - No globals.css edits needed here -- Plan 01 already handles the glass-nav refactor

  **GlassHeader.tsx:**

  Read the current GlassHeader component. It likely has inline glass styles or uses `glass-nav`. Replace with:
  - Add `glass-medium prismatic-border` classes to the header element
  - Remove any existing `backdrop-filter` inline styles or duplicate glass classes
  - Keep existing `sticky top-0` positioning and `z-30`
  </action>
  <verify>Run `npx next build` -- zero errors. In dev mode: sidebar shows frosted glass with rainbow border shimmer, GlassHeader shows medium glass with prismatic border.</verify>
  <done>Sidebar uses glass-heavy + prismatic-border, GlassHeader uses glass-medium + prismatic-border. Glass-nav simplified to gradient overlay only.</done>
</task>

<task type="auto">
  <name>Task 2: Upgrade BottomTabBar with glass-heavy + prismatic border and enhanced NavItem</name>
  <files>src/components/navigation/BottomTabBar.tsx, src/components/navigation/NavItem.tsx</files>
  <action>
  **BottomTabBar.tsx:**

  On the `<nav>` element, replace `glass-nav` with `glass-heavy prismatic-border glass-nav`:
  - `glass-heavy` provides the heavy blur tier
  - `prismatic-border` provides the animated rainbow border (top edge most visible since bar is at bottom)
  - `glass-nav` provides the gradient overlay

  Per user decision: "Bottom tab bar gets full glass with prismatic shimmer too" and "icon + label area is tappable (not full section strip)".

  The bottom tab bar currently has `min-w-[60px] min-h-[56px]` for utility buttons. These already meet the 44px minimum. Verify that NavItem's mobile variant also meets 44px -- the current NavItem mobile variant should already have adequate size.

  **NavItem.tsx:**

  Read NavItem.tsx. For the mobile variant, ensure:
  1. The active state indicator (pill/highlight) uses a spring animation from motion/react when switching tabs
  2. Active icon gets a subtle pop/scale effect when becoming active (per user decision: "Combined pop/scale on active icon + indicator slides with spring bounce")
  3. Import `SPRING_SNAPPY` from `@/lib/motion-config` for the indicator animation

  Add to the mobile NavItem's active state:
  - When `isActive` is true, wrap the icon in `<motion.div layoutId="mobile-active-pill">` with `SPRING_SNAPPY` transition to create a sliding indicator between tabs
  - OR: add `<motion.div initial={{ scale: 0.8 }} animate={{ scale: 1 }} transition={SPRING_SNAPPY}>` around the active icon for a pop effect

  Choose the approach that works cleanly with the existing NavItem structure. The `layoutId` approach is more premium but may cause layout issues with the scrollable tab bar. Prefer the simpler scale pop + background color transition approach if layoutId causes scroll issues.

  For the sidebar variant, add a similar pop effect on the active icon.
  </action>
  <verify>Run `npx next build` -- zero errors. In dev mode: bottom tab bar shows frosted glass with rainbow border. Tab switch shows icon pop animation.</verify>
  <done>BottomTabBar uses glass-heavy + prismatic-border. NavItem active state has spring pop animation on icon. Both mobile and sidebar variants have consistent active state feedback.</done>
</task>

</tasks>

<verification>
1. `npx next build` succeeds with zero errors
2. Sidebar.tsx contains `glass-heavy prismatic-border`
3. BottomTabBar.tsx contains `glass-heavy prismatic-border`
4. GlassHeader.tsx contains `glass-medium prismatic-border`
5. NavItem.tsx imports from `@/lib/motion-config`
6. Active tab icon has spring animation
</verification>

<success_criteria>
All three navigation surfaces (Sidebar, BottomTabBar, GlassHeader) display glass-morphism with animated prismatic borders. Tab switching has visible spring micro-interaction on the active icon.
</success_criteria>

<output>
After completion, create `.planning/phases/17-ui-system-polish/17-03-SUMMARY.md`
</output>
