---
phase: 17-ui-system-polish
plan: 07
type: execute
wave: 3
depends_on: ["17-02"]
files_modified:
  - src/components/animations/StaggeredList.tsx
  - src/components/animations/PageTransition.tsx
  - src/components/interview/InterviewSession.tsx
  - src/components/interview/InterviewSetup.tsx
  - src/components/interview/SelfGradeButtons.tsx
  - src/components/test/AnswerFeedback.tsx
  - src/components/test/PreTestScreen.tsx
  - src/components/srs/ReviewCard.tsx
autonomous: true

must_haves:
  truths:
    - "StaggeredList items enter with bouncy spring pop (visible overshoot) instead of simple fade"
    - "Page transitions use scale-down + fade on outgoing, slide-in on incoming"
    - "Interview session shows typing indicator dots during AI response wait"
    - "Success/error answer states show color pulse + animated icon (check bounces, X shakes)"
  artifacts:
    - path: "src/components/animations/StaggeredList.tsx"
      provides: "Bouncy spring stagger animations"
      contains: "SPRING_BOUNCY"
    - path: "src/components/animations/PageTransition.tsx"
      provides: "Scale-down + slide-in page transitions"
      contains: "scale"
    - path: "src/components/test/AnswerFeedback.tsx"
      provides: "Answer feedback with color pulse and animated icon"
      contains: "SPRING_BOUNCY"
  key_links:
    - from: "src/components/animations/StaggeredList.tsx"
      to: "src/lib/motion-config.ts"
      via: "import"
      pattern: "from.*motion-config"
    - from: "src/components/animations/PageTransition.tsx"
      to: "src/lib/motion-config.ts"
      via: "import"
      pattern: "from.*motion-config"
---

<objective>
Upgrade staggered list animations to bouncy springs, enhance page transitions with scale-down/slide-in, and add micro-interactions to interview and test components.

Purpose: Staggered lists and page transitions are the two most noticeable animation systems. Interview and test micro-interactions improve the core learning experience.
Output: All lists stagger with bounce, pages transition with scale, answer feedback has animated icons.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/17-ui-system-polish/17-02-SUMMARY.md
@src/components/animations/StaggeredList.tsx
@src/components/animations/PageTransition.tsx
@src/components/interview/InterviewSession.tsx
@src/components/test/AnswerFeedback.tsx
@src/components/srs/ReviewCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Upgrade StaggeredList to bouncy springs and PageTransition to scale-down</name>
  <files>src/components/animations/StaggeredList.tsx, src/components/animations/PageTransition.tsx</files>
  <action>
  **StaggeredList.tsx:**

  1. Import `SPRING_BOUNCY`, `STAGGER_DEFAULT` from `@/lib/motion-config`
  2. Update `itemVariants.visible.transition` from `{ type: 'spring', stiffness: 300, damping: 24 }` to use SPRING_BOUNCY (stiffness: 400, damping: 15) for more visible overshoot
  3. Update `itemVariants.hidden` from `{ opacity: 0, y: 10 }` to `{ opacity: 0, y: 20, scale: 0.9 }` for a more dramatic entrance (per user decision: "Staggered spring pop entrance")
  4. Update `itemVariants.visible` to include `scale: 1` alongside `opacity: 1, y: 0`
  5. Update default stagger timing from 80ms to use STAGGER_DEFAULT (60ms) for snappier feel
  6. Keep the reduced motion variants unchanged (instant, no animation)

  **PageTransition.tsx:**

  Per user decision: "Page transitions: Scale down + fade on outgoing page, slide in on incoming, shared element transitions"

  1. Import `SPRING_SNAPPY` from motion-config
  2. Update the variants:
     - `initial` (incoming page): `{ opacity: 0, scale: 0.97, x: dir === 'left' ? 30 : -30 }`
     - `enter` (current page): `{ opacity: 1, scale: 1, x: 0 }`
     - `exit` (outgoing page): `{ opacity: 0, scale: 0.95, x: dir === 'left' ? -15 : 15 }` (shorter slide distance on exit + scale down)
  3. Replace `pageTransition` with SPRING_SNAPPY for enter, and keep tween for exit (exit should be quick, not springy):
     ```
     const enterTransition = SPRING_SNAPPY;
     const exitTransition = { type: 'tween', ease: 'easeIn', duration: 0.15 };
     ```
  4. Use the appropriate transition per variant state. In motion/react, you can set per-variant transitions by nesting `transition` inside each variant, or use `transition` prop with `{ enter: ..., exit: ... }` pattern.
  5. Shared element transitions via `layoutId` are complex and cross-route; skip for now (the scale-down + slide-in is the primary improvement)
  </action>
  <verify>Run `npx next build` -- zero errors. In dev mode: staggered lists pop in with visible bounce. Page transitions scale down on exit.</verify>
  <done>StaggeredList items pop in with bouncy spring (scale 0.9→1 + y 20→0). PageTransition scales down on exit (0.95) and slides in on enter with spring.</done>
</task>

<task type="auto">
  <name>Task 2: Interview typing indicator, answer feedback animations, and SRS review card</name>
  <files>src/components/interview/InterviewSession.tsx, src/components/interview/InterviewSetup.tsx, src/components/interview/SelfGradeButtons.tsx, src/components/test/AnswerFeedback.tsx, src/components/test/PreTestScreen.tsx, src/components/srs/ReviewCard.tsx</files>
  <action>
  **InterviewSession.tsx:**

  Per user decision: "Interview simulation: Typing indicator dots during wait + pulsing prismatic glow when question appears"

  1. Read the current implementation to find where the interviewer "thinks" before asking a question
  2. During the waiting/thinking state, render three animated dots (typing indicator):
     ```tsx
     <motion.div className="flex gap-1.5 p-3">
       {[0, 1, 2].map(i => (
         <motion.span
           key={i}
           className="h-2.5 w-2.5 rounded-full bg-primary/60"
           animate={{ y: [0, -6, 0] }}
           transition={{ repeat: Infinity, duration: 0.6, delay: i * 0.15 }}
         />
       ))}
     </motion.div>
     ```
  3. When the question appears, wrap it in a `motion.div` with `initial={{ opacity: 0, scale: 0.98 }}` + `animate={{ opacity: 1, scale: 1 }}` + SPRING_GENTLE
  4. Add prismatic glow: `className="prismatic-border glass-light"` on the question container

  **InterviewSetup.tsx:**

  1. Apply glass-light + prismatic-border to the setup card
  2. Add entrance animation to the setup form

  **SelfGradeButtons.tsx:**

  1. Ensure buttons meet 48px minimum height (audit current size)
  2. Add whileTap scale and spring bounce using SPRING_BOUNCY

  **AnswerFeedback.tsx:**

  Per user decision: "Success/error states: Color pulse (green/red flash) AND animated icon (check bounces, X shakes)"

  1. Read current implementation
  2. For correct answer: add a green color pulse background flash:
     ```tsx
     <motion.div
       initial={{ backgroundColor: 'hsl(142 71% 45% / 0.3)' }}
       animate={{ backgroundColor: 'hsl(142 71% 45% / 0)' }}
       transition={{ duration: 0.6 }}
     />
     ```
  3. For the check icon on correct: `<motion.div animate={{ scale: [0, 1.2, 1] }} transition={SPRING_BOUNCY}>` (bounce in)
  4. For incorrect answer: red flash + X icon shake:
     ```tsx
     <motion.div animate={{ x: [0, -5, 5, -3, 3, 0] }} transition={{ duration: 0.4 }}>
     ```
  5. Apply glass-light to the feedback container for consistent styling

  **PreTestScreen.tsx:**

  1. Apply glass-medium to the pre-test screen card (it's a prominent single-focus screen)
  2. The breathing animation already exists -- keep it

  **ReviewCard.tsx:**

  1. Apply glass-light + prismatic-border to the review card surface
  2. Add whileTap spring feedback on the rating buttons
  3. Ensure the card flip or reveal animation uses SPRING_BOUNCY
  </action>
  <verify>Run `npx next build` -- zero errors. In dev mode: interview shows typing dots, correct answers show green flash + bouncing check, incorrect shows red flash + shaking X.</verify>
  <done>Interview has typing dots + prismatic question glow. Answer feedback has color pulse + animated check/X icons. SRS review cards have glass + spring interactions. Pre-test screen uses glass-medium.</done>
</task>

</tasks>

<verification>
1. `npx next build` succeeds with zero errors
2. StaggeredList uses SPRING_BOUNCY with scale: 0.9 in hidden variant
3. PageTransition uses scale: 0.95 in exit variant
4. InterviewSession has typing dots animation
5. AnswerFeedback has green/red pulse + animated icons
6. ReviewCard has glass-light + prismatic-border
</verification>

<success_criteria>
Lists stagger with bouncy springs, pages transition with scale-down/slide-in, interview has typing indicator, and answer feedback has animated success/error states.
</success_criteria>

<output>
After completion, create `.planning/phases/17-ui-system-polish/17-07-SUMMARY.md`
</output>
