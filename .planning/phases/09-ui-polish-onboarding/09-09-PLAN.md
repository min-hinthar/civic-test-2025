---
phase: 09-ui-polish-onboarding
plan: 09
type: execute
wave: 4
depends_on: ["09-01", "09-02"]
files_modified:
  - src/pages/TestPage.tsx
  - src/pages/PracticePage.tsx
autonomous: true

must_haves:
  truths:
    - "Test page has horizontal progress bar at top showing question number"
    - "Test page has circular timer for countdown alongside horizontal progress"
    - "Correct answers trigger animated happy star/checkmark icon + sound effect"
    - "Incorrect answers trigger gentle nudge icon + warning color feedback + sound effect"
    - "Test pages use 3D chunky buttons for answer options and actions"
    - "Practice page has consistent Duolingo visual treatment"
    - "Both pages are responsive and have dark mode support"
  artifacts:
    - path: "src/pages/TestPage.tsx"
      provides: "Overhauled test page with horizontal progress, icon reactions, sound"
      contains: "playCorrect"
    - path: "src/pages/PracticePage.tsx"
      provides: "Practice page with Duolingo visual treatment"
      contains: "rounded-2xl"
  key_links:
    - from: "src/pages/TestPage.tsx"
      to: "src/lib/audio/soundEffects.ts"
      via: "playCorrect/playIncorrect on answer feedback"
      pattern: "playCorrect|playIncorrect"
---

<objective>
Full overhaul of Test and Practice pages with horizontal progress bar, animated icon reactions for correct/incorrect answers, sound effects integration, and Duolingo visual treatment.

Purpose: The test experience should feel like a game -- immediate, satisfying feedback on every answer with visual and audio reactions.
Output: Redesigned TestPage.tsx and PracticePage.tsx with gamified feedback loop.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-ui-polish-onboarding/09-RESEARCH.md
@.planning/phases/09-ui-polish-onboarding/09-01-SUMMARY.md
@.planning/phases/09-ui-polish-onboarding/09-02-SUMMARY.md

@src/pages/TestPage.tsx
@src/pages/PracticePage.tsx
</context>

<instructions>
Use the /frontend-design skill for all UI design and implementation work in this phase. This is a locked user decision.

Key test page requirements (locked):
- Horizontal progress bar at top + circular timer for countdown
- Animated icon reactions for test feedback: happy star/checkmark for correct, gentle nudge for incorrect + color feedback
- Sound effects for correct/incorrect answers
- 3D chunky buttons
- Micro-interactions on all interactive elements
</instructions>

<tasks>

<task type="auto">
  <name>Task 1: Test Page Full Overhaul</name>
  <files>src/pages/TestPage.tsx</files>
  <action>
Full overhaul of TestPage.tsx with Duolingo-inspired test experience:

**Progress Bar (top of test area):**
- Horizontal progress bar spanning full width at top of test content
- Shows current question number / total (e.g., question 3 of 10)
- Animated fill using motion/react spring: width transitions smoothly as questions progress
- Color: primary-500 fill on muted background track
- Keep the existing circular countdown timer but position it NEXT TO (right of) the horizontal progress bar, not replacing it

**Answer Options:**
- Each answer option as a 3D chunky button with subtle lift on hover
- Full-width answer buttons on mobile, max-width on desktop
- Minimum 44px height for touch targets
- On selection: brief highlight before feedback

**Answer Feedback - Animated Icon Reactions (locked decision):**
- **Correct:**
  - Large animated checkmark or star icon (Check or Star from lucide-react)
  - Green color pulse: `bg-success-50 border-success-500` background flash
  - Icon bounces in with `motion.div` spring animation (`bouncy` spring: stiffness 500, damping 15)
  - Call `playCorrect()` from soundEffects.ts (import at top, call in event handler)
  - Brief confetti burst (existing Confetti component)

- **Incorrect:**
  - Gentle animated icon: a subtle shake/nudge (X or a sad face emoji)
  - Warning color feedback: `bg-warning-50 border-warning-500` background (orange, NOT red)
  - Icon gently shakes with `motion.div` wiggle: `animate={{ x: [0, -5, 5, -5, 0] }}` over 0.3s
  - Call `playIncorrect()` from soundEffects.ts
  - No harsh visual punishment -- encouraging tone

**Feedback display:**
- After selecting an answer, show the icon reaction + color feedback for 1.5 seconds (matching existing 1500ms delay from 03-08a)
- During feedback, correct answer is highlighted in green, selected wrong answer in orange
- WhyButton remains available during feedback pause

**Overall Styling:**
- Test question card: rounded-2xl, bold question text (font-semibold or font-bold)
- Bilingual question display with proper font-myanmar on Burmese text
- Page uses page-shell background
- Pre-test screen: 3D chunky "Start Test" button, rounded cards for options
- Results screen: bigger confetti, more celebratory, use `playMilestone()` or `playLevelUp()` for passing

**Technical:**
- Import `playCorrect`, `playIncorrect`, `playLevelUp` from `@/lib/audio/soundEffects`
- Call sound functions in the answer handler callback (event handler, NOT in useEffect -- React Compiler safe)
- Keep all existing test logic (timer, scoring, save, history) -- only change visuals and add sounds
  </action>
  <verify>Run `npx tsc --noEmit`. Verify soundEffects imports exist. Verify no useEffect calls sound functions (only event handlers). Verify horizontal progress bar element exists.</verify>
  <done>Test page has horizontal progress + circular timer, animated icon reactions (checkmark for correct, nudge for incorrect), sound effects, 3D buttons, and gamified feedback loop.</done>
</task>

<task type="auto">
  <name>Task 2: Practice Page Visual Refresh</name>
  <files>src/pages/PracticePage.tsx</files>
  <action>
Apply Duolingo visual treatment to PracticePage:

**Config Phase:**
- Category selection cards: rounded-2xl, category color accents (blue/amber/emerald per CATEGORY_COLORS)
- 3D chunky "Start Practice" button
- Mini CategoryRings with updated styling (more vibrant colors)
- Bold bilingual section headers

**Session Phase:**
- Same answer feedback pattern as TestPage: animated icon reactions + color feedback + sound effects
- Import and call `playCorrect()` / `playIncorrect()` from soundEffects
- Progress indicator at top
- 3D chunky answer buttons

**Results Phase:**
- Animated mastery ring update (existing)
- More celebratory: larger confetti burst, `playLevelUp()` on completion
- Encouraging bilingual messages
- 3D chunky "Practice Again" / "Back to Dashboard" buttons
- Patriotic emoji accents (star for improvement, eagle for mastery)

**Consistent with TestPage:**
- Same icon reaction components/patterns
- Same sound effect integration pattern
- Same 3D button styling
- Same responsive behavior
  </action>
  <verify>Run `npx tsc --noEmit`. Verify soundEffects imports exist. Verify 3D button classes present on primary actions.</verify>
  <done>Practice page has Duolingo visual treatment with 3D buttons, animated feedback, sound effects, and encouraging results screen.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes
- `npm run lint` passes
- TestPage imports from soundEffects.ts
- TestPage has horizontal progress bar element
- PracticePage imports from soundEffects.ts
- Both pages use 3D button styling
- No hardcoded red colors for incorrect answers (uses warning orange)
- Sound functions called from event handlers, not effects
</verification>

<success_criteria>
Test and Practice pages feel like a game with immediate visual + audio feedback. Correct = celebration, Incorrect = gentle encouragement. Progress is visible at top. All interactions are chunky and tactile.
</success_criteria>

<output>
After completion, create `.planning/phases/09-ui-polish-onboarding/09-09-SUMMARY.md`
</output>
