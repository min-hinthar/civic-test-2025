---
phase: 09-ui-polish-onboarding
plan: 10
type: execute
wave: 4
depends_on: ["09-01"]
files_modified:
  - src/pages/StudyGuidePage.tsx
  - src/components/flashcards/Flashcard3D.tsx
autonomous: true

must_haves:
  truths:
    - "Each flashcard has a category color header strip matching its USCIS category"
    - "American Government cards have blue header strip"
    - "American History cards have amber header strip"
    - "Integrated Civics cards have emerald header strip"
    - "Flashcard design uses 3D chunky aesthetic with rounded-2xl"
    - "Study guide page has Duolingo visual treatment with bold typography"
    - "Page is responsive and has dark mode support"
  artifacts:
    - path: "src/pages/StudyGuidePage.tsx"
      provides: "Study guide with Duolingo visual overhaul and category-colored flashcards"
      contains: "CATEGORY_COLORS"
    - path: "src/components/flashcards/Flashcard3D.tsx"
      provides: "Enhanced flashcard with category color header strip"
      contains: "categoryColor"
  key_links:
    - from: "src/pages/StudyGuidePage.tsx"
      to: "src/lib/mastery/categoryMapping.ts"
      via: "Category colors for header strips"
      pattern: "CATEGORY_COLORS|categoryMapping"
---

<objective>
Full overhaul of Study Guide page and Flashcard3D component with category color header strips per USCIS category, Duolingo visual treatment, and enhanced card designs.

Purpose: Flashcards should be visually distinct by category (color-coded) and feel premium with the new chunky aesthetic.
Output: Redesigned StudyGuidePage.tsx and Flashcard3D.tsx with category color system.
</objective>

<execution_context>
@C:\Users\minkk\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\minkk\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-ui-polish-onboarding/09-RESEARCH.md
@.planning/phases/09-ui-polish-onboarding/09-01-SUMMARY.md

@src/pages/StudyGuidePage.tsx
@src/components/flashcards/Flashcard3D.tsx
@src/lib/mastery/categoryMapping.ts
</context>

<instructions>
Use the /frontend-design skill for all UI design and implementation work in this phase. This is a locked user decision.

Key requirements (locked):
- Category color header strip per USCIS category on each card
- Full overhaul of flashcard visual design
- Duolingo aesthetic: rounded, bold, vibrant
</instructions>

<tasks>

<task type="auto">
  <name>Task 1: Add Category Color Header Strip to Flashcard3D</name>
  <files>src/components/flashcards/Flashcard3D.tsx</files>
  <action>
Enhance Flashcard3D component with category color header strip:

**New prop:** Add `categoryColor?: string` prop to Flashcard3D (or determine category from question data if available).

**Category Color Header Strip:**
- Add a 4-6px height strip at the top of the card using the category's color
- Colors (from CATEGORY_COLORS in categoryMapping.ts):
  - American Government (3 sub-cats): `bg-blue-500`
  - American History (3 sub-cats): `bg-amber-500`
  - Integrated Civics (1 sub-cat): `bg-emerald-500`
- The strip should be visible on both front and back of the card
- Use `overflow-hidden` on card container + `rounded-t-2xl` on the strip to match card radius

**Card Styling Updates:**
- Overall card: `rounded-2xl` (20px) with intense shadow
- Card border: subtle but visible `border border-border/60`
- Front face: question text with bold typography (font-semibold or font-bold)
- Back face: answer with explanation area
- Add subtle gradient overlay on card background for depth
- Dark mode: card background slightly lighter for contrast, strip colors remain vibrant

**Flip Animation:**
- Keep existing flip logic but enhance with motion/react springs
- Add a subtle 3D shadow shift on flip (shadow moves to opposite side)
- Maintain existing swipe gesture support (react-swipeable)

**Technical:**
- The category can be determined by looking up the question's category from categoryMapping.ts
- Or accept it as a prop passed from StudyGuidePage
- Either approach works -- choose the simpler one that doesn't require changing too many call sites
  </action>
  <verify>Run `npx tsc --noEmit`. Verify Flashcard3D accepts or derives category color. Verify color strip element exists in both front and back faces.</verify>
  <done>Flashcard3D has category color header strip, enhanced rounded styling, and dark mode support.</done>
</task>

<task type="auto">
  <name>Task 2: Study Guide Page Duolingo Visual Overhaul</name>
  <files>src/pages/StudyGuidePage.tsx</files>
  <action>
Full visual overhaul of StudyGuidePage:

**Header Section:**
- Bold page title (font-extrabold, text-3xl) with patriotic emoji (book + flag)
- Bilingual subtitle explaining the study guide
- Category filter pills/tabs: each with their category color accent
  - All Questions (primary blue)
  - American Government (blue)
  - American History (amber)
  - Integrated Civics (emerald)
- Tab styling: 3D chunky tabs with active indicator

**Flashcard Area:**
- Pass category color information to Flashcard3D for the header strip
- Determine each card's category using categoryMapping.ts lookup
- Enhanced navigation: 3D chunky prev/next buttons
- Card counter: "Card X of Y" with bold styling

**Tab Navigation (Study Guide / Deck / Review):**
- If the page has hash routing (#deck, #review), style tabs with Duolingo treatment:
  - Rounded tab buttons with active state
  - Icons next to each tab label (BookOpen, Layers, Brain)
  - Due count badge on Deck tab if applicable

**Search/Filter:**
- If search exists, round the input to `rounded-xl`
- If category filter exists, use colored pills matching category colors

**Empty States:**
- Encouraging bilingual message with patriotic emoji
- "No cards in this category" or "All caught up!" with star emoji

**Overall:**
- Page-shell background
- Stagger animations on card transitions
- Responsive: card fills screen width on mobile, centered with max-width on desktop
- All Burmese text with font-myanmar class
- 44px touch targets on all interactive elements
  </action>
  <verify>Run `npx tsc --noEmit`. Verify category colors are passed to Flashcard3D. Verify font-myanmar on Burmese text. Verify 3D button styling on navigation.</verify>
  <done>Study guide page has Duolingo visual treatment with category-colored flashcards, bold typography, 3D buttons, and responsive layout.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes
- `npm run lint` passes
- Flashcard3D has category color header strip
- StudyGuidePage passes category info to Flashcard3D
- Category colors match: blue (Government), amber (History), emerald (Civics)
- All interactive elements have 44px minimum touch target
- Dark mode works correctly on both components
</verification>

<success_criteria>
Study cards are visually distinct by category with color strips. Page has bold Duolingo feel with 3D navigation buttons and proper typography.
</success_criteria>

<output>
After completion, create `.planning/phases/09-ui-polish-onboarding/09-10-SUMMARY.md`
</output>
