---
phase: 29-visual-foundation
plan: 05
type: execute
wave: 2
depends_on:
  - 01
  - 02
  - 04
files_modified:
  - src/styles/globals.css
  - src/lib/motion-config.ts
  - src/styles/tokens.css
autonomous: true
requirements:
  - VISC-06

must_haves:
  truths:
    - "CSS glass tier transitions use the CSS duration/easing tokens from tokens.css"
    - "The JS spring system is documented as the authoritative motion layer for component animations"
    - "CSS duration tokens are documented as being for CSS-only transitions (glass hover, non-React elements)"
    - "motion-config.ts has updated JSDoc documenting its role as the primary animation system"
  artifacts:
    - path: "src/styles/globals.css"
      provides: "Glass tier transitions using CSS motion tokens"
      contains: "var(--duration-slow)"
    - path: "src/lib/motion-config.ts"
      provides: "Documented authoritative motion configuration"
    - path: "src/styles/tokens.css"
      provides: "Motion token usage documentation"
  key_links:
    - from: "src/styles/globals.css"
      to: "src/styles/tokens.css"
      via: "glass transitions consume CSS custom properties"
      pattern: "var\\(--duration-slow\\)"
---

<objective>
Unify motion tokens between CSS and JS systems.

Purpose: The project has two motion systems -- JS springs in motion-config.ts (93 usages across 35 files, the real system) and CSS duration tokens in tokens.css (registered in Tailwind but consumed by nothing). This creates confusion about which is authoritative (VISC-06). Wire CSS tokens to glass transitions and document the dual-system architecture.
Output: Glass transitions use CSS tokens; motion architecture documented in both systems.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/styles/globals.css
@src/lib/motion-config.ts
@src/styles/tokens.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Wire CSS motion tokens to glass tier transitions</name>
  <files>src/styles/globals.css</files>
  <action>
The three glass tier classes (`.glass-light`, `.glass-medium`, `.glass-heavy`) currently have hardcoded `transition: box-shadow 0.3s ease, transform 0.3s ease;` in their CSS.

Replace the hardcoded transition values with the CSS custom property tokens:

```css
.glass-light {
  /* ... existing properties ... */
  transition: box-shadow var(--duration-slow) var(--ease-out),
              transform var(--duration-slow) var(--ease-out);
}
```

Apply the same change to `.glass-medium` and `.glass-heavy`.

The values map: `0.3s` -> `var(--duration-slow)` (300ms), `ease` -> `var(--ease-out)` (cubic-bezier(0.16, 1, 0.3, 1)).

Note: The `.glass-card` backward-compat alias also has a hardcoded transition. Update it the same way.

Also update the `@supports not (backdrop-filter: blur(1px))` fallback section if it has any transition values.

This makes the glass system the first (and currently only) consumer of the CSS motion tokens, validating their existence.
  </action>
  <verify>
Run `npm run build` -- must succeed.
Run `npm run lint:css` -- must pass.
Run `grep "var(--duration-slow)" src/styles/globals.css` -- should return 3+ matches (one per glass tier).
  </verify>
  <done>All glass tier transitions use CSS custom property tokens instead of hardcoded values.</done>
</task>

<task type="auto">
  <name>Task 2: Document motion architecture in both systems</name>
  <files>src/lib/motion-config.ts, src/styles/tokens.css</files>
  <action>
**motion-config.ts:** Update the file-level JSDoc to document its role as the primary/authoritative motion system:

```typescript
/**
 * AUTHORITATIVE MOTION SYSTEM
 *
 * Spring animation configurations for the "playful + bouncy" personality.
 * This is the PRIMARY motion layer — consumed by 30+ components via motion/react.
 *
 * SPRING_BOUNCY: Primary interactions (button press, card tap) — visible overshoot
 * SPRING_SNAPPY: Secondary interactions (tab switch, indicator slide) — quick with slight bounce
 * SPRING_GENTLE: Large element animations (page transitions, progress fill) — smooth with subtle overshoot
 *
 * Motion architecture:
 * - JS springs (this file) → component animations via motion/react (primary)
 * - CSS tokens (tokens.css) → CSS-only transitions (glass hover effects, non-React elements)
 * - Both systems share the same timing personality (bouncy, spring-like)
 */
```

**tokens.css:** Update the Motion section comment to explain the dual-system role:

```css
/* ── Motion (CSS-only transitions) ── */
/* These tokens are for CSS transitions on non-React elements (glass hover effects,
 * pure-CSS animations). For React component animations, use the JS spring system
 * in src/lib/motion-config.ts (SPRING_BOUNCY, SPRING_SNAPPY, SPRING_GENTLE).
 *
 * Usage: var(--duration-slow), var(--ease-out), etc.
 * Consumers: .glass-light, .glass-medium, .glass-heavy transitions
 */
```
  </action>
  <verify>
Run `npm run build` -- must succeed.
Run `npm run lint:css` -- must pass.
Read motion-config.ts and tokens.css to confirm documentation is clear about dual-system architecture.
  </verify>
  <done>Both motion systems are documented with clear roles: JS springs for React components, CSS tokens for CSS-only transitions. Glass tiers are listed as the CSS token consumer.</done>
</task>

</tasks>

<verification>
- `npm run build` passes
- `npm run lint:css` passes
- Glass transitions use `var(--duration-slow)` and `var(--ease-out)`
- motion-config.ts documents itself as authoritative/primary
- tokens.css documents CSS motion tokens as secondary (CSS-only)
</verification>

<success_criteria>
The motion token split is resolved: JS springs are documented as the primary animation system, CSS tokens are wired to glass transitions as their first consumer, and both systems are documented with clear roles and boundaries.
</success_criteria>

<output>
After completion, create `.planning/phases/29-visual-foundation/29-05-SUMMARY.md`
</output>
