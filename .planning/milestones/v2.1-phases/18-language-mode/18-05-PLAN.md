---
phase: 18-language-mode
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/interview/InterviewSession.tsx
  - src/components/interview/InterviewResults.tsx
  - src/components/interview/AnswerReveal.tsx
autonomous: true

must_haves:
  truths:
    - "Interview follows global language mode -- English-only in English mode, bilingual in Myanmar mode"
    - "Interview TTS always speaks English for examiner questions regardless of language mode"
    - "Interview STT always recognizes English regardless of language mode"
    - "Examiner label 'USCIS Officer' is bilingual in Myanmar mode"
    - "Interview results page follows language mode for all bilingual content"
    - "AnswerReveal follows language mode for alternative answers and labels"
    - "Interview analytics logs which language mode was active"
  artifacts:
    - path: "src/components/interview/InterviewSession.tsx"
      provides: "Interview session that follows global language mode with English-only TTS/STT"
    - path: "src/components/interview/InterviewResults.tsx"
      provides: "Results page with consistent language mode behavior"
    - path: "src/components/interview/AnswerReveal.tsx"
      provides: "Answer reveal with consistent language mode behavior"
  key_links:
    - from: "src/components/interview/InterviewSession.tsx"
      to: "src/contexts/LanguageContext.tsx"
      via: "useLanguage() hook"
      pattern: "useLanguage"
---

<objective>
Ensure all three interview components consistently follow the global language mode. InterviewSession already has proper showBurmese guards -- this plan adds the examiner bilingual label, analytics tracking, and ensures InterviewResults and AnswerReveal are fully consistent.

Purpose: The interview must follow the global language mode with zero exceptions (per user decision override). TTS/STT stays English always (simulating USCIS officer), but visual content follows the mode.

Output: Updated InterviewSession.tsx, InterviewResults.tsx, AnswerReveal.tsx
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@src/components/interview/InterviewSession.tsx
@src/components/interview/InterviewResults.tsx
@src/components/interview/AnswerReveal.tsx
@src/contexts/LanguageContext.tsx
@src/hooks/useInterviewTTS.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Interview session examiner label + analytics</name>
  <files>src/components/interview/InterviewSession.tsx</files>
  <action>
InterviewSession.tsx already uses `useLanguage()` and has proper `showBurmese` guards on most content (verified in research). This task adds:

1. **Examiner label bilingual**: Search for any "USCIS Officer" or interviewer label text in the session. The InterviewerAvatar component is decorative, but if there's a label like "USCIS Officer" near it, make it bilingual:
```tsx
{/* If a label exists near the avatar: */}
<span className="text-xs text-muted-foreground">
  USCIS Officer
  {showBurmese && <span className="font-myanmar ml-1">· USCIS အရာရှိ</span>}
</span>
```
If no explicit label text exists near the avatar, add one in the greeting phase area (where the interviewer first appears). Check the greeting phase rendering section.

2. **Burmese question display in Myanmar mode**: Already implemented at line ~437-440. The Burmese translation appears simultaneously with English text as TTS plays (TTS is always English for examiner per `useInterviewTTS` which hardcodes `en-US`). No change needed here -- already correct.

3. **Analytics tracking**: Add a `console.debug` at session start (in the effect or handler that initializes the interview):
```typescript
console.debug('[analytics] interview_session_started', {
  mode,
  languageMode: mode_from_useLanguage
});
```
To avoid naming collision with the `mode` prop (InterviewMode), use the language context's `mode` directly:
```typescript
const { showBurmese, mode: languageMode } = useLanguage();
// ... in the session init:
console.debug('[analytics] interview_session_started', { interviewMode: mode, languageMode });
```

4. **Verify TTS stays English**: Confirm `useInterviewTTS` is used (already imported). It hardcodes `en-US` voice. No changes needed to TTS behavior.

5. **Verify STT stays English**: The `useAudioRecorder` hook records audio for self-grading (not ASR). If there is a speech recognition component, verify it uses English. Based on research, the interview uses self-grading buttons, not ASR -- so STT is not a concern for this component.
  </action>
  <verify>
- `npx tsc --noEmit` passes
- Examiner label (if added) shows bilingual in Myanmar mode
- Analytics console.debug call exists
- TTS hook still uses en-US (no regression)
  </verify>
  <done>InterviewSession has bilingual examiner label and analytics tracking. TTS/STT behavior unchanged (English-only as required).</done>
</task>

<task type="auto">
  <name>Task 2: Interview results and AnswerReveal language mode consistency</name>
  <files>
    src/components/interview/InterviewResults.tsx
    src/components/interview/AnswerReveal.tsx
  </files>
  <action>
**InterviewResults.tsx** already uses `showBurmese` guards extensively (verified in research). Ensure complete coverage:

1. **Check all text renders**: Review every text output in the component. The following are already gated:
   - Pass/fail banner Burmese (line ~313-321) ✓
   - End reason Burmese (line ~325-327) ✓
   - Encouragement Burmese (line ~355-358) ✓
   - Category Burmese names (line ~399-402) ✓
   - Trend chart Burmese (line ~461-463) ✓
   - Incorrect question Burmese (line ~487-489) ✓
   - Dashboard button Burmese (line ~557-563) ✓

2. **Add analytics**: Add a `console.debug` when results are saved:
```typescript
// Inside the saveAndLoad async function, after saving:
console.debug('[analytics] interview_session_completed', {
  interviewMode: mode,
  languageMode: showBurmese ? 'bilingual' : 'english-only',
  score,
  passed,
  endReason,
});
```

3. **Category names in English mode**: The category names currently show English via `USCIS_CATEGORIES[category].name.en`. In Myanmar mode, the Burmese name shows below. This is already correct -- no changes needed.

**AnswerReveal.tsx** already uses `showBurmese` guards (verified in research). Verify:

1. **Primary answer Burmese** (line ~73-76): Already gated with `showBurmese &&` ✓
2. **Alternative answers Burmese** (line ~92-95): Already gated with `showBurmese &&` ✓
3. **Labels**: The "Correct" label (line ~70) uses `strings.interview.correct.en` -- this is English-only. In Myanmar mode, the bilingual components handle Burmese display. Check if the "Also accepted" label at line ~84 uses BilingualText (it does). ✓

4. **No changes needed to AnswerReveal** if all Burmese text is already gated. If the executor agent finds any ungated Burmese during implementation, add `showBurmese` guards.

Note: If no changes are needed for AnswerReveal after verification, still confirm in the summary that it was audited and found correct.
  </action>
  <verify>
- `npx tsc --noEmit` passes
- All Burmese text in InterviewResults is inside `showBurmese &&` blocks
- Analytics console.debug exists in InterviewResults
- AnswerReveal has all Burmese text gated
  </verify>
  <done>InterviewResults has analytics tracking. Both InterviewResults and AnswerReveal verified for complete language mode consistency.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with zero errors
- `npm run lint` passes
- All three interview components follow global language mode
- TTS always uses English voice (no regression)
- Analytics stubs log language mode during sessions
</verification>

<success_criteria>
- InterviewSession shows bilingual examiner label in Myanmar mode
- InterviewResults and AnswerReveal have no ungated Burmese text
- Analytics console.debug tracks language mode for interview sessions
- TTS and STT behavior unchanged (always English for examiner)
- No TypeScript or ESLint errors
</success_criteria>

<output>
After completion, create `.planning/phases/18-language-mode/18-05-SUMMARY.md`
</output>
