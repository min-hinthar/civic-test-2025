---
phase: 14-unified-navigation
plan: 07
type: execute
wave: 6
depends_on: ["14-06"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User sees 6 tabs on mobile bottom bar and same 6 sections in desktop sidebar"
    - "Badge dots appear on Study tab (SRS count) in both mobile and desktop"
    - "Tab switches animate with direction-aware slide transitions"
    - "Navigation is locked during active mock test (grayed out, shake on tap)"
    - "Onboarding tour highlights nav items correctly on both mobile and desktop"
    - "Old routes (/dashboard, /progress, /history, /social) redirect correctly"
    - "Settings page has theme toggle in Appearance section"
    - "Build succeeds with zero errors"
  artifacts: []
  key_links: []
---

<objective>
Verify the entire Phase 14 unified navigation implementation works end-to-end. Build passes, all requirements satisfied, visual and functional verification.

Purpose: Confirm all NAV-01 through NAV-05 requirements are met before marking Phase 14 complete.
Output: Verification results
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-unified-navigation/14-CONTEXT.md
@.planning/phases/14-unified-navigation/14-06-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build verification and code quality checks</name>
  <files></files>
  <action>
Run a comprehensive verification suite:

1. **TypeScript compilation:** `npx tsc --noEmit` -- must pass with zero errors
2. **ESLint:** `npx eslint src/components/navigation/ src/AppShell.tsx src/pages/ src/components/animations/PageTransition.tsx src/components/onboarding/OnboardingTour.tsx --max-warnings 0`
3. **Build:** `npm run build` -- must succeed (catches issues TSC misses like Next.js-specific problems)
4. **Deleted file check:** Verify `src/components/AppNavigation.tsx` does not exist
5. **Zero references check:** `grep -r "AppNavigation" src/` returns zero results
6. **Route check:** Verify `/home` and `/hub` routes exist in AppShell, `/dashboard` and `/progress` redirect
7. **Nav config check:** Verify NAV_TABS has exactly 6 entries
8. **CSP check:** If any inline scripts were added, verify CSP hashes are updated. If only React components were added (no inline scripts), note that CSP is unaffected.

Fix any issues found. Common issues:
- Missing imports after file reorganization
- Unused imports from removed AppNavigation
- CSS variable references (verify --color-surface, --color-overlay exist in tokens.css)
- React Compiler ESLint violations (no setState in effects, no ref.current during render)
  </action>
  <verify>
All commands exit with code 0. `npm run build` succeeds. No TypeScript errors, no ESLint warnings.
  </verify>
  <done>
Build passes, zero TS errors, zero ESLint warnings, zero references to deleted AppNavigation, CSP unaffected (no new inline scripts).
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete unified navigation system for Phase 14:
- Desktop sidebar with glass-morphism, spring animations, expand/collapse
- Refactored mobile bottom bar with 6 tabs, glass-morphism, badges
- Route redirects (/dashboard->/home, /progress->/hub, /history,/social->/hub)
- Direction-aware page transitions
- Context-based test/interview lock
- Updated onboarding tour targeting nav items
- Settings Appearance section with theme toggle
- GlassHeader on landing and op-ed pages
  </what-built>
  <how-to-verify>
Start the dev server: `npm run dev`

**NAV-01: Consistent 6-tab navigation**
1. Open http://localhost:3000 in desktop browser (>=1280px wide)
2. Sign in -- verify sidebar appears on left with 6 tabs: Home, Study Guide, Mock Test, Interview, Progress Hub, Settings
3. Verify 3 utility controls below tabs: Language toggle, Theme toggle, Logout
4. Resize to tablet (768-1279px) -- verify sidebar collapses to icon-rail
5. Click the chevron toggle -- verify sidebar expands/collapses with spring animation
6. Resize to mobile (<768px) -- verify bottom bar shows 6 tabs + utility controls
7. Verify glass-morphism (translucent + backdrop-blur) on both surfaces

**NAV-02: Badge indicators**
8. Navigate to Study page and review some SRS cards to get a due count
9. Check that Study tab shows orange numeric badge on both mobile and desktop

**NAV-03: All features reachable**
10. Tap each of the 6 tabs -- verify all navigate to correct pages
11. No "More" menu exists -- all features are one tap away

**NAV-04: Smooth animations**
12. Switch between tabs -- verify direction-aware slide transitions
13. Scroll down on a long page -- verify nav hides (sidebar slides left, bottom bar slides down)
14. Scroll back up -- verify nav shows with spring animation
15. Check active tab has pill-shaped highlight with primary color

**NAV-05: Test lock**
16. Start a mock test -- verify all nav items become grayed out
17. Tap a locked item -- verify shake animation + toast message
18. Finish or quit the test -- verify nav unlocks

**Route redirects:**
19. Navigate to /dashboard -- verify redirect to /home
20. Navigate to /progress -- verify redirect to /hub
21. Navigate to /history -- verify brief spinner then redirect to /hub#history
22. Navigate to /social -- verify brief spinner then redirect to /hub#social

**Other checks:**
23. Visit landing page (/) -- verify glass header with Sign In button (no sidebar/bottom bar)
24. Visit op-ed page (/op-ed) -- verify glass header with Back button
25. Open Settings -- verify Appearance section has Language and Theme toggles
26. Toggle dark mode from Settings -- verify it works
27. Run onboarding tour (Settings -> Replay Onboarding Tour) -- verify it highlights nav items

Report any issues found.
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
- Build passes with zero errors
- All 5 requirements (NAV-01 through NAV-05) verified visually and functionally
- Route redirects work correctly
- Onboarding tour targets nav items
- Glass-morphism visible on both nav surfaces
- Dark mode works correctly with border glow on sidebar
</verification>

<success_criteria>
Phase 14 is complete when all NAV-01 through NAV-05 requirements are verified working. Build passes. User approves visual and functional behavior.
</success_criteria>

<output>
After completion, create `.planning/phases/14-unified-navigation/14-07-SUMMARY.md`
</output>
