---
phase: 17-ui-system-polish
plan: 06
type: execute
wave: 3
depends_on: ["17-02", "17-04"]
files_modified:
  - src/components/study/Flashcard3D.tsx
  - src/components/social/BadgeCelebration.tsx
  - src/components/celebrations/CountUpScore.tsx
  - src/components/dashboard/NBAHeroCard.tsx
  - src/components/dashboard/CompactStatRow.tsx
  - src/components/dashboard/RecentActivityCard.tsx
  - src/components/dashboard/CategoryPreviewCard.tsx
  - src/pages/Dashboard.tsx
autonomous: true

must_haves:
  truths:
    - "Flashcard flip uses spring bounce with slight overshoot past 180 degrees"
    - "Badge celebration shows prismatic ripple effect expanding outward"
    - "Dashboard NBA hero card uses GlassCard tier='medium' with prismatic border"
    - "Dashboard compact stat cards and preview cards use glass-light tier"
    - "100% mastery triggers prismatic burst + confetti celebration"
  artifacts:
    - path: "src/components/study/Flashcard3D.tsx"
      provides: "Flashcard with spring bounce flip animation"
      contains: "SPRING_BOUNCY"
    - path: "src/components/social/BadgeCelebration.tsx"
      provides: "Badge celebration with prismatic ripple effect"
      contains: "prismatic"
    - path: "src/components/dashboard/NBAHeroCard.tsx"
      provides: "NBA hero card with glass-medium tier"
      contains: "glass-medium"
  key_links:
    - from: "src/components/study/Flashcard3D.tsx"
      to: "src/lib/motion-config.ts"
      via: "import"
      pattern: "from.*motion-config"
    - from: "src/pages/Dashboard.tsx"
      to: "src/components/ui/GlassCard.tsx"
      via: "import"
      pattern: "GlassCard"
---

<objective>
Apply premium micro-interactions to the flashcard, badge celebrations, and dashboard components: spring-bounce flashcard flip, prismatic badge celebration, and glass tiers on dashboard cards.

Purpose: The flashcard and dashboard are the two most-used surfaces. Spring physics on the flip and glass on the dashboard complete the premium feel.
Output: Flashcard flips with bouncy spring, badges celebrate with prismatic ripple, dashboard cards use glass tiers.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/17-ui-system-polish/17-02-SUMMARY.md
@.planning/phases/17-ui-system-polish/17-04-SUMMARY.md
@src/components/study/Flashcard3D.tsx
@src/components/social/BadgeCelebration.tsx
@src/components/celebrations/CountUpScore.tsx
@src/components/dashboard/NBAHeroCard.tsx
@src/components/dashboard/CompactStatRow.tsx
@src/components/dashboard/CategoryPreviewCard.tsx
@src/components/dashboard/RecentActivityCard.tsx
@src/pages/Dashboard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Spring-bounce flashcard flip and prismatic badge celebration</name>
  <files>src/components/study/Flashcard3D.tsx, src/components/social/BadgeCelebration.tsx, src/components/celebrations/CountUpScore.tsx</files>
  <action>
  **Flashcard3D.tsx:**

  Read the current flashcard implementation. The flip is currently CSS-based (using data-flipped attribute and CSS transitions in globals.css).

  Per user decision: "Flashcard flip: Spring bounce (slight overshoot past 180 degrees) + prismatic refraction during rotation"

  Option A (preferred -- CSS + spring): Keep the CSS flip card structure but enhance:
  1. Apply `glass-light prismatic-border` to both `.flip-card-front` and `.flip-card-back` face elements (per user decision: "Glass flashcard -- both front and back of the 3D flip card get frosted glass treatment")
  2. Convert the flip animation from CSS transition to motion/react spring: wrap `.flip-card-inner` with `motion.div` and animate `rotateY` with spring config `{ type: 'spring', stiffness: 250, damping: 18, mass: 0.8 }` (lower damping = overshoot past 180 degrees)
  3. During rotation, the prismatic border is naturally visible on both faces -- no special "refraction" code needed since both faces have prismatic-border class
  4. IMPORTANT: Per MEMORY.md, the flip card uses `backfaceVisibility: hidden` which does NOT block pointer events -- the existing `pointerEvents` toggle via state must be preserved

  If the flip uses the `data-flipped` attribute approach with CSS transitions (from globals.css), consider whether to replace with motion.div entirely or augment. The motion.div approach with `animate={{ rotateY: isFlipped ? 180 : 0 }}` is cleaner and gives spring physics control.

  **BadgeCelebration.tsx:**

  Read the current implementation. It likely uses confetti. Add prismatic ripple:
  1. Add a `motion.div` behind the badge that expands outward:
     ```
     initial={{ scale: 0, opacity: 0.8 }}
     animate={{ scale: 3, opacity: 0 }}
     transition={{ duration: 0.8, ease: 'easeOut' }}
     ```
  2. Style the ripple div with a `conic-gradient` background matching the prismatic border colors:
     `background: conic-gradient(from 0deg, hsl(0 80% 60% / 0.3), hsl(120 80% 60% / 0.3), hsl(240 80% 60% / 0.3), hsl(0 80% 60% / 0.3))`
  3. Round with `rounded-full`
  4. Per user decision: "100% mastery celebration: Prismatic burst + confetti when score reaches 100%" -- if the celebration component is triggered at 100%, add extra intensity (larger scale, longer duration, brighter colors)

  **CountUpScore.tsx:**

  Read the current component. It uses react-countup. Ensure:
  1. The count-up animation plays simultaneously with any progress ring animation (already the case via mount timing)
  2. Add a subtle scale pop when counting finishes: `onEnd` callback triggers a small scale animation
  </action>
  <verify>Run `npx next build` -- zero errors. In dev mode: flip a flashcard and observe spring bounce past 180 degrees. Both card faces show frosted glass.</verify>
  <done>Flashcard3D flips with spring bounce (overshoot past 180 degrees) and both faces have glass + prismatic border. BadgeCelebration shows prismatic ripple. CountUpScore has scale pop on completion.</done>
</task>

<task type="auto">
  <name>Task 2: Dashboard cards with glass tiers and micro-interactions</name>
  <files>src/components/dashboard/NBAHeroCard.tsx, src/components/dashboard/CompactStatRow.tsx, src/components/dashboard/RecentActivityCard.tsx, src/components/dashboard/CategoryPreviewCard.tsx, src/pages/Dashboard.tsx</files>
  <action>
  **NBAHeroCard.tsx:**

  Read the current implementation. Per user decision: "NBA hero card gets hero-tier glass (heavier than regular cards)":
  1. Import GlassCard from `@/components/ui/GlassCard`
  2. Wrap the hero card content with `<GlassCard tier="medium">` (medium tier for hero prominence)
  3. The gradient overlay on the hero card: "Gradient overlays (NBA hero, interview cards): Deeper and more saturated in dark mode" -- add `.dark` variant CSS or inline Tailwind class: `dark:from-primary/25` instead of `from-primary/15`
  4. Add entrance animation: `<motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={SPRING_GENTLE}>`
  5. The CTA button on the hero card should inherit the triple-feedback from the upgraded Button component

  **CompactStatRow.tsx:**

  1. Import GlassCard, wrap each stat item with `<GlassCard tier="light">` (or apply `glass-light prismatic-border` class directly if wrapping is awkward)
  2. Per user decision: "Streak fire icon: Gentle pulse animation when streak is alive" -- add `animate-pulse` or a custom gentle scale pulse to the fire icon when streak > 0
  3. Per user decision: "SRS badge count: Pulse when reviews are due" -- add a pulse animation to the SRS count badge when due > 0

  **RecentActivityCard.tsx:**

  1. Wrap with GlassCard tier="light"
  2. Stagger the list items inside with a simple delay

  **CategoryPreviewCard.tsx:**

  1. Wrap with GlassCard tier="light"
  2. The category progress bar should animate with spring fill (same as SubcategoryBar)

  **Dashboard.tsx:**

  1. Wrap dashboard sections in StaggeredList for staggered entrance
  2. Ensure all cards have consistent glass styling
  3. Per user decision: "No parallax on dashboard -- everything scrolls together" -- verify no parallax effects exist (they shouldn't from Phase 16)
  </action>
  <verify>Run `npx next build` -- zero errors. Dashboard shows glass cards with prismatic borders. NBA hero card is visually prominent with medium-tier glass. Streak icon pulses.</verify>
  <done>Dashboard uses GlassCard tiers: medium for NBA hero, light for stat/preview/activity cards. Streak icon pulses when alive, SRS badge pulses when due. Sections stagger in.</done>
</task>

</tasks>

<verification>
1. `npx next build` succeeds with zero errors
2. Flashcard3D.tsx uses spring animation with stiffness 250, damping 18
3. BadgeCelebration.tsx has prismatic ripple animation
4. NBAHeroCard.tsx uses GlassCard tier="medium"
5. CompactStatRow has streak pulse and SRS pulse
6. Dashboard.tsx wraps sections in StaggeredList
</verification>

<success_criteria>
Flashcard flips with spring bounce, badge celebrations have prismatic ripple, and all dashboard cards display with appropriate glass tiers and micro-interactions.
</success_criteria>

<output>
After completion, create `.planning/phases/17-ui-system-polish/17-06-SUMMARY.md`
</output>
