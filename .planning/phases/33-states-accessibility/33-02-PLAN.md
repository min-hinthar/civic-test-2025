---
phase: 33-states-accessibility
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/globals.css
  - src/styles/animations.css
  - src/styles/prismatic-border.css
  - src/components/animations/StaggeredList.tsx
autonomous: true
requirements:
  - STAT-05

must_haves:
  truths:
    - "All CSS keyframes in globals.css have prefers-reduced-motion: reduce rules that disable animation"
    - "All CSS keyframes in animations.css have prefers-reduced-motion: reduce rules"
    - "StaggeredList keeps sequential timing (stagger delay) under reduced motion but removes slide/fade per-item motion"
    - "Information-conveying animations (progress bars) are preserved, decorative animations are stopped"
  artifacts:
    - path: "src/styles/globals.css"
      provides: "Reduced motion rules for floaty, badge-shimmer, badge-gold-shimmer, stripe-move, pulse-glow, fade-in-up"
      contains: "prefers-reduced-motion"
    - path: "src/styles/animations.css"
      provides: "Reduced motion rules for any uncovered custom keyframes"
      contains: "prefers-reduced-motion"
    - path: "src/components/animations/StaggeredList.tsx"
      provides: "Updated reduced-motion variants with stagger timing but no visual motion"
  key_links:
    - from: "src/styles/globals.css"
      to: "Browser prefers-reduced-motion media query"
      via: "@media (prefers-reduced-motion: reduce)"
      pattern: "prefers-reduced-motion"
    - from: "src/components/animations/StaggeredList.tsx"
      to: "motion/react useReducedMotion"
      via: "import useReducedMotion"
      pattern: "reducedContainerVariants|reducedItemVariants"
---

<objective>
Audit and fix all CSS keyframes and JS animations that lack prefers-reduced-motion support, ensuring the app respects the OS reduced-motion preference without losing information.

Purpose: STAT-05 requires all CSS keyframes and transitions respect prefers-reduced-motion: reduce. Research identified 6+ custom keyframe sets in globals.css with no reduced-motion rules, plus StaggeredList's reduced-motion variant removing both timing AND motion (user wants timing preserved).
Output: Complete reduced-motion coverage across all CSS files and corrected StaggeredList behavior.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/33-states-accessibility/33-CONTEXT.md
@.planning/phases/33-states-accessibility/33-RESEARCH.md
@src/styles/globals.css
@src/styles/animations.css
@src/styles/prismatic-border.css
@src/components/animations/StaggeredList.tsx
@src/hooks/useReducedMotion.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add prefers-reduced-motion rules for all uncovered CSS keyframes</name>
  <files>
    src/styles/globals.css
    src/styles/animations.css
    src/styles/prismatic-border.css
  </files>
  <action>
    **Step 1 - Full audit:** Grep all three CSS files for `@keyframes` declarations. For each, check if there's a corresponding `@media (prefers-reduced-motion: reduce)` rule. The research identified these as MISSING:
    - `floaty` / `animate-soft-bounce` (globals.css)
    - `badge-shimmer` (globals.css)
    - `badge-gold-shimmer` (globals.css)
    - `stripe-move` (globals.css)
    - `pulse-glow` (globals.css)
    - `fade-in-up` (globals.css)

    Also check animations.css and prismatic-border.css for any gaps not caught in research.

    **Step 2 - Add reduced-motion rules for each gap:**

    In globals.css, add a single `@media (prefers-reduced-motion: reduce)` block (or append to existing if one exists) with:
    ```css
    @media (prefers-reduced-motion: reduce) {
      .animate-soft-bounce {
        animation: none;
      }
      .badge-shimmer,
      .badge-gold-shimmer {
        animation: none;
        background-size: 100% 100%;
      }
      [style*="stripe-move"] {
        animation-duration: 0s !important;
      }
      [class*="pulse-glow"] {
        animation: none;
      }
      .animate-fade-in-up {
        animation: none;
        opacity: 1;
        transform: none;
      }
    }
    ```

    For stripe-move: use `animation-duration: 0s` rather than `animation: none` because it's applied via inline style. The `!important` is necessary to override inline style specificity.

    For badge-shimmer/badge-gold-shimmer: `animation: none` plus `background-size: 100%` to show the badge at its natural state without the sweep effect.

    For fade-in-up: set `opacity: 1` and `transform: none` so elements are visible without the entrance animation.

    **Step 3 - Verify existing coverage in animations.css:**
    The research says animations.css already handles shimmer, breathe, flame. Verify and add any gaps. Particularly check:
    - `skeleton-shimmer` (if added by Plan 01, ensure it has reduced-motion rule)
    - Any other custom keyframes

    **Step 4 - Verify prismatic-border.css:**
    The research says prismatic animations are already covered. Verify the `prismatic-rotate` keyframe has a reduced-motion rule. If not, add one.

    **Per-animation strategy (per user decision):**
    - Decorative animations (badge shimmer, soft bounce, pulse glow): `animation: none`
    - Progress indicators (stripe-move): `animation-duration: 0s` (still shows stripe, just doesn't move)
    - Entrance animations (fade-in-up): `animation: none; opacity: 1` (element appears instantly, no info lost)
  </action>
  <verify>
    - `npm run lint:css` passes (stylelint)
    - Grep all `@keyframes` in globals.css, animations.css, prismatic-border.css
    - For each keyframe, verify a corresponding reduced-motion rule exists
    - No custom keyframe left without reduced-motion coverage
  </verify>
  <done>
    Every custom CSS keyframe in globals.css, animations.css, and prismatic-border.css has a prefers-reduced-motion: reduce rule. Decorative animations stop, entrance animations show final state instantly, progress indicators show static state.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix StaggeredList reduced-motion to keep timing but remove visual motion</name>
  <files>
    src/components/animations/StaggeredList.tsx
  </files>
  <action>
    **Current state:** StaggeredList has `reducedContainerVariants` and `reducedItemVariants` that set `opacity: 1, y: 0` with no stagger. This makes all items appear simultaneously.

    **User decision:** "Keep sequential timing (items appear one by one) but remove slide/fade motion - just appear."

    **Fix:** Update the reduced-motion variants:

    1. `reducedContainerVariants` should KEEP `staggerChildren` timing (same value as the normal container variants, e.g., `staggerChildren: 0.05` or whatever the existing value is). Keep the `visible` state with stagger orchestration.

    2. `reducedItemVariants` should:
       - `hidden`: `{ opacity: 0 }` (items start invisible so stagger reveal works)
       - `visible`: `{ opacity: 1, transition: { duration: 0 } }` (items snap to visible instantly per item, but stagger between items is preserved via container)
       - Do NOT include `y` transform at all (no slide motion)

    This achieves: items appear one-by-one (stagger preserved) but each item's individual appearance is instant (no fade, no slide).

    Read the existing StaggeredList code first to understand the current variant structure, then make targeted edits to only the `reducedContainerVariants` and `reducedItemVariants`.
  </action>
  <verify>
    - `npm run typecheck` passes
    - `npm run lint` passes
    - Under reduced motion: items appear one-by-one (not all at once) but with no slide/fade animation per item
    - Under normal motion: behavior unchanged (stagger + slide + fade)
  </verify>
  <done>
    StaggeredList reduced-motion variants preserve sequential stagger timing (items appear one by one) while removing all per-item visual motion (no slide, no fade - instant snap to visible). Normal motion behavior is unchanged.
  </done>
</task>

</tasks>

<verification>
- `npm run typecheck` passes with zero errors
- `npm run lint` passes
- `npm run lint:css` passes
- Every `@keyframes` declaration in all CSS files has a corresponding reduced-motion rule
- StaggeredList under reduced motion: items appear sequentially but without visual animation
- StaggeredList normal mode: unchanged from current behavior
</verification>

<success_criteria>
1. Zero CSS keyframes without reduced-motion coverage (verified by grep audit)
2. StaggeredList preserves sequential timing under reduced motion per user decision
3. No visual regression in normal-motion mode
4. All linting passes (TypeScript, ESLint, Stylelint)
</success_criteria>

<output>
After completion, create `.planning/phases/33-states-accessibility/33-02-SUMMARY.md`
</output>

