---
phase: 28-interview-ux-voice-flow-polish
plan: 09
type: execute
wave: 4
depends_on: [28-06, 28-07, 28-08]
files_modified:
  - src/components/interview/InterviewSession.tsx
  - src/components/interview/InterviewResults.tsx
  - src/components/interview/InterviewSetup.tsx
  - src/lib/i18n/strings.ts
autonomous: false
requirements: [IVPOL-01, IVPOL-02, IVPOL-03, IVPOL-04, IVPOL-05, IVPOL-06, IVPOL-07, IVPOL-08, IVPOL-09, IVPOL-10]
must_haves:
  truths:
    - "Full interview flow works end-to-end: setup -> countdown with loading -> session -> results"
    - "Real mode feels like USCIS simulation: no score, monochrome progress, urgent timer, hidden exit"
    - "Practice mode feels educational: colored progress, keyword feedback, answer read-aloud"
    - "Text input fallback works when speech recognition unavailable"
    - "Audio pre-caching completes during countdown with progress indication"
    - "Back button, orientation lock, and auto-pause all function on mobile"
    - "Build succeeds with no TypeScript or lint errors"
  artifacts:
    - path: "src/lib/i18n/strings.ts"
      provides: "New bilingual strings for Phase 28 interview features"
  key_links:
    - from: "src/components/interview/InterviewSession.tsx"
      to: "src/lib/interview/interviewFeedback.ts"
      via: "plays feedback audio from pre-cache"
      pattern: "getCorrectFeedback|getIncorrectFeedback"
---

<objective>
Final integration polish, bilingual strings, screen reader accessibility, and build verification.

Purpose: Ensure all Phase 28 features work together seamlessly, add missing bilingual strings, polish screen reader announcements for new features, and verify the production build.

Output: Fully polished interview experience with complete bilingual support
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@src/lib/i18n/strings.ts
@src/components/interview/InterviewSession.tsx
@.planning/phases/28-interview-ux-voice-flow-polish/28-06-SUMMARY.md
@.planning/phases/28-interview-ux-voice-flow-polish/28-07-SUMMARY.md
@.planning/phases/28-interview-ux-voice-flow-polish/28-08-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add bilingual strings and screen reader polish</name>
  <files>src/lib/i18n/strings.ts, src/components/interview/InterviewSession.tsx, src/components/interview/InterviewResults.tsx, src/components/interview/InterviewSetup.tsx</files>
  <action>
**Bilingual strings** (add to `src/lib/i18n/strings.ts` interview section):
- "Loading audio..." / Myanmar translation
- "Interview Paused" / Myanmar translation
- "Resuming..." / Myanmar translation
- "For voice input, try Chrome" / Myanmar translation
- "Slow connection detected. Audio may take longer to load." / Myanmar translation
- "You're offline. Some audio may use voice synthesis." / Myanmar translation
- "Leave interview? Progress will be saved." / Myanmar translation
- "Please rotate your device to portrait" / Myanmar translation
- "Matched keywords:" / Myanmar translation
- "Missing keywords:" / Myanmar translation
- "No answer given" / Myanmar translation
- "Best Score" / Myanmar translation
- "Type your answer..." (placeholder) / Myanmar translation
- "Couldn't save progress" / Myanmar translation
- "Using voice synthesis" / Myanmar translation

**Screen reader announcements**:
1. Audio loading progress: sr-only live region announces "Loading audio: X of Y" during countdown loading phase
2. Mode badge: `aria-label="Interview mode: Real"` or `aria-label="Interview mode: Practice"`
3. Timer urgency: sr-only announces "5 seconds remaining" at 5s, "3 seconds" at 3s (similar to Phase 27 pattern)
4. Text input: `aria-label="Type your answer"` on textarea
5. Keyword highlights: `aria-label="Correct keyword: {word}"` on each mark element
6. Missing keywords: `aria-label="Missing keyword: {word}"` on each pill
7. Long-press exit: `aria-label="Hold for 3 seconds to exit"` with `aria-roledescription="long press button"`
8. Paused overlay: `role="alertdialog"` with `aria-label="Interview paused"`

Apply these throughout the interview components.
  </action>
  <verify>TypeScript compiles. All new strings render in both languages.</verify>
  <done>All Phase 28 features have bilingual strings and proper screen reader announcements</done>
</task>

<task type="auto">
  <name>Task 2: Integration testing and build verification</name>
  <files>src/components/interview/InterviewSession.tsx, src/components/interview/InterviewResults.tsx</files>
  <action>
**Final integration fixes**:
1. Wire feedback audio into InterviewSession:
   - Import `getCorrectFeedback`, `getIncorrectFeedback` from `@/lib/interview/interviewFeedback`
   - In Practice mode grading phase: play feedback audio (correct/incorrect prefix) followed by answer audio
   - In Real mode: play just the feedback prefix (brief acknowledgment, no answer reveal)
2. Ensure `FEEDBACK_AUDIO_NAMES` are included in pre-cache URL list (verify from Plan 08)
3. Test all import paths resolve correctly
4. Fix any remaining TypeScript errors from Plan 06/07 integration

**Build verification**:
1. Run `npm run typecheck` -- must pass with zero errors
2. Run `npm run lint` -- must pass
3. Run `npm run build` -- production build must succeed
4. Run `npm run test:run` -- all existing tests must pass (no regressions)
5. Check that new audio files are included in the build output (public directory)

**Visual checkpoint preparation** (for human verify):
- Document the complete interview flow for both modes
- Note specific things to check visually
  </action>
  <verify>`npm run build` succeeds. `npm run test:run` shows no regressions. `npm run typecheck` clean.</verify>
  <done>Production build succeeds, all tests pass, no TypeScript errors, no lint warnings</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual verification of complete interview flow</name>
  <files>src/components/interview/InterviewSession.tsx</files>
  <action>
Visual verification of complete Phase 28 interview UX polish:
1. Audio pre-caching during countdown with progress bar
2. Text input fallback when speech recognition unavailable
3. Real mode: monochrome progress, hidden score, urgent timer (amber/red), long-press exit
4. Practice mode: colored progress, keyword highlights, answer read-aloud
5. Mobile edge cases: back interception, orientation lock, auto-pause, keyboard scroll
6. Bilingual strings for all new features
7. Screen reader accessibility for new components

Verify at http://localhost:3000/#/interview:
- Practice mode: loading progress, PRACTICE badge, keyword highlights, colored progress, answer read-aloud
- Real mode: REAL badge, hidden score, monochrome progress, amber/red timer, long-press exit, score reveal
- Text input: textarea + Send button in Firefox, grading works
- Mobile: landscape overlay, auto-pause on tab switch, back interception
- Results: keyword highlights in transcript, bilingual labels
  </action>
  <verify>Manual visual testing of all interview features in both modes</verify>
  <done>All interview features verified visually: audio pre-cache, text input, mode differentiation, mobile edge cases, bilingual strings</done>
</task>

</tasks>

<verification>
- `npm run build` succeeds
- `npm run test:run` passes with no regressions
- `npm run typecheck` clean
- `npm run lint` clean
- Visual checkpoint approved
</verification>

<success_criteria>
- Complete end-to-end interview flow works for both Real and Practice modes
- Audio pre-caching is reliable with TTS fallback
- Text input works as fallback for non-speech browsers
- Mobile edge cases handled gracefully
- All features have bilingual strings and screen reader support
- Production build succeeds with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/28-interview-ux-voice-flow-polish/28-09-SUMMARY.md`
</output>
