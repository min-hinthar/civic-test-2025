---
phase: 17-ui-system-polish
plan: 04
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - src/components/ui/Button.tsx
  - src/components/ui/Card.tsx
  - src/components/ui/Dialog.tsx
  - src/components/ui/Progress.tsx
  - src/components/hub/HubTabBar.tsx
  - src/components/ui/LanguageToggle.tsx
  - src/components/ThemeToggle.tsx
autonomous: true

must_haves:
  truths:
    - "Button press shows triple feedback: scale down 95%, prismatic glow flare, color shift"
    - "Card hover lifts the card up with increased shadow and prismatic border glow intensifies"
    - "Hub tab switching has spring bounce animation on the active indicator"
    - "Toggle switches show spring bounce on knob + smooth color morph"
  artifacts:
    - path: "src/components/ui/Button.tsx"
      provides: "Button with triple feedback (scale + glow + color shift)"
      contains: "SPRING_BOUNCY"
    - path: "src/components/hub/HubTabBar.tsx"
      provides: "Tab bar with spring bounce indicator"
      contains: "SPRING_SNAPPY"
  key_links:
    - from: "src/components/ui/Button.tsx"
      to: "src/lib/motion-config.ts"
      via: "import"
      pattern: "from.*motion-config"
    - from: "src/components/hub/HubTabBar.tsx"
      to: "src/lib/motion-config.ts"
      via: "import"
      pattern: "from.*motion-config"
---

<objective>
Apply micro-interactions to core interactive components: buttons, cards, tabs, toggles, and dialogs.

Purpose: Satisfies UISYS-04 (micro-interactions on all primary actions). These are the most frequently interacted-with elements.
Output: All primary interactive components have playful bouncy micro-interactions using shared spring configs.
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/17-ui-system-polish/17-RESEARCH.md
@src/components/ui/Button.tsx
@src/components/ui/Card.tsx
@src/components/hub/HubTabBar.tsx
@src/components/ThemeToggle.tsx
@src/lib/motion-config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Upgrade Button with triple feedback and Card with hover lift</name>
  <files>src/components/ui/Button.tsx, src/components/ui/Card.tsx</files>
  <action>
  **Button.tsx:**

  1. Import `SPRING_BOUNCY` from `@/lib/motion-config` and replace the existing `springTransition` constant
  2. Update `motionVariants.tap` from `{ scale: 0.97 }` to `{ scale: 0.95 }` per user decision (95% scale)
  3. Add prismatic glow flare on press via CSS class:
     - Add `active:shadow-[0_0_20px_hsl(var(--color-primary)/0.4)]` to the className for primary/chunky variants
     - For destructive: `active:shadow-[0_0_20px_hsl(var(--color-destructive)/0.4)]`
     - For success: `active:shadow-[0_0_20px_hsl(var(--color-success)/0.4)]`
  4. Add color shift on press: `active:brightness-110` via CSS (or use Tailwind `active:brightness-110` if available, otherwise add inline `filter: brightness(1.1)` via the tap motion variant)
  5. The triple feedback is: (a) scale 95% via motion whileTap, (b) glow flare via CSS active pseudo-class, (c) color shift via CSS active brightness. All happen simultaneously on press.
  6. Keep the existing chunky 3D shadow system -- the glow flare is additive.

  **Card.tsx:**

  Read the existing Card.tsx. If it's a simple wrapper:
  1. Import motion from 'motion/react' and SPRING_GENTLE from '@/lib/motion-config'
  2. Add `whileHover={{ y: -4 }}` and `transition={SPRING_GENTLE}` for hover lift effect
  3. Add CSS classes for increased shadow on hover: `hover:shadow-lg`
  4. When the card has `prismatic-border` class, the hover pseudo-class automatically intensifies the border (handled in prismatic-border.css)
  5. Respect reduced motion: if `shouldReduceMotion`, skip the hover animation

  If Card.tsx is a motion component already, just update the hover animation values. If it's a plain div wrapper, consider whether converting to motion.div is appropriate (it should be fine for a component that's already interactive).
  </action>
  <verify>Run `npx next build` -- zero errors. In dev mode: click a primary button and observe scale-down + glow + brightness shift. Hover a card and see it lift.</verify>
  <done>Button has triple feedback (scale 95% + prismatic glow + color shift). Card has spring hover lift with shadow increase.</done>
</task>

<task type="auto">
  <name>Task 2: Upgrade HubTabBar with spring indicator and toggle switches</name>
  <files>src/components/hub/HubTabBar.tsx, src/components/ui/LanguageToggle.tsx, src/components/ThemeToggle.tsx, src/components/ui/Dialog.tsx</files>
  <action>
  **HubTabBar.tsx:**

  Read the current HubTabBar component. It manages tab switching for the Progress Hub tabs (Overview, Categories, History, Achievements).

  1. Import `motion` from 'motion/react' and `SPRING_SNAPPY` from '@/lib/motion-config'
  2. Add a sliding active indicator using `motion.div` with `layoutId="hub-tab-indicator"`:
     - Position it as an absolute-positioned pill behind the active tab
     - Use `SPRING_SNAPPY` transition for the slide animation
     - Give it a subtle background color: `bg-primary/15` in light mode, `bg-primary/20` in dark
  3. Add scale pop to the active tab label: wrap in `<motion.span animate={{ scale: 1.05 }} transition={SPRING_SNAPPY}>`
  4. Inactive tabs get `scale: 1` (static)
  5. The "content morphs" part of the user decision is handled by AnimatePresence on the tab content in HubPage, not here

  **ThemeToggle.tsx:**

  The standalone ThemeToggle component currently has a rotate animation. Upgrade:
  1. Change the bounce/spring on the icon rotation to use SPRING_BOUNCY
  2. Add `whileTap={{ scale: 0.9 }}` with SPRING_BOUNCY for press feedback
  3. Make the button 48px minimum (currently 40px h-10 w-10 â†’ change to h-12 w-12) per user decision for icon-only buttons

  **LanguageToggle.tsx:**

  Read the current component. Apply similar treatment:
  1. Import motion and SPRING_BOUNCY
  2. Add `whileTap={{ scale: 0.9 }}` for press feedback
  3. Ensure 48px minimum touch target

  **Dialog.tsx:**

  Read the current Dialog component. Apply glass-heavy tier to the dialog overlay/panel:
  1. Add `glass-heavy prismatic-border` classes to the dialog content panel
  2. The dialog overlay (backdrop) should have a slight blur: `backdrop-blur-sm`
  3. Add entrance animation: scale from 0.95 + fade in with SPRING_BOUNCY
  </action>
  <verify>Run `npx next build` -- zero errors. In dev mode: switch hub tabs and see sliding indicator + active label pop. Toggle theme with bounce. Dialog opens with spring animation.</verify>
  <done>HubTabBar has spring sliding indicator + active pop. ThemeToggle and LanguageToggle have 48px targets + spring press feedback. Dialog has glass-heavy + prismatic border + spring entrance.</done>
</task>

</tasks>

<verification>
1. `npx next build` succeeds with zero errors
2. Button.tsx imports SPRING_BOUNCY and has `scale: 0.95` in tap variant
3. HubTabBar.tsx has `layoutId="hub-tab-indicator"` or equivalent spring animation
4. ThemeToggle.tsx has 48px touch target (h-12 w-12)
5. Dialog.tsx has `glass-heavy prismatic-border`
</verification>

<success_criteria>
All primary interactive components (buttons, cards, tabs, toggles, dialogs) have visible playful micro-interactions with spring physics. Button press shows triple feedback, tab switch slides with bounce, toggles pop on press.
</success_criteria>

<output>
After completion, create `.planning/phases/17-ui-system-polish/17-04-SUMMARY.md`
</output>
