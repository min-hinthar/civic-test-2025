---
phase: 11-design-token-foundation
plan: 06
type: execute
wave: 3
depends_on: [01]
files_modified:
  - src/styles/globals.css
autonomous: true

must_haves:
  truths:
    - "Page-shell decorative gradient backgrounds use token color references instead of hardcoded rgba values"
    - "@layer components utilities (glass-panel, stat-card, etc.) use semantic token classes"
    - "Chunky shadow utilities reference tokens instead of hardcoded HSL"
    - "globals.css has no remaining hardcoded hex, rgb, or rgba color values outside of gradients"
  artifacts:
    - path: "src/styles/globals.css"
      provides: "Fully tokenized globals.css with gradient backgrounds and @layer utilities"
  key_links:
    - from: "src/styles/globals.css"
      to: "src/styles/tokens.css"
      via: "CSS variable references"
      pattern: "var\\(--color-"
---

<objective>
Tokenize the remaining hardcoded color values in globals.css: page-shell decorative gradients, body::before gradients, chunky shadow utilities in @layer components, and the glass-panel/stat-card/interactive-tile component utilities.

Purpose: Eliminate the last hardcoded color values in the style layer, completing the single-source-of-truth migration.
Output: globals.css with all colors referencing tokens
</objective>

<execution_context>
@C:/Users/minkk/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/minkk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-design-token-foundation/11-01-SUMMARY.md
@.planning/phases/11-design-token-foundation/11-RESEARCH.md (gradient tokenization, chunky shadows)
@src/styles/globals.css (current state after Plan 01)
@src/styles/tokens.css (available tokens)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Tokenize globals.css gradients and @layer utilities</name>
  <files>src/styles/globals.css</files>
  <action>
After Plan 01 slimmed globals.css, there are still hardcoded color values in gradients and @layer utilities. Migrate these:

**1. Page-shell decorative gradients (::before pseudo-elements):**

The `.page-shell::before` gradient uses `rgba(255, 182, 193, 0.4)`, `rgba(129, 212, 250, 0.35)`, `rgba(186, 230, 253, 0.3)`. These are decorative blobs -- convert to use token colors with alpha:

```css
.page-shell::before {
  background:
    radial-gradient(circle at 15% 20%, hsl(var(--color-patriotic-red) / 0.15), transparent 55%),
    radial-gradient(circle at 80% 0%, hsl(var(--color-primary) / 0.2), transparent 60%),
    radial-gradient(circle at 50% 80%, hsl(var(--color-secondary) / 0.15), transparent 65%);
  /* ... keep filter, opacity, transition */
}
```

The `.dark .page-shell::before` similarly:
```css
.dark .page-shell::before {
  background:
    radial-gradient(circle at 10% 20%, hsl(var(--color-accent-purple) / 0.15), transparent 55%),
    radial-gradient(circle at 80% 0%, hsl(var(--color-destructive) / 0.12), transparent 60%),
    radial-gradient(circle at 50% 80%, hsl(var(--color-success) / 0.12), transparent 65%);
  opacity: 1;
}
```

Note: The exact gradient colors are decorative and should be "close enough" to the current look. The hue and feel matter more than pixel-perfect rgba matching. Use the semantic tokens that most closely match the current visual character.

**2. body::before gradient:**
Same approach -- convert rgba values to `hsl(var(--token) / alpha)` format.

**3. `.dark body::before` gradient:**
Same approach.

**4. `.card-edge-safe` shadow:**
Replace `rgba(0, 0, 0, 0.25)` with `var(--shadow-lg)` or a token-based shadow value.

**5. `@layer components` block:**

- `.chunky-shadow-primary`: Replace `hsl(var(--primary-700))` with `hsl(var(--color-primary-active))` (which maps to --blue-700 in light mode)
- `.chunky-shadow-destructive`: Replace `hsl(10 45% 35%)` hardcoded value with `hsl(var(--color-destructive-hover))` or add a `--color-destructive-active` token if needed
- `.chunky-shadow-success`: Replace `hsl(142 76% 30%)` with a token reference. May need to add `--color-success-active: 142 76% 30%` to tokens.css if no suitable token exists.
- `.chunky-shadow-accent-purple`: Replace `hsl(270 60% 44%)` with a token reference. May need `--color-accent-purple-active` token.

- `.glass-panel`: Replace `dark:bg-slate-950/80` with `dark:bg-background/80`. Replace `dark:border-white/10` with `dark:border-border`. But ideally, reduce these dark: prefixes to token-based approach.
- `.stat-card`: Same treatment as glass-panel.
- `.interactive-tile`: Same treatment.

**6. `.flip-card-button:focus-visible`:**
Replace `hsl(var(--primary) / 0.4)` with `hsl(var(--color-ring) / 0.4)`.

**7. `.focus-ring:focus-visible`:**
Replace `hsl(var(--primary-500))` with `hsl(var(--color-ring))`.

**8. `::selection`:**
Already uses `hsl(var(--primary))` -- update to `hsl(var(--color-primary))`.

**9. body styles:**
Update any remaining `var(--background)` / `var(--foreground)` references to new token names `var(--color-background)` / `var(--color-text-primary)` (if not already done in Plan 01).

**IMPORTANT:** If any of these changes require new tokens that don't exist in tokens.css, add them to tokens.css as part of this task. Specifically:
- `--color-success-active` (darker success for chunky shadow)
- `--color-accent-purple-active` (darker purple for chunky shadow)
- `--color-destructive-active` (darker destructive for chunky shadow)
  </action>
  <verify>
- `npx next build` passes
- grep for `rgba(` in globals.css returns zero results
- grep for hardcoded `hsl(` values (with literal numbers, not `var()`) in globals.css returns zero or near-zero results
- @layer components utilities reference token variables
- Decorative gradients use `hsl(var(--token) / alpha)` format
  </verify>
  <done>globals.css has zero hardcoded color values. All gradients, shadows, and utility classes reference the token system. Any additional tokens needed for chunky shadows are added to tokens.css.</done>
</task>

</tasks>

<verification>
- `npx next build` passes
- globals.css contains no hardcoded rgba() or hex color values
- All @layer component utilities reference tokens
- Page-shell gradients adapt to theme via token colors
</verification>

<success_criteria>
globals.css is fully tokenized. No hardcoded color values remain. Decorative gradients use token color references with alpha. Chunky shadow utilities reference semantic tokens.
</success_criteria>

<output>
After completion, create `.planning/phases/11-design-token-foundation/11-06-SUMMARY.md`
</output>
